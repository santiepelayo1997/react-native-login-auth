if (self.CavalryLogger) { CavalryLogger.start_js(["+1lpd"]); }

__d("SmartComposeTypeaheadHelperQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"queryParams",type:"AssistantSmartComposeParams!"}],b=[{alias:null,args:[{kind:"Variable",name:"query_params",variableName:"queryParams"}],concreteType:"AssistantSmartComposeCandidate",kind:"LinkedField",name:"typeahead_list",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"confidence",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"typeahead",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"SmartComposeTypeaheadHelperQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"SmartComposeTypeaheadHelperQuery",selections:b},params:{id:"2326980770744887",metadata:{},name:"SmartComposeTypeaheadHelperQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CancelablePromise",["Promise","promiseDone"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){var c=this;this.$1=new(b("Promise"))(function(d,e){b("promiseDone")(a.then(function(a){return c.$2?e({isCanceled:!0}):d(a)})["catch"](function(a){return c.$2?e({isCanceled:!0}):e(a)}))});this.$2=!1}var c=a.prototype;c.getPromise=function(){return this.$1};c.cancel=function(){this.$2=!0};return a}();e.exports=a}),null);
__d("SmartComposeCandidatesGeneratedFalcoEvent",["FalcoLoggerInternal","getSamplingPolicyConfig_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getSamplingPolicyConfig_DO_NOT_USE")("falco","smart_compose_candidates_generated");c=b("FalcoLoggerInternal").create(a);e.exports=c}),null);
__d("SmartComposeMatchingSuggestionFalcoEvent",["FalcoLoggerInternal","getSamplingPolicyConfig_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getSamplingPolicyConfig_DO_NOT_USE")("falco","smart_compose_matching_suggestion");c=b("FalcoLoggerInternal").create(a);e.exports=c}),null);
__d("SmartComposeSuggestionClickedFalcoEvent",["FalcoLoggerInternal","getSamplingPolicyConfig_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getSamplingPolicyConfig_DO_NOT_USE")("falco","smart_compose_suggestion_clicked");c=b("FalcoLoggerInternal").create(a);e.exports=c}),null);
__d("SmartComposeSuggestionDisplayedFalcoEvent",["FalcoLoggerInternal","getSamplingPolicyConfig_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getSamplingPolicyConfig_DO_NOT_USE")("falco","smart_compose_suggestion_displayed");c=b("FalcoLoggerInternal").create(a);e.exports=c}),null);
__d("SmartComposeTypeaheadHelper",["CancelablePromise","React","RelayModern","SmartComposeCandidatesGeneratedFalcoEvent","SmartComposeMatchingSuggestionFalcoEvent","SmartComposeSuggestionClickedFalcoEvent","SmartComposeSuggestionDisplayedFalcoEvent","promiseDone","stylex","SmartComposeTypeaheadHelperQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=b("RelayModern").fetchQuery;b("RelayModern").graphql;var j=7,k=100,l=g!==void 0?g:g=b("SmartComposeTypeaheadHelperQuery.graphql");a=function(){function a(a,b,c){var d=this;this.$1=null;this.$2="";this.$3="";this.$4="";this.$5="";this.$6=null;this.$7=new Set();this.$8=[];this.$11=null;this.$14=new Date();this.$15=-1;this.$16=-1;this.$17=!1;this.$18="";this.$19="";this.$20=!1;this.$9=a;this.$12=b;this.$10=c;this.$13={component:function(a){var b=d.getSuggestion();return h.jsxs(h.Fragment,{children:[a.children,b.length>0&&h.jsx("span",{className:"ll82wnt6 g3x53x41",children:b})]})},strategy:function(a,b,c){if(d.getSuggestion().length===0||d.$20&&a.getKey()!==d.$18)return;c=d.$20?d.$19.length:d.$5.length;b(c-1,c)}}}var c=a.prototype;c.updateTypeSpeed=function(){var a=new Date();this.$15=a-this.$14;this.$14=a;return this};c.setEnteredText=function(a){a!==this.$5&&(this.$4=this.$5,this.$5=a,this.$21(),this.$22());return this};c.setCursorAtEnd=function(a){this.$17=a;return this};c.setLastBlockKey=function(a){this.$18=a;return this};c.setLastBlockEnteredText=function(a){this.$19=a;return this};c.setIsEditorStateBased=function(a){this.$20=a;return this};c.getSuggestion=function(){var a;return(a=(a=this.$6)==null?void 0:a.filteredText)!=null?a:""};c.isDeleting=function(){return this.$5.length<this.$4.length};c.getDraftDecorator=function(){return this.$13};c.onSuggestionChange=function(a){var b=this;this.$11=a;return{cancel:function(){b.$11=null}}};c.logSuggestionInserted=function(){var a=this,c=this.$6;if(c==null)return;b("SmartComposeSuggestionClickedFalcoEvent").log(function(){return{complete_text:c.candidate.text,confidence:c.candidate.confidence,processing_time:c.candidate.processingTime,suggestion_text:c.filteredText,surface:a.$9,type_speed:a.$16}})};c.reset=function(){this.$1&&this.$1.cancel(),this.$1=null,this.$11=null};c.$21=function(){var a,b=this.$23();if((b==null?void 0:b.filteredText)!==((a=this.$6)==null?void 0:a.filteredText)){this.$6=b;this.$11&&this.$11((a=b==null?void 0:b.filteredText)!=null?a:"")}};c.$23=function(a){var c=this;a=a||this.$8;if(a.length===0||this.$5.indexOf(this.$3)<0||this.isDeleting()||!this.$17)return null;var d=this.$5.substring(this.$3.length,this.$5.length).toLowerCase();if(d.length===0)return null;var e=a.find(function(a){return a.text.toLowerCase().indexOf(d)===0});if(e==null)return null;if(e.text.length<=d.length&&this.$7.has(e.text)){b("SmartComposeMatchingSuggestionFalcoEvent").log(function(){return{confidence:e.confidence,suggestion_text:e.text,suggestion_text_length:e.text.length,surface:c.$9,type_speed:c.$15}});return null}if(!this.$7.has(e.text)&&(e.text.length-d.length<j||this.$15!==-1&&this.$15<k))return null;var f={candidate:babelHelpers["extends"]({},e),filteredText:e.text.substring(d.length,e.text.length)};this.$7.has(e.text)||(this.$7.add(e.text),this.$16=this.$15,b("SmartComposeSuggestionDisplayedFalcoEvent").log(function(){return{complete_text:e.text,confidence:e.confidence,processing_time:e.processingTime,suggestion_text:f.filteredText,surface:c.$9,type_speed:c.$16}}));return f};c.$22=function(){var a=this;if(this.$5.trim()===""||!/[^\s]+\s$/.test(this.$5)||this.$2===this.$5||this.$3===this.$5||this.isDeleting()||this.$6!=null)return;var c=Date.now();this.$2=this.$5;this.$1&&this.$1.cancel();this.$1=new(b("CancelablePromise"))(i(this.$12,l,{queryParams:{feedback_id:this.$10,surface:this.$9,text:this.$5}}));b("promiseDone")(this.$1.getPromise(),function(d){var e=Date.now()-c,f=(d.typeahead_list&&d.typeahead_list.length>0?d.typeahead_list:[]).map(function(a){return{confidence:Math.round(1e4*a.confidence),processingTime:e,text:a.typeahead}});f.length>0&&(a.$6==null||a.$23(f)!=null)&&(a.$3=a.$2,a.$8=f,a.$7=new Set(),b("SmartComposeCandidatesGeneratedFalcoEvent").log(function(){return{candidates_blob:JSON.stringify(f),processing_time:e,surface:a.$9}}),a.$21())},function(a){})};return a}();e.exports=a}),null);
__d("XSettingsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/settings/",{tab:{type:"String"},section:{type:"String"},edit_section:{type:"String"},id:{type:"String"},dispute_id:{type:"String"},managed_notif_id:{type:"Int"},qp_id:{type:"Int"},ref:{type:"String"},privacy_source:{type:"Enum",enumType:1},option:{type:"String"},show_modal:{type:"Bool",defaultValue:!1},modal_type:{type:"String"},flow_kind:{type:"String"},referrer:{type:"Enum",enumType:1},protocol:{type:"String"},country:{type:"String"},initial_open_app_id:{type:"FBID"},legacy_contact_delegator_id:{type:"FBID"}})}),null);
__d("UFI2SmartComposeTypeaheadNUX.react",["cx","fbt","Link.react","React","XSettingsController","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=a.shown,d=a.contextRef;a=a.onCloseButtonClick;var e=b("XSettingsController").getURIBuilder().setString("tab","language").setString("section","smart_compose").getURI();return i.jsx(b("XUIAmbientNUX.react"),{contextRef:d,onCloseButtonClick:a,position:"above",shown:c,width:"wide",children:h._("See predictive text suggestions while you type. To accept a text suggestion, hit {=Tab} or {=\u2192} . You can turn this off in {=Settings.}",[h._param("=Tab",i.jsx("span",{className:"_8wpp",children:h._("Tab")})),h._param("=\u2192",i.jsx("span",{className:"_8wpp",children:h._("\u2192")})),h._param("=Settings.",i.jsx(b("Link.react"),{href:e,target:"_blank",children:h._("Settings.")}))])})}e.exports=a}),null);
__d("AssistantSmartComposeTypeahead.react",["cx","AbstractMentionsTextEditor.react","DebouncedMentionsTextEditor.react","DraftEditor.react","DraftModifier","EditorState","MercuryIDs","React","RelayFBEnvironment","SimpleNUXMessage","SimpleNUXMessageTypes","SmartComposeTypeaheadHelper","UFI2SmartComposeTypeaheadNUX.react","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=5;var i={GHOST:{visibility:"hidden"}};c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.state={typeahead:"",nuxShown:!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").WORK_SMART_COMPOSE_NUX)&&b("gkx")("1233934")};d.$2=function(a){d.props.onChange(a);a=a.getCurrentContent().getPlainText();d.$1.updateTypeSpeed();d.$1.setEnteredText(a);d.$1.setCursorAtEnd(d.$3())};d.$4=function(a){!d.insertTypeahead(a)&&d.props.onTab&&d.props.onTab(a)};d.$5=function(a){!d.insertTypeahead(a)&&d.props.onRightArrow&&d.props.onRightArrow(a)};d.$6=function(){if(!d.state.nuxShown)return;b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").WORK_SMART_COMPOSE_NUX);d.setState({nuxShown:!1})};d.$7=function(a,b){d.setState({typeahead:""});return d.props.handleContentReturn!=null?d.props.handleContentReturn(a,b):"not-handled"};d.$1=new(b("SmartComposeTypeaheadHelper"))("workchat",b("RelayFBEnvironment"),b("MercuryIDs").isValidThreadID(d.props.threadID)?b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID):"");d.$1.onSuggestionChange(function(a){return d.setState({typeahead:a})});return d}var d=c.prototype;d.insertTypeahead=function(a){var c=this.state.typeahead;if(c=="")return!1;this.$1.logSuggestionInserted();a.preventDefault();a=this.props.editorState;var d=a.getCurrentContent().getPlainText();a=b("EditorState").push(a,b("DraftModifier").insertText(a.getCurrentContent(),a.getSelection(),c),"insert-characters");a=b("EditorState").forceSelection(a,a.getCurrentContent().getSelectionAfter());this.props.onChange(a);this.$1.setEnteredText(d+c);this.$6();return!0};d.exitCurrentMode=function(){this.refs.foreground&&this.refs.foreground.exitCurrentMode()};d.focus=function(){this.refs.foreground&&this.refs.foreground.focus()};d.$8=function(){var a=this.props.editorState,c=a.getSelection(),d=a.getCurrentContent();if(!this.$3()||this.state.typeahead=="")return null;var e=a.getSelection().merge({anchorKey:d.getFirstBlock().getKey(),anchorOffset:0,focusOffset:d.getLastBlock().getText().length,focusKey:d.getLastBlock().getKey()});d=b("DraftModifier").applyInlineStyle(d,e,"GHOST");e=b("EditorState").createWithContent(b("DraftModifier").insertText(d,c,this.state.typeahead),a.getDecorator());return h.jsx(b("DebouncedMentionsTextEditor.react"),babelHelpers["extends"]({},this.props,{className:"_8voz",readOnly:!0,editorState:e,placeholder:"",customStyleMap:i}))};d.$3=function(){var a=this.props.editorState;if(a==null)return!1;var b=a.getSelection();a=a.getCurrentContent();var c=b.getAnchorKey();c=a.getBlockForKey(c);var d=b.getStartOffset();b=b.getEndOffset();a=c===a.getLastBlock()&&d===b&&d===c.getText().length;return a};d.render=function(){var a=this;return h.jsxs("div",{className:"_899m",children:[this.$8(),h.jsx(b("DebouncedMentionsTextEditor.react"),babelHelpers["extends"]({},this.props,{ref:"foreground",className:"_898j",handleContentReturn:this.$7,onChange:this.$2,onTab:this.$4,onRightArrow:this.$5,placeholder:this.state.typeahead===""?this.props.placeholder:""})),h.jsx(b("UFI2SmartComposeTypeaheadNUX.react"),{contextRef:function(){return a.refs.foreground},shown:this.state.nuxShown&&this.state.typeahead!=="",onCloseButtonClick:this.$6})]})};return c}(h.Component);c.defaultProps=babelHelpers["extends"]({},b("DraftEditor.react").defaultProps,{autoHighlight:!0,autoUpdateHighlight:!0,maxResults:a,reverseOrder:!1,threadID:""});e.exports=c}),null);
__d("getJSEnumSafe",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(b==null)return null;if(!Object.prototype.hasOwnProperty.call(a,b))return null;b=b;return a[b]}e.exports=a}),null);
__d("objectEntries",[],(function(a,b,c,d,e,f){function a(a){return Object.entries(a)}e.exports=a}),null);
__d("objectKeys",[],(function(a,b,c,d,e,f){function a(a){return Object.keys(a)}e.exports=a}),null);