if (self.CavalryLogger) { CavalryLogger.start_js(["gkDP1"]); }

__d("MessengerStickyVerticalScroller.react",["invariant","React","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=b("React");c=a.forwardRef;var i=a.useEffect,j=a.useImperativeHandle,k=a.useRef,l=a.useState,m=5,n={wrapper:{position:"relative"},growDetector:{position:"absolute",height:"100%",overflow:"auto"},shrinkDetector:{position:"absolute",height:"100%",overflow:"auto"}},o=function(a){var c=a.children,d=a.style,e=a.onResize,f=k(),j=k(),l=k(),m=k();i(function(){var a=b("nullthrows")(j.current),c=b("nullthrows")(l.current),d=b("nullthrows")(m.current);a.appendChild(document.createElement("div"));a=document.createElement("div");a.style.height="200%";c.appendChild(a);f.current=d.clientHeight;p()},[]);function o(a){var c=b("nullthrows")(m.current),d=b("nullthrows")(f.current);d=c.clientHeight-d;a.stopPropagation();if(d===0)return;f.current=c.clientHeight;p();e()}function p(){var a=b("nullthrows")(j.current),c=b("nullthrows")(l.current),d=b("nullthrows")(a.firstChild);d instanceof HTMLDivElement||g(0,22392);d.style.height=a.clientHeight+1+"px";a.scrollTop=a.scrollHeight;c.scrollTop=c.scrollHeight}return h.jsxs("div",{style:babelHelpers["extends"]({},d,n.wrapper),ref:m,children:[h.jsx("div",{style:n.growDetector,onScroll:o,ref:j}),h.jsx("div",{style:n.shrinkDetector,onScroll:o,ref:l}),c]})},p={container:{height:"100%",overflow:"auto"},diagnostics:{position:"absolute",background:"white",top:0,left:0}};d=c(function(a,c){var d=a.children,e=a.style,f=a.onScroll;a=a.initialAnchor;a=a===void 0?"bottom":a;var g=k(),n=k(-1),q=k(-1),r=k(-1),s=l(a),t=s[0],u=s[1],v=k(a);j(c,function(){return{scrollToBottom:function(){var a=b("nullthrows")(g.current);a.scrollTop=a.scrollHeight},getArea:function(){return{getScrollHeight:function(){var a=b("nullthrows")(g.current);return a.scrollHeight},getScrollTop:function(){var a=b("nullthrows")(g.current);return a.scrollTop},getElement:function(){return{getBoundingClientRect:function(){var a=b("nullthrows")(g.current);return{height:a.clientHeight}}}},isScrolledToBottom:function(){return t==="bottom"}}},scrollToPosition:function(a,c){c===void 0;c=b("nullthrows")(g.current);w();c.scrollTop=a},isScrolledToBottom:function(){return t==="bottom"}}});i(function(){var a=b("nullthrows")(g.current);q.current=a.clientHeight;n.current=a.scrollHeight;v.current==="bottom"&&(a.scrollTop=a.scrollHeight);r.current=a.scrollTop},[]);function w(){var a=b("nullthrows")(g.current),c=a.scrollHeight-n.current;n.current=a.scrollHeight;if(t==="bottom"&&c>0){c=a.scrollTop+c;var d=a.scrollHeight-c-q.current<m;a.scrollTop=c+(d?m*2:0)}}function x(){var a=b("nullthrows")(g.current),c=a.clientHeight-q.current;q.current=a.clientHeight;if(t==="bottom"){var d=n.current-r.current-a.clientHeight+c;d=d<m;c=r.current-c;a.scrollTop=c+(d?m*2:0)}r.current=a.scrollTop}function y(a){a=a.target.scrollTop;if(a===r.current)return;var c=b("nullthrows")(g.current);r.current=a;q.current=c.clientHeight;u(n.current-q.current-r.current<m?"bottom":"top");f!=null&&f()}return h.jsx(o,{onResize:x,style:e,children:h.jsx("div",{style:p.container,ref:g,onScroll:y,children:h.jsx(o,{onResize:w,style:null,children:d})})})});e.exports=d}),null);