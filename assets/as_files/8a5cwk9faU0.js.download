if (self.CavalryLogger) { CavalryLogger.start_js(["nYbqa"]); }

__d("dangerouslyBypassDispatchError",[],(function(a,b,c,d,e,f){"use strict";function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];setTimeout(function(){a.apply(null,c)},0)}e.exports=a}),null);
__d("deepCompare",[],(function(a,b,c,d,e,f){"use strict";function g(a,b){if(a===b)return!0;if(!(a instanceof Object)||!(b instanceof Object))return!1;if(a.constructor!==b.constructor)return!1;if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)return!1;var c={},d=0;for(var e=0,f=a.length;e<f;e++){var h=d;for(var i=0,j=b.length;i<j&&h===d;i++){if(c[i])continue;g(a[e],b[i])&&(c[i]=!0,d++)}}return d===a.length}else{h=a;i=b;for(var k in h){if(!Object.prototype.hasOwnProperty.call(h,k))continue;if(!Object.prototype.hasOwnProperty.call(i,k))return!1;if(h[k]===i[k])continue;if(typeof h[k]!=="object")return!1;if(!g(h[k],i[k]))return!1}for(k in i)if(Object.prototype.hasOwnProperty.call(i,k)&&!Object.prototype.hasOwnProperty.call(h,k))return!1}return!0}e.exports=g}),null);
__d("SUIBusinessTheme",["SUIBusinessThemeComponents","SUITheme"],(function(a,b,c,d,e,f){"use strict";a=new(b("SUITheme"))({id:"big",components:b("SUIBusinessThemeComponents")});e.exports=a}),null);
__d("getSUIDropdownButtonUniform.fds",["ix","cssVar","FDSPrivateThemeUtils","React","SUIGlyphIcon.react","asset"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){a=b("FDSPrivateThemeUtils").isGeo(a);return{use:{"default":{chevron:i.jsx(b("SUIGlyphIcon.react"),{srcDefault:a?g("786072"):g("481883"),srcDisabled:g("482773"),style:{marginRight:"-2px"}}),disabled:{background:"#EBEDF0",borderColor:"#DADDE1",color:"#BEC3C9"}},confirm:{chevron:i.jsx(b("SUIGlyphIcon.react"),{srcDefault:g("483254"),srcDisabled:g("483254"),style:{marginRight:"-2px"}}),disabled:{background:"#B0D5FF",borderColor:"#B0D5FF",color:"#FFFFFF"}},special:{chevron:i.jsx(b("SUIGlyphIcon.react"),{srcDefault:g("483254"),srcDisabled:g("483254"),style:{marginRight:"-2px"}}),disabled:{background:"#86DF81",borderColor:"#86DF81",color:"#FFFFFF"}},flat:{chevron:i.jsx(b("SUIGlyphIcon.react"),{srcDefault:a?g("786072"):g("481883"),srcDisabled:g("482773"),style:{marginRight:"-2px"}}),disabled:{background:"transparent",borderColor:"transparent",color:"#BEC3C9"}},flatWhite:{chevron:i.jsx(b("SUIGlyphIcon.react"),{srcDefault:g("483254"),srcDisabled:g("481883"),style:{marginRight:"-2px"}}),disabled:{background:"transparent",borderColor:"transparent",color:"rgba(255, 255, 255, 0.4)"}}},padding:"12px"}}e.exports=a}),null);
__d("getSUIDropdownSelectorOptionGroupUniform.fds",["ix","cssVar","FDSPrivateTypeStyles","React","SUIGlyphIcon.react","asset"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("FDSPrivateTypeStyles").createTypeStyleGetter,j=b("React");function a(a){a=i(a);return{activeBackgroundColor:"#DADDE1",activeColor:"#1C1E21",collapsedIcon:j.jsx(b("SUIGlyphIcon.react"),{srcDefault:g("496752")}),color:"#1C1E21",expandedIcon:j.jsx(b("SUIGlyphIcon.react"),{srcDefault:g("504839")}),highlightedBackgroundColor:"#F5F6F7",highlightedColor:"#1C1E21",typeStyle:a({color:"#1C1E21",fontSize:"12px",fontWeight:"bold"})}}e.exports=a}),null);
__d("getSUIDropdownSelectorOptionUniform.fds",["ix","cssVar","FDSPrivateTypeStyles","React","SUIGlyphIcon.react","asset"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("FDSPrivateTypeStyles").createTypeStyleGetter,j=b("React");function a(a){a=i(a);return{activeBackgroundColor:"#DADDE1",activeColor:"#1C1E21",color:"#1C1E21",descriptionColor:"#606770",descriptionSelectedColor:"#606770",disabledBackgroundColor:"#F5F6F7",disabledColor:"#606770",highlightedBackgroundColor:"#F5F6F7",highlightedColor:"#1C1E21",iconMargin:{left:"0",right:"8px"},padding:{bottom:"6px",left:"32px",right:"24px",top:"6px"},paddingWhenNoValue:{bottom:"6px",left:"12px",right:"24px",top:"6px"},selectedBackgroundColor:"#ECF3FF",selectedColor:"#1C1E21",selectedIcon:j.jsx(b("SUIGlyphIcon.react"),{srcDefault:g("495838"),style:{position:"relative",top:-1}}),selectedIconMarginRight:"8px",selectedTypeStyle:a({color:"#1C1E21",fontSize:"12px",fontWeight:"bold"}),typeStyle:a({color:"#1C1E21",fontSize:"12px",fontWeight:"normal"})}}e.exports=a}),null);
__d("getSUIDropdownSelectorUniform.fds",["cssVar"],(function(a,b,c,d,e,f,g){"use strict";function a(){return{backgroundColor:"#FFFFFF",borderColor:"#DADDE1",boxShadow:"0 0 4px 0 rgba(0, 0, 0, 0.2)"}}e.exports=a}),null);
__d("getSUIErrorUniform.fds",["ix","cssVar","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(){return{error:{borderColor:"#FA383E",icon:i.jsx(b("Image.react"),{src:g("480267")})},warning:{borderColor:"#FFBA00",icon:i.jsx(b("Image.react"),{src:g("480789")})}}}e.exports=a}),null);
__d("SUIDropdownSelectorOptionGroupUniform.fds",["FDSPrivateThemeAtomsClassic","getSUIDropdownSelectorOptionGroupUniform.fds"],(function(a,b,c,d,e,f){"use strict";e.exports=b("getSUIDropdownSelectorOptionGroupUniform.fds")(b("FDSPrivateThemeAtomsClassic"))}),null);
__d("SUIDropdownSelectorOptionUniform.fds",["FDSPrivateThemeAtomsClassic","getSUIDropdownSelectorOptionUniform.fds"],(function(a,b,c,d,e,f){"use strict";e.exports=b("getSUIDropdownSelectorOptionUniform.fds")(b("FDSPrivateThemeAtomsClassic"))}),null);
__d("ZenonAppSpinner.react",["MessengerSpinner.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(){return g.jsx(b("MessengerSpinner.react"),{className:"ek9cmnz0 ao9ssn3j agvmdajv h0tuejlu",color:"blue",size:32})}e.exports=a}),null);
__d("WebSessionExtensionTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WebSessionExtensionLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WebSessionExtensionLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WebSessionExtensionLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setClientTime=function(a){this.$1.client_time=a;return this};c.setReason=function(a){this.$1.reason=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWebsessionID=function(a){this.$1.websession_id=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={client_time:!0,reason:!0,time:!0,websession_id:!0,weight:!0};e.exports=a}),null);
__d("ReactSelectorUtils",["React","deepCompare"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a={processMenuItems:function(a,c,d){d===void 0&&(d=!1);var e;d=g.Children.map(a,function(a){if(a){var d=b("deepCompare")(a.props.value,c);a=g.cloneElement(a,{selected:d});d&&(e=a);return a}});return{items:d,selectedItem:e}},processMultiMenuItems:function(a,b,c){c===void 0&&(c=!1);var d=[];c=a;b&&(c=g.Children.map(a,function(a){if(a){var c=b.some(function(b){return b===a.props.value});a=g.cloneElement(a,{selected:c});c&&d.push(a);return a}}));return{items:c,selectedItems:d}}};e.exports=a}),null);
__d("SUITooltipUniform.work",["cssVar","createBUITypeStyle"],(function(a,b,c,d,e,f,g){"use strict";a={backgroundColor:"#000000",color:"#FFFFFF",showArrow:!0,typeStyle:b("createBUITypeStyle")({color:"#FFFFFF",fontSize:"12px",fontWeight:"normal"})};e.exports=a}),null);
__d("RTLKeys",["Keys","Locale"],(function(a,b,c,d,e,f){var g=null;function h(){g===null&&(g=b("Locale").isRTL());return g}a=b("Keys").RIGHT;c=b("Keys").LEFT;d=babelHelpers.objectWithoutPropertiesLoose(b("Keys"),["RIGHT","LEFT"]);var i=babelHelpers["extends"]({},d,{REAL_RIGHT:a,REAL_LEFT:c,getLeft:function(){return h()?i.REAL_RIGHT:i.REAL_LEFT},getRight:function(){return h()?i.REAL_LEFT:i.REAL_RIGHT}});e.exports=i}),null);
__d("useContentRect",["React","useResizeObserver"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useCallback,h=c.useState;function a(){var a=h(null),c=a[0],d=a[1];a=g(function(a){return d(a)},[]);a=b("useResizeObserver")(a);return[c,a]}e.exports=a}),null);
__d("useDebounced",["React","debounce"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useEffect,h=c.useMemo,i=c.useRef;function a(a,c){c===void 0&&(c=100);var d=i(a);g(function(){d.current=a},[a]);var e=h(function(){return b("debounce")(function(){return d.current.apply(d,arguments)},c)},[c]);g(function(){return e.reset},[e]);return e}e.exports=a}),null);
__d("flatMapArray",[],(function(a,b,c,d,e,f){var g=Array.prototype.push;function a(a,b){var c=[];for(var d=0;d<a.length;d++){var e=b.call(a,a[d],d);if(Array.isArray(e))g.apply(c,e);else if(e!=null)throw new TypeError('flatMapArray: Callback must return an array or null, received "'+e.toString()+'" instead')}return c}e.exports=a}),null);
__d("WebSessionExtender",["WebSession","WebSessionExtensionTypedLogger","clearInterval","gkx","setInterval"],(function(a,b,c,d,e,f){"use strict";var g=2e4,h=new Set(),i=null;a={subscribe:function(a,c){c===void 0&&(c="extender");h.add(a);var d=b("gkx")("1252196");i==null&&(b("WebSession").extend(Date.now()+g+2e3),i=b("setInterval")(function(){b("WebSession").extend(Date.now()+g+2e3),d&&new(b("WebSessionExtensionTypedLogger"))().setClientTime(Date.now()).setWebsessionID(b("WebSession").getId()).setReason(c).log()},g))},unsubscribe:function(a){h["delete"](a);a=h.size;a===0&&i!=null&&(b("clearInterval")(i),i=null)}};e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("sdp-2.9.0",[],(function(a,b,c,d,e,f){"use strict";a={};var g={exports:a};function h(){var a={};a.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)};a.localCName=a.generateIdentifier();a.splitLines=function(a){return a.trim().split("\n").map(function(a){return a.trim()})};a.splitSections=function(a){a=a.split("\nm=");return a.map(function(a,b){return(b>0?"m="+a:a).trim()+"\r\n"})};a.getDescription=function(b){b=a.splitSections(b);return b&&b[0]};a.getMediaSections=function(b){b=a.splitSections(b);b.shift();return b};a.matchPrefix=function(b,c){return a.splitLines(b).filter(function(a){return a.indexOf(c)===0})};a.parseCandidate=function(a){var b;a.indexOf("a=candidate:")===0?b=a.substring(12).split(" "):b=a.substring(10).split(" ");a={foundation:b[0],component:parseInt(b[1],10),protocol:b[2].toLowerCase(),priority:parseInt(b[3],10),ip:b[4],address:b[4],port:parseInt(b[5],10),type:b[7]};for(var c=8;c<b.length;c+=2)switch(b[c]){case"raddr":a.relatedAddress=b[c+1];break;case"rport":a.relatedPort=parseInt(b[c+1],10);break;case"tcptype":a.tcpType=b[c+1];break;case"ufrag":a.ufrag=b[c+1];a.usernameFragment=b[c+1];break;default:a[b[c]]=b[c+1];break}return a};a.writeCandidate=function(a){var b=[];b.push(a.foundation);b.push(a.component);b.push(a.protocol.toUpperCase());b.push(a.priority);b.push(a.address||a.ip);b.push(a.port);var c=a.type;b.push("typ");b.push(c);c!=="host"&&a.relatedAddress&&a.relatedPort&&(b.push("raddr"),b.push(a.relatedAddress),b.push("rport"),b.push(a.relatedPort));a.tcpType&&a.protocol.toLowerCase()==="tcp"&&(b.push("tcptype"),b.push(a.tcpType));(a.usernameFragment||a.ufrag)&&(b.push("ufrag"),b.push(a.usernameFragment||a.ufrag));return"candidate:"+b.join(" ")};a.parseIceOptions=function(a){return a.substr(14).split(" ")};a.parseRtpMap=function(a){a=a.substr(9).split(" ");var b={payloadType:parseInt(a.shift(),10)};a=a[0].split("/");b.name=a[0];b.clockRate=parseInt(a[1],10);b.channels=a.length===3?parseInt(a[2],10):1;b.numChannels=b.channels;return b};a.writeRtpMap=function(a){var b=a.payloadType;a.preferredPayloadType!==void 0&&(b=a.preferredPayloadType);var c=a.channels||a.numChannels||1;return"a=rtpmap:"+b+" "+a.name+"/"+a.clockRate+(c!==1?"/"+c:"")+"\r\n"};a.parseExtmap=function(a){a=a.substr(9).split(" ");return{id:parseInt(a[0],10),direction:a[0].indexOf("/")>0?a[0].split("/")[1]:"sendrecv",uri:a[1]}};a.writeExtmap=function(a){return"a=extmap:"+(a.id||a.preferredId)+(a.direction&&a.direction!=="sendrecv"?"/"+a.direction:"")+" "+a.uri+"\r\n"};a.parseFmtp=function(a){var b={},c;a=a.substr(a.indexOf(" ")+1).split(";");for(var d=0;d<a.length;d++)c=a[d].trim().split("="),b[c[0].trim()]=c[1];return b};a.writeFmtp=function(a){var b="",c=a.payloadType;a.preferredPayloadType!==void 0&&(c=a.preferredPayloadType);if(a.parameters&&Object.keys(a.parameters).length){var d=[];Object.keys(a.parameters).forEach(function(b){a.parameters[b]?d.push(b+"="+a.parameters[b]):d.push(b)});b+="a=fmtp:"+c+" "+d.join(";")+"\r\n"}return b};a.parseRtcpFb=function(a){a=a.substr(a.indexOf(" ")+1).split(" ");return{type:a.shift(),parameter:a.join(" ")}};a.writeRtcpFb=function(a){var b="",c=a.payloadType;a.preferredPayloadType!==void 0&&(c=a.preferredPayloadType);a.rtcpFeedback&&a.rtcpFeedback.length&&a.rtcpFeedback.forEach(function(a){b+="a=rtcp-fb:"+c+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+"\r\n"});return b};a.parseSsrcMedia=function(a){var b=a.indexOf(" "),c={ssrc:parseInt(a.substr(7,b-7),10)},d=a.indexOf(":",b);d>-1?(c.attribute=a.substr(b+1,d-b-1),c.value=a.substr(d+1)):c.attribute=a.substr(b+1);return c};a.parseSsrcGroup=function(a){a=a.substr(13).split(" ");return{semantics:a.shift(),ssrcs:a.map(function(a){return parseInt(a,10)})}};a.getMid=function(b){b=a.matchPrefix(b,"a=mid:")[0];if(b)return b.substr(6)};a.parseFingerprint=function(a){a=a.substr(14).split(" ");return{algorithm:a[0].toLowerCase(),value:a[1]}};a.getDtlsParameters=function(b,c){b=a.matchPrefix(b+c,"a=fingerprint:");return{role:"auto",fingerprints:b.map(a.parseFingerprint)}};a.writeDtlsParameters=function(a,b){var c="a=setup:"+b+"\r\n";a.fingerprints.forEach(function(a){c+="a=fingerprint:"+a.algorithm+" "+a.value+"\r\n"});return c};a.getIceParameters=function(b,c){b=a.splitLines(b);b=b.concat(a.splitLines(c));c={usernameFragment:b.filter(function(a){return a.indexOf("a=ice-ufrag:")===0})[0].substr(12),password:b.filter(function(a){return a.indexOf("a=ice-pwd:")===0})[0].substr(10)};return c};a.writeIceParameters=function(a){return"a=ice-ufrag:"+a.usernameFragment+"\r\na=ice-pwd:"+a.password+"\r\n"};a.parseRtpParameters=function(b){var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},d=a.splitLines(b);d=d[0].split(" ");for(var e=3;e<d.length;e++){var f=d[e],g=a.matchPrefix(b,"a=rtpmap:"+f+" ")[0];if(g){g=a.parseRtpMap(g);var h=a.matchPrefix(b,"a=fmtp:"+f+" ");g.parameters=h.length?a.parseFmtp(h[0]):{};g.rtcpFeedback=a.matchPrefix(b,"a=rtcp-fb:"+f+" ").map(a.parseRtcpFb);c.codecs.push(g);switch(g.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(g.name.toUpperCase());break;default:break}}}a.matchPrefix(b,"a=extmap:").forEach(function(b){c.headerExtensions.push(a.parseExtmap(b))});return c};a.writeRtpDescription=function(b,c){var d="";d+="m="+b+" ";d+=c.codecs.length>0?"9":"0";d+=" UDP/TLS/RTP/SAVPF ";d+=c.codecs.map(function(a){return a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType}).join(" ")+"\r\n";d+="c=IN IP4 0.0.0.0\r\n";d+="a=rtcp:9 IN IP4 0.0.0.0\r\n";c.codecs.forEach(function(b){d+=a.writeRtpMap(b),d+=a.writeFmtp(b),d+=a.writeRtcpFb(b)});var e=0;c.codecs.forEach(function(a){a.maxptime>e&&(e=a.maxptime)});e>0&&(d+="a=maxptime:"+e+"\r\n");d+="a=rtcp-mux\r\n";c.headerExtensions&&c.headerExtensions.forEach(function(b){d+=a.writeExtmap(b)});return d};a.parseRtpEncodingParameters=function(b){var c=[],d=a.parseRtpParameters(b),e=d.fecMechanisms.indexOf("RED")!==-1,f=d.fecMechanisms.indexOf("ULPFEC")!==-1,g=a.matchPrefix(b,"a=ssrc:").map(function(b){return a.parseSsrcMedia(b)}).filter(function(a){return a.attribute==="cname"}),h=g.length>0&&g[0].ssrc,i;g=a.matchPrefix(b,"a=ssrc-group:FID").map(function(a){a=a.substr(17).split(" ");return a.map(function(a){return parseInt(a,10)})});g.length>0&&g[0].length>1&&g[0][0]===h&&(i=g[0][1]);d.codecs.forEach(function(a){if(a.name.toUpperCase()==="RTX"&&a.parameters.apt){a={ssrc:h,codecPayloadType:parseInt(a.parameters.apt,10)};h&&i&&(a.rtx={ssrc:i});c.push(a);e&&(a=JSON.parse(JSON.stringify(a)),a.fec={ssrc:h,mechanism:f?"red+ulpfec":"red"},c.push(a))}});c.length===0&&h&&c.push({ssrc:h});var j=a.matchPrefix(b,"b=");j.length&&(j[0].indexOf("b=TIAS:")===0?j=parseInt(j[0].substr(7),10):j[0].indexOf("b=AS:")===0?j=parseInt(j[0].substr(5),10)*1e3*.95-50*40*8:j=void 0,c.forEach(function(a){a.maxBitrate=j}));return c};a.parseRtcpParameters=function(b){var c={},d=a.matchPrefix(b,"a=ssrc:").map(function(b){return a.parseSsrcMedia(b)}).filter(function(a){return a.attribute==="cname"})[0];d&&(c.cname=d.value,c.ssrc=d.ssrc);d=a.matchPrefix(b,"a=rtcp-rsize");c.reducedSize=d.length>0;c.compound=d.length===0;d=a.matchPrefix(b,"a=rtcp-mux");c.mux=d.length>0;return c};a.parseMsid=function(b){var c=a.matchPrefix(b,"a=msid:");if(c.length===1){c=c[0].substr(7).split(" ");return{stream:c[0],track:c[1]}}b=a.matchPrefix(b,"a=ssrc:").map(function(b){return a.parseSsrcMedia(b)}).filter(function(a){return a.attribute==="msid"});if(b.length>0){c=b[0].value.split(" ");return{stream:c[0],track:c[1]}}};a.generateSessionId=function(){return Math.random().toString().substr(2,21)};a.writeSessionBoilerplate=function(b,c,d){c=c!==void 0?c:2;b?b=b:b=a.generateSessionId();d=d||"thisisadapterortc";return"v=0\r\no="+d+" "+b+" "+c+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"};a.writeMediaSection=function(b,c,d,e){c=a.writeRtpDescription(b.kind,c);c+=a.writeIceParameters(b.iceGatherer.getLocalParameters());c+=a.writeDtlsParameters(b.dtlsTransport.getLocalParameters(),d==="offer"?"actpass":"active");c+="a=mid:"+b.mid+"\r\n";b.direction?c+="a="+b.direction+"\r\n":b.rtpSender&&b.rtpReceiver?c+="a=sendrecv\r\n":b.rtpSender?c+="a=sendonly\r\n":b.rtpReceiver?c+="a=recvonly\r\n":c+="a=inactive\r\n";if(b.rtpSender){d="msid:"+e.id+" "+b.rtpSender.track.id+"\r\n";c+="a="+d;c+="a=ssrc:"+b.sendEncodingParameters[0].ssrc+" "+d;b.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+b.sendEncodingParameters[0].rtx.ssrc+" "+d,c+="a=ssrc-group:FID "+b.sendEncodingParameters[0].ssrc+" "+b.sendEncodingParameters[0].rtx.ssrc+"\r\n")}c+="a=ssrc:"+b.sendEncodingParameters[0].ssrc+" cname:"+a.localCName+"\r\n";b.rtpSender&&b.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+b.sendEncodingParameters[0].rtx.ssrc+" cname:"+a.localCName+"\r\n");return c};a.getDirection=function(b,c){b=a.splitLines(b);for(var d=0;d<b.length;d++)switch(b[d]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return b[d].substr(2);default:}return c?a.getDirection(c):"sendrecv"};a.getKind=function(b){b=a.splitLines(b);b=b[0].split(" ");return b[0].substr(2)};a.isRejected=function(a){return a.split(" ",2)[1]==="0"};a.parseMLine=function(b){b=a.splitLines(b);b=b[0].substr(2).split(" ");return{kind:b[0],port:parseInt(b[1],10),protocol:b[2],fmt:b.slice(3).join(" ")}};a.parseOLine=function(b){b=a.matchPrefix(b,"o=")[0];b=b.substr(2).split(" ");return{username:b[0],sessionId:b[1],sessionVersion:parseInt(b[2],10),netType:b[3],addressType:b[4],address:b[5]}};a.isValidSDP=function(b){if(typeof b!=="string"||b.length===0)return!1;b=a.splitLines(b);for(var c=0;c<b.length;c++)if(b[c].length<2||b[c].charAt(1)!=="=")return!1;return!0};typeof g==="object"&&(g.exports=a)}var i=!1,j=function(){i||(i=!0,h());return g.exports};b=function(a){switch(a){case void 0:return j()}};e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/oyybAxN87_l/
 */
__d("rtcpeerconnection-shim-1.2.15",["sdp-2.9.0"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("sdp-2.9.0"));c={};var h={exports:c};function i(){var a=g();function b(a){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[a.type]||a.type}function c(b,c,d,e,f){c=a.writeRtpDescription(b.kind,c);c+=a.writeIceParameters(b.iceGatherer.getLocalParameters());c+=a.writeDtlsParameters(b.dtlsTransport.getLocalParameters(),d==="offer"?"actpass":f||"active");c+="a=mid:"+b.mid+"\r\n";b.rtpSender&&b.rtpReceiver?c+="a=sendrecv\r\n":b.rtpSender?c+="a=sendonly\r\n":b.rtpReceiver?c+="a=recvonly\r\n":c+="a=inactive\r\n";if(b.rtpSender){d=b.rtpSender._initialTrackId||b.rtpSender.track.id;b.rtpSender._initialTrackId=d;f="msid:"+(e?e.id:"-")+" "+d+"\r\n";c+="a="+f;c+="a=ssrc:"+b.sendEncodingParameters[0].ssrc+" "+f;b.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+b.sendEncodingParameters[0].rtx.ssrc+" "+f,c+="a=ssrc-group:FID "+b.sendEncodingParameters[0].ssrc+" "+b.sendEncodingParameters[0].rtx.ssrc+"\r\n")}c+="a=ssrc:"+b.sendEncodingParameters[0].ssrc+" cname:"+a.localCName+"\r\n";b.rtpSender&&b.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+b.sendEncodingParameters[0].rtx.ssrc+" cname:"+a.localCName+"\r\n");return c}function d(a,b){var c=!1;a=JSON.parse(JSON.stringify(a));return a.filter(function(a){if(a&&(a.urls||a.url)){var d=a.urls||a.url;a.url&&!a.urls;var e=typeof d==="string";e&&(d=[d]);d=d.filter(function(a){var d=a.indexOf("turn:")===0&&a.indexOf("transport=udp")!==-1&&a.indexOf("turn:[")===-1&&!c;if(d){c=!0;return!0}return a.indexOf("stun:")===0&&b>=14393&&a.indexOf("?transport=udp")===-1});delete a.url;a.urls=e?d[0]:d;return!!d.length}})}function e(a,b){var c={codecs:[],headerExtensions:[],fecMechanisms:[]},d=function(a,b){a=parseInt(a,10);for(var c=0;c<b.length;c++)if(b[c].payloadType===a||b[c].preferredPayloadType===a)return b[c]},e=function(a,b,c,e){a=d(a.parameters.apt,c);c=d(b.parameters.apt,e);return a&&c&&a.name.toLowerCase()===c.name.toLowerCase()};a.codecs.forEach(function(d){for(var f=0;f<b.codecs.length;f++){var g=b.codecs[f];if(d.name.toLowerCase()===g.name.toLowerCase()&&d.clockRate===g.clockRate){if(d.name.toLowerCase()==="rtx"&&d.parameters&&g.parameters.apt&&!e(d,g,a.codecs,b.codecs))continue;g=JSON.parse(JSON.stringify(g));g.numChannels=Math.min(d.numChannels,g.numChannels);c.codecs.push(g);g.rtcpFeedback=g.rtcpFeedback.filter(function(a){for(var b=0;b<d.rtcpFeedback.length;b++)if(d.rtcpFeedback[b].type===a.type&&d.rtcpFeedback[b].parameter===a.parameter)return!0;return!1});break}}});a.headerExtensions.forEach(function(a){for(var d=0;d<b.headerExtensions.length;d++){var e=b.headerExtensions[d];if(a.uri===e.uri){c.headerExtensions.push(e);break}}});return c}function f(a,b,c){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[b][a].indexOf(c)!==-1}function i(a,b){var c=a.getRemoteCandidates().find(function(a){return b.foundation===a.foundation&&b.ip===a.ip&&b.port===a.port&&b.priority===a.priority&&b.protocol===a.protocol&&b.type===a.type});c||a.addRemoteCandidate(b);return!c}function j(a,b){b=new Error(b);b.name=a;b.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[a];return b}h.exports=function(g,h){function k(a,b){b.addTrack(a),b.dispatchEvent(new g.MediaStreamTrackEvent("addtrack",{track:a}))}function l(a,b){b.removeTrack(a),b.dispatchEvent(new g.MediaStreamTrackEvent("removetrack",{track:a}))}function m(a,b,c,d){var e=new Event("track");e.track=b;e.receiver=c;e.transceiver={receiver:c};e.streams=d;g.setTimeout(function(){a._dispatchEvent("track",e)})}var n=function(b){var c=this,e=document.createDocumentFragment();["addEventListener","removeEventListener","dispatchEvent"].forEach(function(a){c[a]=e[a].bind(e)});this.canTrickleIceCandidates=null;this.needNegotiation=!1;this.localStreams=[];this.remoteStreams=[];this._localDescription=null;this._remoteDescription=null;this.signalingState="stable";this.iceConnectionState="new";this.connectionState="new";this.iceGatheringState="new";b=JSON.parse(JSON.stringify(b||{}));this.usingBundle=b.bundlePolicy==="max-bundle";if(b.rtcpMuxPolicy==="negotiate")throw j("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");else b.rtcpMuxPolicy||(b.rtcpMuxPolicy="require");switch(b.iceTransportPolicy){case"all":case"relay":break;default:b.iceTransportPolicy="all";break}switch(b.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:b.bundlePolicy="balanced";break}b.iceServers=d(b.iceServers||[],h);this._iceGatherers=[];if(b.iceCandidatePoolSize)for(var f=b.iceCandidatePoolSize;f>0;f--)this._iceGatherers.push(new g.RTCIceGatherer({iceServers:b.iceServers,gatherPolicy:b.iceTransportPolicy}));else b.iceCandidatePoolSize=0;this._config=b;this.transceivers=[];this._sdpSessionId=a.generateSessionId();this._sdpSessionVersion=0;this._dtlsRole=void 0;this._isClosed=!1};Object.defineProperty(n.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}});Object.defineProperty(n.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}});n.prototype.onicecandidate=null;n.prototype.onaddstream=null;n.prototype.ontrack=null;n.prototype.onremovestream=null;n.prototype.onsignalingstatechange=null;n.prototype.oniceconnectionstatechange=null;n.prototype.onconnectionstatechange=null;n.prototype.onicegatheringstatechange=null;n.prototype.onnegotiationneeded=null;n.prototype.ondatachannel=null;n.prototype._dispatchEvent=function(a,b){if(this._isClosed)return;this.dispatchEvent(b);typeof this["on"+a]==="function"&&this["on"+a](b)};n.prototype._emitGatheringStateChange=function(){var a=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",a)};n.prototype.getConfiguration=function(){return this._config};n.prototype.getLocalStreams=function(){return this.localStreams};n.prototype.getRemoteStreams=function(){return this.remoteStreams};n.prototype._createTransceiver=function(a,b){var c=this.transceivers.length>0;a={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:a,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&c)a.iceTransport=this.transceivers[0].iceTransport,a.dtlsTransport=this.transceivers[0].dtlsTransport;else{c=this._createIceAndDtlsTransports();a.iceTransport=c.iceTransport;a.dtlsTransport=c.dtlsTransport}b||this.transceivers.push(a);return a};n.prototype.addTrack=function(a,b){if(this._isClosed)throw j("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var c=this.transceivers.find(function(b){return b.track===a});if(c)throw j("InvalidAccessError","Track already exists.");var d;for(var c=0;c<this.transceivers.length;c++)!this.transceivers[c].track&&this.transceivers[c].kind===a.kind&&(d=this.transceivers[c]);d||(d=this._createTransceiver(a.kind));this._maybeFireNegotiationNeeded();this.localStreams.indexOf(b)===-1&&this.localStreams.push(b);d.track=a;d.stream=b;d.rtpSender=new g.RTCRtpSender(a,d.dtlsTransport);return d.rtpSender};n.prototype.addStream=function(a){var b=this;if(h>=15025)a.getTracks().forEach(function(c){b.addTrack(c,a)});else{var c=a.clone();a.getTracks().forEach(function(a,b){var d=c.getTracks()[b];a.addEventListener("enabled",function(a){d.enabled=a.enabled})});c.getTracks().forEach(function(a){b.addTrack(a,c)})}};n.prototype.removeTrack=function(a){if(this._isClosed)throw j("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(a instanceof g.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var b=this.transceivers.find(function(b){return b.rtpSender===a});if(!b)throw j("InvalidAccessError","Sender was not created by this connection.");var c=b.stream;b.rtpSender.stop();b.rtpSender=null;b.track=null;b.stream=null;b=this.transceivers.map(function(a){return a.stream});b.indexOf(c)===-1&&this.localStreams.indexOf(c)>-1&&this.localStreams.splice(this.localStreams.indexOf(c),1);this._maybeFireNegotiationNeeded()};n.prototype.removeStream=function(a){var b=this;a.getTracks().forEach(function(a){var c=b.getSenders().find(function(b){return b.track===a});c&&b.removeTrack(c)})};n.prototype.getSenders=function(){return this.transceivers.filter(function(a){return!!a.rtpSender}).map(function(a){return a.rtpSender})};n.prototype.getReceivers=function(){return this.transceivers.filter(function(a){return!!a.rtpReceiver}).map(function(a){return a.rtpReceiver})};n.prototype._createIceGatherer=function(a,b){var c=this;if(b&&a>0)return this.transceivers[0].iceGatherer;else if(this._iceGatherers.length)return this._iceGatherers.shift();var d=new g.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});Object.defineProperty(d,"state",{value:"new",writable:!0});this.transceivers[a].bufferedCandidateEvents=[];this.transceivers[a].bufferCandidates=function(b){var e=!b.candidate||Object.keys(b.candidate).length===0;d.state=e?"completed":"gathering";c.transceivers[a].bufferedCandidateEvents!==null&&c.transceivers[a].bufferedCandidateEvents.push(b)};d.addEventListener("localcandidate",this.transceivers[a].bufferCandidates);return d};n.prototype._gather=function(b,c){var d=this,e=this.transceivers[c].iceGatherer;if(e.onlocalcandidate)return;var f=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null;e.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates);e.onlocalcandidate=function(f){if(d.usingBundle&&c>0)return;var g=new Event("icecandidate");g.candidate={sdpMid:b,sdpMLineIndex:c};f=f.candidate;var h=!f||Object.keys(f).length===0;if(h)(e.state==="new"||e.state==="gathering")&&(e.state="completed");else{e.state==="new"&&(e.state="gathering");f.component=1;f.ufrag=e.getLocalParameters().usernameFragment;f=a.writeCandidate(f);g.candidate=Object.assign(g.candidate,a.parseCandidate(f));g.candidate.candidate=f;g.candidate.toJSON=function(){return{candidate:g.candidate.candidate,sdpMid:g.candidate.sdpMid,sdpMLineIndex:g.candidate.sdpMLineIndex,usernameFragment:g.candidate.usernameFragment}}}f=a.getMediaSections(d._localDescription.sdp);!h?f[g.candidate.sdpMLineIndex]+="a="+g.candidate.candidate+"\r\n":f[g.candidate.sdpMLineIndex]+="a=end-of-candidates\r\n";d._localDescription.sdp=a.getDescription(d._localDescription.sdp)+f.join("");f=d.transceivers.every(function(a){return a.iceGatherer&&a.iceGatherer.state==="completed"});d.iceGatheringState!=="gathering"&&(d.iceGatheringState="gathering",d._emitGatheringStateChange());h||d._dispatchEvent("icecandidate",g);f&&(d._dispatchEvent("icecandidate",new Event("icecandidate")),d.iceGatheringState="complete",d._emitGatheringStateChange())};g.setTimeout(function(){f.forEach(function(a){e.onlocalcandidate(a)})},0)};n.prototype._createIceAndDtlsTransports=function(){var a=this,b=new g.RTCIceTransport(null);b.onicestatechange=function(){a._updateIceConnectionState(),a._updateConnectionState()};var c=new g.RTCDtlsTransport(b);c.ondtlsstatechange=function(){a._updateConnectionState()};c.onerror=function(){Object.defineProperty(c,"state",{value:"failed",writable:!0}),a._updateConnectionState()};return{iceTransport:b,dtlsTransport:c}};n.prototype._disposeIceAndDtlsTransports=function(a){var b=this.transceivers[a].iceGatherer;b&&(delete b.onlocalcandidate,delete this.transceivers[a].iceGatherer);b=this.transceivers[a].iceTransport;b&&(delete b.onicestatechange,delete this.transceivers[a].iceTransport);b=this.transceivers[a].dtlsTransport;b&&(delete b.ondtlsstatechange,delete b.onerror,delete this.transceivers[a].dtlsTransport)};n.prototype._transceive=function(b,c,d){var f=e(b.localCapabilities,b.remoteCapabilities);c&&b.rtpSender&&(f.encodings=b.sendEncodingParameters,f.rtcp={cname:a.localCName,compound:b.rtcpParameters.compound},b.recvEncodingParameters.length&&(f.rtcp.ssrc=b.recvEncodingParameters[0].ssrc),b.rtpSender.send(f));d&&b.rtpReceiver&&f.codecs.length>0&&(b.kind==="video"&&b.recvEncodingParameters&&h<15019&&b.recvEncodingParameters.forEach(function(a){delete a.rtx}),b.recvEncodingParameters.length?f.encodings=b.recvEncodingParameters:f.encodings=[{}],f.rtcp={compound:b.rtcpParameters.compound},b.rtcpParameters.cname&&(f.rtcp.cname=b.rtcpParameters.cname),b.sendEncodingParameters.length&&(f.rtcp.ssrc=b.sendEncodingParameters[0].ssrc),b.rtpReceiver.receive(f))};n.prototype.setLocalDescription=function(b){var c=this;if(["offer","answer"].indexOf(b.type)===-1)return Promise.reject(j("TypeError",'Unsupported type "'+b.type+'"'));if(!f("setLocalDescription",b.type,c.signalingState)||c._isClosed)return Promise.reject(j("InvalidStateError","Can not set local "+b.type+" in state "+c.signalingState));var d,g;if(b.type==="offer")d=a.splitSections(b.sdp),g=d.shift(),d.forEach(function(b,d){b=a.parseRtpParameters(b);c.transceivers[d].localCapabilities=b}),c.transceivers.forEach(function(a,b){c._gather(a.mid,b)});else if(b.type==="answer"){d=a.splitSections(c._remoteDescription.sdp);g=d.shift();var h=a.matchPrefix(g,"a=ice-lite").length>0;d.forEach(function(b,d){var f=c.transceivers[d],i=f.iceGatherer,j=f.iceTransport,k=f.dtlsTransport,l=f.localCapabilities,m=f.remoteCapabilities,n=a.isRejected(b)&&a.matchPrefix(b,"a=bundle-only").length===0;if(!n&&!f.rejected){n=a.getIceParameters(b,g);b=a.getDtlsParameters(b,g);h&&(b.role="server");(!c.usingBundle||d===0)&&(c._gather(f.mid,d),j.state==="new"&&j.start(i,n,h?"controlling":"controlled"),k.state==="new"&&k.start(b));d=e(l,m);c._transceive(f,d.codecs.length>0,!1)}})}c._localDescription={type:b.type,sdp:b.sdp};b.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable");return Promise.resolve()};n.prototype.setRemoteDescription=function(b){var c=this;if(["offer","answer"].indexOf(b.type)===-1)return Promise.reject(j("TypeError",'Unsupported type "'+b.type+'"'));if(!f("setRemoteDescription",b.type,c.signalingState)||c._isClosed)return Promise.reject(j("InvalidStateError","Can not set remote "+b.type+" in state "+c.signalingState));var d={};c.remoteStreams.forEach(function(a){d[a.id]=a});var n=[],o=a.splitSections(b.sdp),p=o.shift(),q=a.matchPrefix(p,"a=ice-lite").length>0,r=a.matchPrefix(p,"a=group:BUNDLE ").length>0;c.usingBundle=r;var s=a.matchPrefix(p,"a=ice-options:")[0];s?c.canTrickleIceCandidates=s.substr(14).split(" ").indexOf("trickle")>=0:c.canTrickleIceCandidates=!1;o.forEach(function(f,j){var m=a.splitLines(f),o=a.getKind(f),s=a.isRejected(f)&&a.matchPrefix(f,"a=bundle-only").length===0;m=m[0].substr(2).split(" ")[2];var t=a.getDirection(f,p),u=a.parseMsid(f),v=a.getMid(f)||a.generateIdentifier();if(s||o==="application"&&(m==="DTLS/SCTP"||m==="UDP/DTLS/SCTP")){c.transceivers[j]={mid:v,kind:o,protocol:m,rejected:!0};return}!s&&c.transceivers[j]&&c.transceivers[j].rejected&&(c.transceivers[j]=c._createTransceiver(o,!0));var w,x,y,z,A;m=a.parseRtpParameters(f);var B,C;s||(B=a.getIceParameters(f,p),C=a.getDtlsParameters(f,p),C.role="client");A=a.parseRtpEncodingParameters(f);var D=a.parseRtcpParameters(f),E=a.matchPrefix(f,"a=end-of-candidates",p).length>0;f=a.matchPrefix(f,"a=candidate:").map(function(b){return a.parseCandidate(b)}).filter(function(a){return a.component===1});(b.type==="offer"||b.type==="answer")&&!s&&r&&j>0&&c.transceivers[j]&&(c._disposeIceAndDtlsTransports(j),c.transceivers[j].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[j].iceTransport=c.transceivers[0].iceTransport,c.transceivers[j].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[j].rtpSender&&c.transceivers[j].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[j].rtpReceiver&&c.transceivers[j].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport));if(b.type==="offer"&&!s){w=c.transceivers[j]||c._createTransceiver(o);w.mid=v;w.iceGatherer||(w.iceGatherer=c._createIceGatherer(j,r));f.length&&w.iceTransport.state==="new"&&(E&&(!r||j===0)?w.iceTransport.setRemoteCandidates(f):f.forEach(function(a){i(w.iceTransport,a)}));v=g.RTCRtpReceiver.getCapabilities(o);h<15019&&(v.codecs=v.codecs.filter(function(a){return a.name!=="rtx"}));z=w.sendEncodingParameters||[{ssrc:(2*j+2)*1001}];var F=!1;if(t==="sendrecv"||t==="sendonly"){F=!w.rtpReceiver;y=w.rtpReceiver||new g.RTCRtpReceiver(w.dtlsTransport,o);if(F){var G;o=y.track;u&&u.stream==="-"||(u?(d[u.stream]||(d[u.stream]=new g.MediaStream(),Object.defineProperty(d[u.stream],"id",{get:function(){return u.stream}})),Object.defineProperty(o,"id",{get:function(){return u.track}}),G=d[u.stream]):(d["default"]||(d["default"]=new g.MediaStream()),G=d["default"]));G&&(k(o,G),w.associatedRemoteMediaStreams.push(G));n.push([o,y,G])}}else w.rtpReceiver&&w.rtpReceiver.track&&(w.associatedRemoteMediaStreams.forEach(function(a){var b=a.getTracks().find(function(a){return a.id===w.rtpReceiver.track.id});b&&l(b,a)}),w.associatedRemoteMediaStreams=[]);w.localCapabilities=v;w.remoteCapabilities=m;w.rtpReceiver=y;w.rtcpParameters=D;w.sendEncodingParameters=z;w.recvEncodingParameters=A;c._transceive(c.transceivers[j],!1,F)}else if(b.type==="answer"&&!s){w=c.transceivers[j];F=w.iceGatherer;s=w.iceTransport;x=w.dtlsTransport;y=w.rtpReceiver;z=w.sendEncodingParameters;v=w.localCapabilities;c.transceivers[j].recvEncodingParameters=A;c.transceivers[j].remoteCapabilities=m;c.transceivers[j].rtcpParameters=D;f.length&&s.state==="new"&&((q||E)&&(!r||j===0)?s.setRemoteCandidates(f):f.forEach(function(a){i(w.iceTransport,a)}));(!r||j===0)&&(s.state==="new"&&s.start(F,B,"controlling"),x.state==="new"&&x.start(C));z=e(w.localCapabilities,w.remoteCapabilities);v=z.codecs.filter(function(a){return a.name.toLowerCase()==="rtx"}).length;!v&&w.sendEncodingParameters[0].rtx&&delete w.sendEncodingParameters[0].rtx;c._transceive(w,t==="sendrecv"||t==="recvonly",t==="sendrecv"||t==="sendonly");y&&(t==="sendrecv"||t==="sendonly")?(o=y.track,u?(d[u.stream]||(d[u.stream]=new g.MediaStream()),k(o,d[u.stream]),n.push([o,y,d[u.stream]])):(d["default"]||(d["default"]=new g.MediaStream()),k(o,d["default"]),n.push([o,y,d["default"]]))):delete w.rtpReceiver}});c._dtlsRole===void 0&&(c._dtlsRole=b.type==="offer"?"active":"passive");c._remoteDescription={type:b.type,sdp:b.sdp};b.type==="offer"?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable");Object.keys(d).forEach(function(a){var b=d[a];if(b.getTracks().length){if(c.remoteStreams.indexOf(b)===-1){c.remoteStreams.push(b);var e=new Event("addstream");e.stream=b;g.setTimeout(function(){c._dispatchEvent("addstream",e)})}n.forEach(function(a){var d=a[0],e=a[1];if(b.id!==a[2].id)return;m(c,d,e,[b])})}});n.forEach(function(a){if(a[2])return;m(c,a[0],a[1],[])});g.setTimeout(function(){if(!(c&&c.transceivers))return;c.transceivers.forEach(function(a){a.iceTransport&&a.iceTransport.state==="new"&&a.iceTransport.getRemoteCandidates().length>0&&a.iceTransport.addRemoteCandidate({})})},4e3);return Promise.resolve()};n.prototype.close=function(){this.transceivers.forEach(function(a){a.iceTransport&&a.iceTransport.stop(),a.dtlsTransport&&a.dtlsTransport.stop(),a.rtpSender&&a.rtpSender.stop(),a.rtpReceiver&&a.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")};n.prototype._updateSignalingState=function(a){this.signalingState=a;a=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",a)};n.prototype._maybeFireNegotiationNeeded=function(){var a=this;if(this.signalingState!=="stable"||this.needNegotiation===!0)return;this.needNegotiation=!0;g.setTimeout(function(){if(a.needNegotiation){a.needNegotiation=!1;var b=new Event("negotiationneeded");a._dispatchEvent("negotiationneeded",b)}},0)};n.prototype._updateIceConnectionState=function(){var a,b={"new":0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(a){a.iceTransport&&!a.rejected&&b[a.iceTransport.state]++});a="new";b.failed>0?a="failed":b.checking>0?a="checking":b.disconnected>0?a="disconnected":b["new"]>0?a="new":b.connected>0?a="connected":b.completed>0&&(a="completed");if(a!==this.iceConnectionState){this.iceConnectionState=a;a=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",a)}};n.prototype._updateConnectionState=function(){var a,b={"new":0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(a){a.iceTransport&&a.dtlsTransport&&!a.rejected&&(b[a.iceTransport.state]++,b[a.dtlsTransport.state]++)});b.connected+=b.completed;a="new";b.failed>0?a="failed":b.connecting>0?a="connecting":b.disconnected>0?a="disconnected":b["new"]>0?a="new":b.connected>0&&(a="connected");if(a!==this.connectionState){this.connectionState=a;a=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",a)}};n.prototype.createOffer=function(){var b=this;if(b._isClosed)return Promise.reject(j("InvalidStateError","Can not call createOffer after close"));var d=b.transceivers.filter(function(a){return a.kind==="audio"}).length,e=b.transceivers.filter(function(a){return a.kind==="video"}).length,f=arguments[0];if(f){if(f.mandatory||f.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");f.offerToReceiveAudio!==void 0&&(f.offerToReceiveAudio===!0?d=1:f.offerToReceiveAudio===!1?d=0:d=f.offerToReceiveAudio);f.offerToReceiveVideo!==void 0&&(f.offerToReceiveVideo===!0?e=1:f.offerToReceiveVideo===!1?e=0:e=f.offerToReceiveVideo)}b.transceivers.forEach(function(a){a.kind==="audio"?(d--,d<0&&(a.wantReceive=!1)):a.kind==="video"&&(e--,e<0&&(a.wantReceive=!1))});while(d>0||e>0)d>0&&(b._createTransceiver("audio"),d--),e>0&&(b._createTransceiver("video"),e--);var i=a.writeSessionBoilerplate(b._sdpSessionId,b._sdpSessionVersion++);b.transceivers.forEach(function(c,d){var e=c.track,f=c.kind,i=c.mid||a.generateIdentifier();c.mid=i;c.iceGatherer||(c.iceGatherer=b._createIceGatherer(d,b.usingBundle));i=g.RTCRtpSender.getCapabilities(f);h<15019&&(i.codecs=i.codecs.filter(function(a){return a.name!=="rtx"}));i.codecs.forEach(function(a){a.name==="H264"&&a.parameters["level-asymmetry-allowed"]===void 0&&(a.parameters["level-asymmetry-allowed"]="1"),c.remoteCapabilities&&c.remoteCapabilities.codecs&&c.remoteCapabilities.codecs.forEach(function(b){a.name.toLowerCase()===b.name.toLowerCase()&&a.clockRate===b.clockRate&&(a.preferredPayloadType=b.payloadType)})});i.headerExtensions.forEach(function(a){var b=c.remoteCapabilities&&c.remoteCapabilities.headerExtensions||[];b.forEach(function(b){a.uri===b.uri&&(a.id=b.id)})});d=c.sendEncodingParameters||[{ssrc:(2*d+1)*1001}];e&&(h>=15019&&f==="video"&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}));c.wantReceive&&(c.rtpReceiver=new g.RTCRtpReceiver(c.dtlsTransport,f));c.localCapabilities=i;c.sendEncodingParameters=d});b._config.bundlePolicy!=="max-compat"&&(i+="a=group:BUNDLE "+b.transceivers.map(function(a){return a.mid}).join(" ")+"\r\n");i+="a=ice-options:trickle\r\n";b.transceivers.forEach(function(d,e){i+=c(d,d.localCapabilities,"offer",d.stream,b._dtlsRole),i+="a=rtcp-rsize\r\n",d.iceGatherer&&b.iceGatheringState!=="new"&&(e===0||!b.usingBundle)&&(d.iceGatherer.getLocalCandidates().forEach(function(b){b.component=1,i+="a="+a.writeCandidate(b)+"\r\n"}),d.iceGatherer.state==="completed"&&(i+="a=end-of-candidates\r\n"))});var k=new g.RTCSessionDescription({type:"offer",sdp:i});return Promise.resolve(k)};n.prototype.createAnswer=function(){var b=this;if(b._isClosed)return Promise.reject(j("InvalidStateError","Can not call createAnswer after close"));if(!(b.signalingState==="have-remote-offer"||b.signalingState==="have-local-pranswer"))return Promise.reject(j("InvalidStateError","Can not call createAnswer in signalingState "+b.signalingState));var d=a.writeSessionBoilerplate(b._sdpSessionId,b._sdpSessionVersion++);b.usingBundle&&(d+="a=group:BUNDLE "+b.transceivers.map(function(a){return a.mid}).join(" ")+"\r\n");d+="a=ice-options:trickle\r\n";var f=a.getMediaSections(b._remoteDescription.sdp).length;b.transceivers.forEach(function(a,g){if(g+1>f)return;if(a.rejected){a.kind==="application"?a.protocol==="DTLS/SCTP"?d+="m=application 0 DTLS/SCTP 5000\r\n":d+="m=application 0 "+a.protocol+" webrtc-datachannel\r\n":a.kind==="audio"?d+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":a.kind==="video"&&(d+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n");d+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+a.mid+"\r\n";return}if(a.stream){var i;a.kind==="audio"?i=a.stream.getAudioTracks()[0]:a.kind==="video"&&(i=a.stream.getVideoTracks()[0]);i&&(h>=15019&&a.kind==="video"&&!a.sendEncodingParameters[0].rtx&&(a.sendEncodingParameters[0].rtx={ssrc:a.sendEncodingParameters[0].ssrc+1}))}g=e(a.localCapabilities,a.remoteCapabilities);var j=g.codecs.filter(function(a){return a.name.toLowerCase()==="rtx"}).length;!j&&a.sendEncodingParameters[0].rtx&&delete a.sendEncodingParameters[0].rtx;d+=c(a,g,"answer",a.stream,b._dtlsRole);a.rtcpParameters&&a.rtcpParameters.reducedSize&&(d+="a=rtcp-rsize\r\n")});var i=new g.RTCSessionDescription({type:"answer",sdp:d});return Promise.resolve(i)};n.prototype.addIceCandidate=function(b){var c=this,d;return b&&!(b.sdpMLineIndex!==void 0||b.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(e,f){if(!c._remoteDescription)return f(j("InvalidStateError","Can not add ICE candidate without a remote description"));else if(!b||b.candidate==="")for(var g=0;g<c.transceivers.length;g++){if(c.transceivers[g].rejected)continue;c.transceivers[g].iceTransport.addRemoteCandidate({});d=a.getMediaSections(c._remoteDescription.sdp);d[g]+="a=end-of-candidates\r\n";c._remoteDescription.sdp=a.getDescription(c._remoteDescription.sdp)+d.join("");if(c.usingBundle)break}else{g=b.sdpMLineIndex;if(b.sdpMid)for(var h=0;h<c.transceivers.length;h++)if(c.transceivers[h].mid===b.sdpMid){g=h;break}h=c.transceivers[g];if(h){if(h.rejected)return e();var k=Object.keys(b.candidate).length>0?a.parseCandidate(b.candidate):{};if(k.protocol==="tcp"&&(k.port===0||k.port===9))return e();if(k.component&&k.component!==1)return e();if((g===0||g>0&&h.iceTransport!==c.transceivers[0].iceTransport)&&!i(h.iceTransport,k))return f(j("OperationError","Can not add ICE candidate"));h=b.candidate.trim();h.indexOf("a=")===0&&(h=h.substr(2));d=a.getMediaSections(c._remoteDescription.sdp);d[g]+="a="+(k.type?h:"end-of-candidates")+"\r\n";c._remoteDescription.sdp=a.getDescription(c._remoteDescription.sdp)+d.join("")}else return f(j("OperationError","Can not add ICE candidate"))}e()})};n.prototype.getStats=function(a){if(a&&a instanceof g.MediaStreamTrack){var b=null;this.transceivers.forEach(function(c){c.rtpSender&&c.rtpSender.track===a?b=c.rtpSender:c.rtpReceiver&&c.rtpReceiver.track===a&&(b=c.rtpReceiver)});if(!b)throw j("InvalidAccessError","Invalid selector.");return b.getStats()}var c=[];this.transceivers.forEach(function(a){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(b){a[b]&&c.push(a[b].getStats())})});return Promise.all(c).then(function(a){var b=new Map();a.forEach(function(a){a.forEach(function(a){b.set(a.id,a)})});return b})};var o=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];o.forEach(function(a){a=g[a];if(a&&a.prototype&&a.prototype.getStats){var c=a.prototype.getStats;a.prototype.getStats=function(){return c.apply(this).then(function(a){var c=new Map();Object.keys(a).forEach(function(d){a[d].type=b(a[d]),c.set(d,a[d])});return c})}}});o=["createOffer","createAnswer"];o.forEach(function(a){var b=n.prototype[a];n.prototype[a]=function(){var a=arguments;return typeof a[0]==="function"||typeof a[1]==="function"?b.apply(this,[arguments[2]]).then(function(b){typeof a[0]==="function"&&a[0].apply(null,[b])},function(b){typeof a[1]==="function"&&a[1].apply(null,[b])}):b.apply(this,arguments)}});o=["setLocalDescription","setRemoteDescription","addIceCandidate"];o.forEach(function(a){var b=n.prototype[a];n.prototype[a]=function(){var a=arguments;return typeof a[1]==="function"||typeof a[2]==="function"?b.apply(this,arguments).then(function(){typeof a[1]==="function"&&a[1].apply(null)},function(b){typeof a[2]==="function"&&a[2].apply(null,[b])}):b.apply(this,arguments)}});["getStats"].forEach(function(a){var b=n.prototype[a];n.prototype[a]=function(){var a=arguments;return typeof a[1]==="function"?b.apply(this,arguments).then(function(){typeof a[1]==="function"&&a[1].apply(null)}):b.apply(this,arguments)}});return n}}var j=!1,k=function(){j||(j=!0,i());return h.exports};d=function(a){switch(a){case void 0:return k()}};e.exports=d}),null);
/**
 * License: https://www.facebook.com/legal/license/oyybAxN87_l/
 */
__d("webrtc-adapter-6.4.8",["rtcpeerconnection-shim-1.2.15","sdp-2.9.0"],(function(a,b,c,d,e,f){"use strict";function c(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=c(b("rtcpeerconnection-shim-1.2.15")),h=c(b("sdp-2.9.0"));d={};var i={exports:d};function j(){var a=!0,b=!0;function c(a,b,c){a=a.match(b);return a&&a.length>=c&&parseInt(a[c],10)}function d(a,b,c){if(!a.RTCPeerConnection)return;a=a.RTCPeerConnection.prototype;var d=a.addEventListener;a.addEventListener=function(a,e){if(a!==b)return d.apply(this,arguments);var f=function(a){a=c(a);a&&e(a)};this._eventMap=this._eventMap||{};this._eventMap[e]=f;return d.apply(this,[a,f])};var e=a.removeEventListener;a.removeEventListener=function(a,c){if(a!==b||!this._eventMap||!this._eventMap[c])return e.apply(this,arguments);var d=this._eventMap[c];delete this._eventMap[c];return e.apply(this,[a,d])};Object.defineProperty(a,"on"+b,{get:function(){return this["_on"+b]},set:function(a){this["_on"+b]&&(this.removeEventListener(b,this["_on"+b]),delete this["_on"+b]),a&&this.addEventListener(b,this["_on"+b]=a)},enumerable:!0,configurable:!0})}i.exports={extractVersion:c,wrapPeerConnectionEvent:d,disableLog:function(b){if(typeof b!=="boolean")return new Error("Argument type: "+typeof b+". Please use a boolean.");a=b;return b?"adapter.js logging disabled":"adapter.js logging enabled"},disableWarnings:function(a){if(typeof a!=="boolean")return new Error("Argument type: "+typeof a+". Please use a boolean.");b=!a;return"adapter.js deprecation warnings "+(a?"disabled":"enabled")},log:function(){if(typeof window==="object"){if(a)return;typeof console!=="undefined"&&typeof emptyFunction==="function"&&emptyFunction.apply(console,arguments)}},deprecated:function(a,c){if(!b)return},detectBrowser:function(a){var b=a&&a.navigator,d={};d.browser=null;d.version=null;if(typeof a==="undefined"||!a.navigator){d.browser="Not a browser.";return d}if(b.mozGetUserMedia)d.browser="firefox",d.version=c(b.userAgent,/Firefox\/(\d+)\./,1);else if(b.webkitGetUserMedia)d.browser="chrome",d.version=c(b.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(b.mediaDevices&&b.userAgent.match(/Edge\/(\d+).(\d+)$/))d.browser="edge",d.version=c(b.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(a.RTCPeerConnection&&b.userAgent.match(/AppleWebKit\/(\d+)\./))d.browser="safari",d.version=c(b.userAgent,/AppleWebKit\/(\d+)\./,1);else{d.browser="Not a supported browser.";return d}return d}}}var k=!1,l=function(){k||(k=!0,j());return i.exports};f={};var m={exports:f};function n(){var a=l(),b=a.log;m.exports=function(c){var d=a.detectBrowser(c),e=c&&c.navigator,f=function(a){if(typeof a!=="object"||a.mandatory||a.optional)return a;var b={};Object.keys(a).forEach(function(c){if(c==="require"||c==="advanced"||c==="mediaSource")return;var d=typeof a[c]==="object"?a[c]:{ideal:a[c]};d.exact!==void 0&&typeof d.exact==="number"&&(d.min=d.max=d.exact);var e=function(a,b){return a?a+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(d.ideal!==void 0){b.optional=b.optional||[];var f={};typeof d.ideal==="number"?(f[e("min",c)]=d.ideal,b.optional.push(f),f={},f[e("max",c)]=d.ideal,b.optional.push(f)):(f[e("",c)]=d.ideal,b.optional.push(f))}d.exact!==void 0&&typeof d.exact!=="number"?(b.mandatory=b.mandatory||{},b.mandatory[e("",c)]=d.exact):["min","max"].forEach(function(a){d[a]!==void 0&&(b.mandatory=b.mandatory||{},b.mandatory[e(a,c)]=d[a])})});a.advanced&&(b.optional=(b.optional||[]).concat(a.advanced));return b},g=function(a,c){if(d.version>=61)return c(a);a=JSON.parse(JSON.stringify(a));if(a&&typeof a.audio==="object"){var g=function(a,b,c){b in a&&!(c in a)&&(a[c]=a[b],delete a[b])};a=JSON.parse(JSON.stringify(a));g(a.audio,"autoGainControl","googAutoGainControl");g(a.audio,"noiseSuppression","googNoiseSuppression");a.audio=f(a.audio)}if(a&&typeof a.video==="object"){var h=a.video.facingMode;h=h&&(typeof h==="object"?h:{ideal:h});g=d.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(e.mediaDevices.getSupportedConstraints&&e.mediaDevices.getSupportedConstraints().facingMode&&!g)){delete a.video.facingMode;var i;h.exact==="environment"||h.ideal==="environment"?i=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(i=["front"]);if(i)return e.mediaDevices.enumerateDevices().then(function(d){d=d.filter(function(a){return a.kind==="videoinput"});var e=d.find(function(a){return i.some(function(b){return a.label.toLowerCase().indexOf(b)!==-1})});!e&&d.length&&i.indexOf("back")!==-1&&(e=d[d.length-1]);e&&(a.video.deviceId=h.exact?{exact:e.deviceId}:{ideal:e.deviceId});a.video=f(a.video);b("chrome: "+JSON.stringify(a));return c(a)})}a.video=f(a.video)}b("chrome: "+JSON.stringify(a));return c(a)},h=function(a){return d.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},i=function(a,b,c){g(a,function(a){e.webkitGetUserMedia(a,b,function(a){c&&c(h(a))})})};e.getUserMedia=i;var j=function(a){return new Promise(function(b,c){e.getUserMedia(a,b,c)})};e.mediaDevices||(e.mediaDevices={getUserMedia:j,enumerateDevices:function(){return new Promise(function(a){var b={audio:"audioinput",video:"videoinput"};return c.MediaStreamTrack.getSources(function(c){a(c.map(function(a){return{label:a.label,kind:b[a.kind],deviceId:a.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}});if(!e.mediaDevices.getUserMedia)e.mediaDevices.getUserMedia=function(a){return j(a)};else{var k=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(a){return g(a,function(a){return k(a).then(function(b){if(a.audio&&!b.getAudioTracks().length||a.video&&!b.getVideoTracks().length){b.getTracks().forEach(function(a){a.stop()});throw new DOMException("","NotFoundError")}return b},function(a){return Promise.reject(h(a))})})}}typeof e.mediaDevices.addEventListener==="undefined"&&(e.mediaDevices.addEventListener=function(){b("Dummy mediaDevices.addEventListener called.")});typeof e.mediaDevices.removeEventListener==="undefined"&&(e.mediaDevices.removeEventListener=function(){b("Dummy mediaDevices.removeEventListener called.")})}}var o=!1,p=function(){o||(o=!0,n());return m.exports};c={};var q={exports:c};function r(){var a=l(),b=a.log;function c(a,b,d){if(!b||d.has(b.id))return;d.set(b.id,b);Object.keys(b).forEach(function(e){e.endsWith("Id")?c(a,a.get(b[e]),d):e.endsWith("Ids")&&b[e].forEach(function(b){c(a,a.get(b),d)})})}function d(a,b,d){var e=d?"outbound-rtp":"inbound-rtp",f=new Map();if(b===null)return f;var g=[];a.forEach(function(a){a.type==="track"&&a.trackIdentifier===b.id&&g.push(a)});g.forEach(function(b){a.forEach(function(d){d.type===e&&d.trackId===b.id&&c(a,d,f)})});return f}q.exports={shimGetUserMedia:p(),shimMediaStream:function(a){a.MediaStream=a.MediaStream||a.webkitMediaStream},shimOnTrack:function(b){if(typeof b==="object"&&b.RTCPeerConnection&&!("ontrack"in b.RTCPeerConnection.prototype)){Object.defineProperty(b.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(a){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=a)},enumerable:!0,configurable:!0});var c=b.RTCPeerConnection.prototype.setRemoteDescription;b.RTCPeerConnection.prototype.setRemoteDescription=function(){var a=this;a._ontrackpoly||(a._ontrackpoly=function(c){c.stream.addEventListener("addtrack",function(d){var e;b.RTCPeerConnection.prototype.getReceivers?e=a.getReceivers().find(function(a){return a.track&&a.track.id===d.track.id}):e={track:d.track};var f=new Event("track");f.track=d.track;f.receiver=e;f.transceiver={receiver:e};f.streams=[c.stream];a.dispatchEvent(f)}),c.stream.getTracks().forEach(function(d){var e;b.RTCPeerConnection.prototype.getReceivers?e=a.getReceivers().find(function(a){return a.track&&a.track.id===d.id}):e={track:d};var f=new Event("track");f.track=d;f.receiver=e;f.transceiver={receiver:e};f.streams=[c.stream];a.dispatchEvent(f)})},a.addEventListener("addstream",a._ontrackpoly));return c.apply(a,arguments)}}else a.wrapPeerConnectionEvent(b,"track",function(a){a.transceiver||Object.defineProperty(a,"transceiver",{value:{receiver:a.receiver}});return a})},shimGetSendersWithDtmf:function(a){if(typeof a==="object"&&a.RTCPeerConnection&&!("getSenders"in a.RTCPeerConnection.prototype)&&"createDTMFSender"in a.RTCPeerConnection.prototype){var b=function(a,b){return{track:b,get dtmf(){this._dtmf===void 0&&(b.kind==="audio"?this._dtmf=a.createDTMFSender(b):this._dtmf=null);return this._dtmf},_pc:a}};if(!a.RTCPeerConnection.prototype.getSenders){a.RTCPeerConnection.prototype.getSenders=function(){this._senders=this._senders||[];return this._senders.slice()};var c=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(a,d){var e=this,f=c.apply(e,arguments);f||(f=b(e,a),e._senders.push(f));return f};var d=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(a){var b=this;d.apply(b,arguments);var c=b._senders.indexOf(a);c!==-1&&b._senders.splice(c,1)}}var e=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(a){var c=this;c._senders=c._senders||[];e.apply(c,[a]);a.getTracks().forEach(function(a){c._senders.push(b(c,a))})};var f=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(a){var b=this;b._senders=b._senders||[];f.apply(b,[a]);a.getTracks().forEach(function(a){var c=b._senders.find(function(b){return b.track===a});c&&b._senders.splice(b._senders.indexOf(c),1)})}}else if(typeof a==="object"&&a.RTCPeerConnection&&"getSenders"in a.RTCPeerConnection.prototype&&"createDTMFSender"in a.RTCPeerConnection.prototype&&a.RTCRtpSender&&!("dtmf"in a.RTCRtpSender.prototype)){var g=a.RTCPeerConnection.prototype.getSenders;a.RTCPeerConnection.prototype.getSenders=function(){var a=this,b=g.apply(a,[]);b.forEach(function(b){b._pc=a});return b};Object.defineProperty(a.RTCRtpSender.prototype,"dtmf",{get:function(){this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null);return this._dtmf}})}},shimSenderReceiverGetStats:function(b){if(!(typeof b==="object"&&b.RTCPeerConnection&&b.RTCRtpSender&&b.RTCRtpReceiver))return;if(!("getStats"in b.RTCRtpSender.prototype)){var c=b.RTCPeerConnection.prototype.getSenders;c&&(b.RTCPeerConnection.prototype.getSenders=function(){var a=this,b=c.apply(a,[]);b.forEach(function(b){b._pc=a});return b});var e=b.RTCPeerConnection.prototype.addTrack;e&&(b.RTCPeerConnection.prototype.addTrack=function(){var a=e.apply(this,arguments);a._pc=this;return a});b.RTCRtpSender.prototype.getStats=function(){var a=this;return this._pc.getStats().then(function(b){return d(b,a.track,!0)})}}if(!("getStats"in b.RTCRtpReceiver.prototype)){var f=b.RTCPeerConnection.prototype.getReceivers;f&&(b.RTCPeerConnection.prototype.getReceivers=function(){var a=this,b=f.apply(a,[]);b.forEach(function(b){b._pc=a});return b});a.wrapPeerConnectionEvent(b,"track",function(a){a.receiver._pc=a.srcElement;return a});b.RTCRtpReceiver.prototype.getStats=function(){var a=this;return this._pc.getStats().then(function(b){return d(b,a.track,!1)})}}if(!("getStats"in b.RTCRtpSender.prototype&&"getStats"in b.RTCRtpReceiver.prototype))return;var g=b.RTCPeerConnection.prototype.getStats;b.RTCPeerConnection.prototype.getStats=function(){var a=this;if(arguments.length>0&&arguments[0]instanceof b.MediaStreamTrack){var c=arguments[0],d,e,f;a.getSenders().forEach(function(a){a.track===c&&(d?f=!0:d=a)});a.getReceivers().forEach(function(a){a.track===c&&(e?f=!0:e=a);return a.track===c});if(f||d&&e)return Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError"));else if(d)return d.getStats();else if(e)return e.getStats();return Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return g.apply(a,arguments)}},shimSourceObject:function(a){var b=a&&a.URL;typeof a==="object"&&(a.HTMLMediaElement&&!("srcObject"in a.HTMLMediaElement.prototype)&&Object.defineProperty(a.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(a){var c=this;this._srcObject=a;this.src&&b.revokeObjectURL(this.src);if(!a){this.src="";return void 0}this.src=b.createObjectURL(a);a.addEventListener("addtrack",function(){c.src&&b.revokeObjectURL(c.src),c.src=b.createObjectURL(a)});a.addEventListener("removetrack",function(){c.src&&b.revokeObjectURL(c.src),c.src=b.createObjectURL(a)})}}))},shimAddTrackRemoveTrackWithNative:function(a){a.RTCPeerConnection.prototype.getLocalStreams=function(){var a=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{};return Object.keys(this._shimmedLocalStreams).map(function(b){return a._shimmedLocalStreams[b][0]})};var b=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(a,c){if(!c)return b.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var d=b.apply(this,arguments);!this._shimmedLocalStreams[c.id]?this._shimmedLocalStreams[c.id]=[c,d]:this._shimmedLocalStreams[c.id].indexOf(d)===-1&&this._shimmedLocalStreams[c.id].push(d);return d};var c=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(a){var b=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{};a.getTracks().forEach(function(a){var c=b.getSenders().find(function(b){return b.track===a});if(c)throw new DOMException("Track already exists.","InvalidAccessError")});var d=b.getSenders();c.apply(this,arguments);var e=b.getSenders().filter(function(a){return d.indexOf(a)===-1});this._shimmedLocalStreams[a.id]=[a].concat(e)};var d=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{};delete this._shimmedLocalStreams[a.id];return d.apply(this,arguments)};var e=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(a){var b=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{};a&&Object.keys(this._shimmedLocalStreams).forEach(function(c){var d=b._shimmedLocalStreams[c].indexOf(a);d!==-1&&b._shimmedLocalStreams[c].splice(d,1);b._shimmedLocalStreams[c].length===1&&delete b._shimmedLocalStreams[c]});return e.apply(this,arguments)}},shimAddTrackRemoveTrack:function(b){if(!b.RTCPeerConnection)return;var c=a.detectBrowser(b);if(b.RTCPeerConnection.prototype.addTrack&&c.version>=65)return this.shimAddTrackRemoveTrackWithNative(b);var d=b.RTCPeerConnection.prototype.getLocalStreams;b.RTCPeerConnection.prototype.getLocalStreams=function(){var a=this,b=d.apply(this);a._reverseStreams=a._reverseStreams||{};return b.map(function(b){return a._reverseStreams[b.id]})};var e=b.RTCPeerConnection.prototype.addStream;b.RTCPeerConnection.prototype.addStream=function(a){var c=this;c._streams=c._streams||{};c._reverseStreams=c._reverseStreams||{};a.getTracks().forEach(function(a){var b=c.getSenders().find(function(b){return b.track===a});if(b)throw new DOMException("Track already exists.","InvalidAccessError")});if(!c._reverseStreams[a.id]){var d=new b.MediaStream(a.getTracks());c._streams[a.id]=d;c._reverseStreams[d.id]=a;a=d}e.apply(c,[a])};var f=b.RTCPeerConnection.prototype.removeStream;b.RTCPeerConnection.prototype.removeStream=function(a){var b=this;b._streams=b._streams||{};b._reverseStreams=b._reverseStreams||{};f.apply(b,[b._streams[a.id]||a]);delete b._reverseStreams[b._streams[a.id]?b._streams[a.id].id:a.id];delete b._streams[a.id]};b.RTCPeerConnection.prototype.addTrack=function(a,c){var d=this;if(d.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var e=[].slice.call(arguments,1);if(e.length!==1||!e[0].getTracks().find(function(b){return b===a}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var f=d.getSenders().find(function(b){return b.track===a});if(f)throw new DOMException("Track already exists.","InvalidAccessError");d._streams=d._streams||{};d._reverseStreams=d._reverseStreams||{};var g=d._streams[c.id];if(g)g.addTrack(a),Promise.resolve().then(function(){d.dispatchEvent(new Event("negotiationneeded"))});else{var h=new b.MediaStream([a]);d._streams[c.id]=h;d._reverseStreams[h.id]=c;d.addStream(h)}return d.getSenders().find(function(b){return b.track===a})};function g(a,b){var c=b.sdp;Object.keys(a._reverseStreams||[]).forEach(function(b){b=a._reverseStreams[b];var d=a._streams[b.id];c=c.replace(new RegExp(d.id,"g"),b.id)});return new RTCSessionDescription({type:b.type,sdp:c})}function h(a,b){var c=b.sdp;Object.keys(a._reverseStreams||[]).forEach(function(b){b=a._reverseStreams[b];var d=a._streams[b.id];c=c.replace(new RegExp(b.id,"g"),d.id)});return new RTCSessionDescription({type:b.type,sdp:c})}["createOffer","createAnswer"].forEach(function(a){var c=b.RTCPeerConnection.prototype[a];b.RTCPeerConnection.prototype[a]=function(){var a=this,b=arguments,d=arguments.length&&typeof arguments[0]==="function";return d?c.apply(a,[function(c){c=g(a,c);b[0].apply(null,[c])},function(a){b[1]&&b[1].apply(null,a)},arguments[2]]):c.apply(a,arguments).then(function(b){return g(a,b)})}});var i=b.RTCPeerConnection.prototype.setLocalDescription;b.RTCPeerConnection.prototype.setLocalDescription=function(){var a=this;if(!arguments.length||!arguments[0].type)return i.apply(a,arguments);arguments[0]=h(a,arguments[0]);return i.apply(a,arguments)};var j=Object.getOwnPropertyDescriptor(b.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(b.RTCPeerConnection.prototype,"localDescription",{get:function(){var a=this,b=j.get.apply(this);return b.type===""?b:g(a,b)}});b.RTCPeerConnection.prototype.removeTrack=function(a){var b=this;if(b.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!a._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var c=a._pc===b;if(!c)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");b._streams=b._streams||{};var d;Object.keys(b._streams).forEach(function(c){var e=b._streams[c].getTracks().find(function(b){return a.track===b});e&&(d=b._streams[c])});d&&(d.getTracks().length===1?b.removeStream(b._reverseStreams[d.id]):d.removeTrack(a.track),b.dispatchEvent(new Event("negotiationneeded")))}},shimPeerConnection:function(c){var d=a.detectBrowser(c);!c.RTCPeerConnection&&c.webkitRTCPeerConnection&&(c.RTCPeerConnection=function(a,d){b("PeerConnection");a&&a.iceTransportPolicy&&(a.iceTransports=a.iceTransportPolicy);return new c.webkitRTCPeerConnection(a,d)},c.RTCPeerConnection.prototype=c.webkitRTCPeerConnection.prototype,c.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(c.RTCPeerConnection,"generateCertificate",{get:function(){return c.webkitRTCPeerConnection.generateCertificate}}));if(!c.RTCPeerConnection)return;var e=c.RTCPeerConnection.prototype.getStats;c.RTCPeerConnection.prototype.getStats=function(a,b,c){var d=this,f=arguments;if(arguments.length>0&&typeof a==="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof arguments[0]!=="function"))return e.apply(this,[]);var g=function(a){var b={};a=a.result();a.forEach(function(a){var c={id:a.id,timestamp:a.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[a.type]||a.type};a.names().forEach(function(b){c[b]=a.stat(b)});b[c.id]=c});return b},h=function(a){return new Map(Object.keys(a).map(function(b){return[b,a[b]]}))};if(arguments.length>=2){var i=function(a){f[1](h(g(a)))};return e.apply(this,[i,arguments[0]])}return new Promise(function(a,b){e.apply(d,[function(b){a(h(g(b)))},b])}).then(b,c)};d.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){var b=c.RTCPeerConnection.prototype[a];c.RTCPeerConnection.prototype[a]=function(){var a=arguments,c=this,d=new Promise(function(d,e){b.apply(c,[a[0],d,e])});return a.length<2?d:d.then(function(){a[1].apply(null,[])},function(b){a.length>=3&&a[2].apply(null,[b])})}});d.version<52&&["createOffer","createAnswer"].forEach(function(a){var b=c.RTCPeerConnection.prototype[a];c.RTCPeerConnection.prototype[a]=function(){var a=this;if(arguments.length<1||arguments.length===1&&typeof arguments[0]==="object"){var c=arguments.length===1?arguments[0]:void 0;return new Promise(function(d,e){b.apply(a,[d,e,c])})}return b.apply(this,arguments)}});["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){var b=c.RTCPeerConnection.prototype[a];c.RTCPeerConnection.prototype[a]=function(){arguments[0]=new(a==="addIceCandidate"?c.RTCIceCandidate:c.RTCSessionDescription)(arguments[0]);return b.apply(this,arguments)}});var f=c.RTCPeerConnection.prototype.addIceCandidate;c.RTCPeerConnection.prototype.addIceCandidate=function(){if(!arguments[0]){arguments[1]&&arguments[1].apply(null);return Promise.resolve()}return f.apply(this,arguments)}},fixNegotiationNeeded:function(b){a.wrapPeerConnectionEvent(b,"negotiationneeded",function(a){var b=a.target;if(b.signalingState!=="stable")return;return a})},shimGetDisplayMedia:function(b,c){if(!b.navigator||!b.navigator.mediaDevices||"getDisplayMedia"in b.navigator.mediaDevices)return;if(typeof c!=="function")return;b.navigator.mediaDevices.getDisplayMedia=function(a){return c(a).then(function(c){var d=a.video&&a.video.width,e=a.video&&a.video.height,f=a.video&&a.video.frameRate;a.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:c,maxFrameRate:f||3}};d&&(a.video.mandatory.maxWidth=d);e&&(a.video.mandatory.maxHeight=e);return b.navigator.mediaDevices.getUserMedia(a)})};b.navigator.getDisplayMedia=function(c){a.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia");return b.navigator.mediaDevices.getDisplayMedia(c)}}}}var s=!1,t=function(){s||(s=!0,r());return q.exports};b={};var u={exports:b};function v(){var a=l();u.exports=function(b,c){var d=!1;b=JSON.parse(JSON.stringify(b));return b.filter(function(b){if(b&&(b.urls||b.url)){var e=b.urls||b.url;b.url&&!b.urls&&a.deprecated("RTCIceServer.url","RTCIceServer.urls");var f=typeof e==="string";f&&(e=[e]);e=e.filter(function(a){var b=a.indexOf("turn:")===0&&a.indexOf("transport=udp")!==-1&&a.indexOf("turn:[")===-1&&!d;if(b){d=!0;return!0}return a.indexOf("stun:")===0&&c>=14393&&a.indexOf("?transport=udp")===-1});delete b.url;b.urls=f?e[0]:e;return!!e.length}})}}var w=!1,x=function(){w||(w=!0,v());return u.exports};d={};var y={exports:d};function z(){y.exports=function(a){a=a&&a.navigator;var b=function(a){return{name:{PermissionDeniedError:"NotAllowedError"}[a.name]||a.name,message:a.message,constraint:a.constraint,toString:function(){return this.name}}},c=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(a){return c(a)["catch"](function(a){return Promise.reject(b(a))})}}}var A=!1,B=function(){A||(A=!0,z());return y.exports};f={};var C={exports:f};function D(){var a=l(),b=x(),c=g();C.exports={shimGetUserMedia:B(),shimPeerConnection:function(d){var e=a.detectBrowser(d);if(d.RTCIceGatherer){d.RTCIceCandidate||(d.RTCIceCandidate=function(a){return a});d.RTCSessionDescription||(d.RTCSessionDescription=function(a){return a});if(e.version<15025){var f=Object.getOwnPropertyDescriptor(d.MediaStreamTrack.prototype,"enabled");Object.defineProperty(d.MediaStreamTrack.prototype,"enabled",{set:function(a){f.set.call(this,a);var b=new Event("enabled");b.enabled=a;this.dispatchEvent(b)}})}}d.RTCRtpSender&&!("dtmf"in d.RTCRtpSender.prototype)&&Object.defineProperty(d.RTCRtpSender.prototype,"dtmf",{get:function(){this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new d.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null));return this._dtmf}});d.RTCDtmfSender&&!d.RTCDTMFSender&&(d.RTCDTMFSender=d.RTCDtmfSender);var g=c(d,e.version);d.RTCPeerConnection=function(a){a&&a.iceServers&&(a.iceServers=b(a.iceServers));return new g(a)};d.RTCPeerConnection.prototype=g.prototype},shimReplaceTrack:function(a){a.RTCRtpSender&&!("replaceTrack"in a.RTCRtpSender.prototype)&&(a.RTCRtpSender.prototype.replaceTrack=a.RTCRtpSender.prototype.setTrack)},shimGetDisplayMedia:function(b,c){if(!("getDisplayMedia"in b.navigator)||!b.navigator.mediaDevices||"getDisplayMedia"in b.navigator.mediaDevices)return;var d=b.navigator.getDisplayMedia;b.navigator.mediaDevices.getDisplayMedia=function(a){return d.call(b.navigator,a)};b.navigator.getDisplayMedia=function(c){a.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia");return d.call(b.navigator,c)}}}}var E=!1,F=function(){E||(E=!0,D());return C.exports};c={};var G={exports:c};function H(){var a=l(),c=a.log;G.exports=function(d){var e=a.detectBrowser(d),f=d&&d.navigator;d=d&&d.MediaStreamTrack;var g=function(a){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[a.name]||a.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[a.message]||a.message,constraint:a.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},h=function(a,d,h){var i=function(c){if(typeof c!=="object"||c.require)return c;var a=[];Object.keys(c).forEach(function(b){if(b==="require"||b==="advanced"||b==="mediaSource")return;var d=c[b]=typeof c[b]==="object"?c[b]:{ideal:c[b]};(d.min!==void 0||d.max!==void 0||d.exact!==void 0)&&a.push(b);d.exact!==void 0&&(typeof d.exact==="number"?d.min=d.max=d.exact:c[b]=d.exact,delete d.exact);if(d.ideal!==void 0){c.advanced=c.advanced||[];var e={};typeof d.ideal==="number"?e[b]={min:d.ideal,max:d.ideal}:e[b]=d.ideal;c.advanced.push(e);delete d.ideal;Object.keys(d).length||delete c[b]}});a.length&&(c.require=a);return c};a=JSON.parse(JSON.stringify(a));e.version<38&&(c("spec: "+JSON.stringify(a)),a.audio&&(a.audio=i(a.audio)),a.video&&(a.video=i(a.video)),c("ff37: "+JSON.stringify(a)));return f.mozGetUserMedia(a,d,function(a){h(g(a))})},i=function(a){return new Promise(function(b,c){h(a,b,c)})};f.mediaDevices||(f.mediaDevices={getUserMedia:i,addEventListener:function(){},removeEventListener:function(){}});f.mediaDevices.enumerateDevices=f.mediaDevices.enumerateDevices||function(){return new Promise(function(a){var b=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];a(b)})};if(e.version<41){var j=f.mediaDevices.enumerateDevices.bind(f.mediaDevices);f.mediaDevices.enumerateDevices=function(){return j().then(void 0,function(a){if(a.name==="NotFoundError")return[];throw a})}}if(e.version<49){var k=f.mediaDevices.getUserMedia.bind(f.mediaDevices);f.mediaDevices.getUserMedia=function(a){return k(a).then(function(b){if(a.audio&&!b.getAudioTracks().length||a.video&&!b.getVideoTracks().length){b.getTracks().forEach(function(a){a.stop()});throw new DOMException("The object can not be found here.","NotFoundError")}return b},function(a){return Promise.reject(g(a))})}}if(!(e.version>55&&"autoGainControl"in f.mediaDevices.getSupportedConstraints())){var l=function(a,b,c){b in a&&!(c in a)&&(a[c]=a[b],delete a[b])},m=f.mediaDevices.getUserMedia.bind(f.mediaDevices);f.mediaDevices.getUserMedia=function(a){typeof a==="object"&&typeof a.audio==="object"&&(a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","mozAutoGainControl"),l(a.audio,"noiseSuppression","mozNoiseSuppression"));return m(a)};if(d&&d.prototype.getSettings){var n=d.prototype.getSettings;d.prototype.getSettings=function(){var a=n.apply(this,arguments);l(a,"mozAutoGainControl","autoGainControl");l(a,"mozNoiseSuppression","noiseSuppression");return a}}if(d&&d.prototype.applyConstraints){var o=d.prototype.applyConstraints;d.prototype.applyConstraints=function(a){this.kind==="audio"&&typeof a==="object"&&(a=JSON.parse(JSON.stringify(a)),l(a,"autoGainControl","mozAutoGainControl"),l(a,"noiseSuppression","mozNoiseSuppression"));return o.apply(this,[a])}}}f.getUserMedia=function(b,c,d){if(e.version<44)return h(b,c,d);a.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia");f.mediaDevices.getUserMedia(b).then(c,d)}}}var I=!1,J=function(){I||(I=!0,H());return G.exports};b={};var K={exports:b};function L(){var a=l();K.exports={shimGetUserMedia:J(),shimOnTrack:function(a){typeof a==="object"&&a.RTCPeerConnection&&!("ontrack"in a.RTCPeerConnection.prototype)&&Object.defineProperty(a.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(a){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=a),this.addEventListener("addstream",this._ontrackpoly=function(a){a.stream.getTracks().forEach(function(b){var c=new Event("track");c.track=b;c.receiver={track:b};c.transceiver={receiver:c.receiver};c.streams=[a.stream];this.dispatchEvent(c)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0}),typeof a==="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(a){typeof a==="object"&&(a.HTMLMediaElement&&!("srcObject"in a.HTMLMediaElement.prototype)&&Object.defineProperty(a.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(a){this.mozSrcObject=a}}))},shimPeerConnection:function(b){var c=a.detectBrowser(b);if(typeof b!=="object"||!(b.RTCPeerConnection||b.mozRTCPeerConnection))return;b.RTCPeerConnection||(b.RTCPeerConnection=function(a,d){if(c.version<38&&(a&&a.iceServers)){var e=[];for(var f=0;f<a.iceServers.length;f++){var g=a.iceServers[f];if(g.hasOwnProperty("urls"))for(var h=0;h<g.urls.length;h++){var i={url:g.urls[h]};g.urls[h].indexOf("turn")===0&&(i.username=g.username,i.credential=g.credential);e.push(i)}else e.push(a.iceServers[f])}a.iceServers=e}return new b.mozRTCPeerConnection(a,d)},b.RTCPeerConnection.prototype=b.mozRTCPeerConnection.prototype,b.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(b.RTCPeerConnection,"generateCertificate",{get:function(){return b.mozRTCPeerConnection.generateCertificate}}),b.RTCSessionDescription=b.mozRTCSessionDescription,b.RTCIceCandidate=b.mozRTCIceCandidate);["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){var c=b.RTCPeerConnection.prototype[a];b.RTCPeerConnection.prototype[a]=function(){arguments[0]=new(a==="addIceCandidate"?b.RTCIceCandidate:b.RTCSessionDescription)(arguments[0]);return c.apply(this,arguments)}});var d=b.RTCPeerConnection.prototype.addIceCandidate;b.RTCPeerConnection.prototype.addIceCandidate=function(){if(!arguments[0]){arguments[1]&&arguments[1].apply(null);return Promise.resolve()}return d.apply(this,arguments)};var e=function(a){var b=new Map();Object.keys(a).forEach(function(c){b.set(c,a[c]),b[c]=a[c]});return b},f={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},g=b.RTCPeerConnection.prototype.getStats;b.RTCPeerConnection.prototype.getStats=function(a,b,d){return g.apply(this,[a||null]).then(function(a){c.version<48&&(a=e(a));if(c.version<53&&!b)try{a.forEach(function(a){a.type=f[a.type]||a.type})}catch(b){if(b.name!=="TypeError")throw b;a.forEach(function(b,c){a.set(c,Object.assign({},b,{type:f[b.type]||b.type}))})}return a}).then(b,d)}},shimSenderGetStats:function(a){if(!(typeof a==="object"&&a.RTCPeerConnection&&a.RTCRtpSender))return;if(a.RTCRtpSender&&"getStats"in a.RTCRtpSender.prototype)return;var b=a.RTCPeerConnection.prototype.getSenders;b&&(a.RTCPeerConnection.prototype.getSenders=function(){var a=this,c=b.apply(a,[]);c.forEach(function(b){b._pc=a});return c});var c=a.RTCPeerConnection.prototype.addTrack;c&&(a.RTCPeerConnection.prototype.addTrack=function(){var a=c.apply(this,arguments);a._pc=this;return a});a.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map())}},shimReceiverGetStats:function(b){if(!(typeof b==="object"&&b.RTCPeerConnection&&b.RTCRtpSender))return;if(b.RTCRtpSender&&"getStats"in b.RTCRtpReceiver.prototype)return;var c=b.RTCPeerConnection.prototype.getReceivers;c&&(b.RTCPeerConnection.prototype.getReceivers=function(){var a=this,b=c.apply(a,[]);b.forEach(function(b){b._pc=a});return b});a.wrapPeerConnectionEvent(b,"track",function(a){a.receiver._pc=a.srcElement;return a});b.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}},shimRemoveStream:function(b){if(!b.RTCPeerConnection||"removeStream"in b.RTCPeerConnection.prototype)return;b.RTCPeerConnection.prototype.removeStream=function(b){var c=this;a.deprecated("removeStream","removeTrack");this.getSenders().forEach(function(a){a.track&&b.getTracks().indexOf(a.track)!==-1&&c.removeTrack(a)})}},shimRTCDataChannel:function(a){a.DataChannel&&!a.RTCDataChannel&&(a.RTCDataChannel=a.DataChannel)},shimGetDisplayMedia:function(b,c){if(!b.navigator||!b.navigator.mediaDevices||"getDisplayMedia"in b.navigator.mediaDevices)return;b.navigator.mediaDevices.getDisplayMedia=function(a){if(!(a&&a.video)){var d=new DOMException("getDisplayMedia without video constraints is undefined");d.name="NotFoundError";d.code=8;return Promise.reject(d)}a.video===!0?a.video={mediaSource:c}:a.video.mediaSource=c;return b.navigator.mediaDevices.getUserMedia(a)};b.navigator.getDisplayMedia=function(c){a.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia");return b.navigator.mediaDevices.getDisplayMedia(c)}}}}var M=!1,N=function(){M||(M=!0,L());return K.exports};d={};var O={exports:d};function P(){var a=l();O.exports={shimLocalStreamsAPI:function(a){if(typeof a!=="object"||!a.RTCPeerConnection)return;"getLocalStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getLocalStreams=function(){this._localStreams||(this._localStreams=[]);return this._localStreams});"getStreamById"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getStreamById=function(a){var b=null;this._localStreams&&this._localStreams.forEach(function(c){c.id===a&&(b=c)});this._remoteStreams&&this._remoteStreams.forEach(function(c){c.id===a&&(b=c)});return b});if(!("addStream"in a.RTCPeerConnection.prototype)){var b=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addStream=function(a){this._localStreams||(this._localStreams=[]);this._localStreams.indexOf(a)===-1&&this._localStreams.push(a);var c=this;a.getTracks().forEach(function(d){b.call(c,d,a)})};a.RTCPeerConnection.prototype.addTrack=function(a,c){c&&(!this._localStreams?this._localStreams=[c]:this._localStreams.indexOf(c)===-1&&this._localStreams.push(c));return b.call(this,a,c)}}"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(a){this._localStreams||(this._localStreams=[]);var b=this._localStreams.indexOf(a);if(b===-1)return;this._localStreams.splice(b,1);var c=this,d=a.getTracks();this.getSenders().forEach(function(a){d.indexOf(a.track)!==-1&&c.removeTrack(a)})})},shimRemoteStreamsAPI:function(a){if(typeof a!=="object"||!a.RTCPeerConnection)return;"getRemoteStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]});if(!("onaddstream"in a.RTCPeerConnection.prototype)){Object.defineProperty(a.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(a){this._onaddstream&&this.removeEventListener("addstream",this._onaddstream),this.addEventListener("addstream",this._onaddstream=a)}});var b=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){var a=this;this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(b){b.streams.forEach(function(b){a._remoteStreams||(a._remoteStreams=[]);if(a._remoteStreams.indexOf(b)>=0)return;a._remoteStreams.push(b);var c=new Event("addstream");c.stream=b;a.dispatchEvent(c)})});return b.apply(a,arguments)}}},shimCallbacksAPI:function(a){if(typeof a!=="object"||!a.RTCPeerConnection)return;a=a.RTCPeerConnection.prototype;var b=a.createOffer,c=a.createAnswer,d=a.setLocalDescription,e=a.setRemoteDescription,f=a.addIceCandidate;a.createOffer=function(a,c){var d=arguments.length>=2?arguments[2]:arguments[0],e=b.apply(this,[d]);if(!c)return e;e.then(a,c);return Promise.resolve()};a.createAnswer=function(a,b){var d=arguments.length>=2?arguments[2]:arguments[0],e=c.apply(this,[d]);if(!b)return e;e.then(a,b);return Promise.resolve()};var g=function(a,b,c){a=d.apply(this,[a]);if(!c)return a;a.then(b,c);return Promise.resolve()};a.setLocalDescription=g;g=function(a,b,c){a=e.apply(this,[a]);if(!c)return a;a.then(b,c);return Promise.resolve()};a.setRemoteDescription=g;g=function(a,b,c){a=f.apply(this,[a]);if(!c)return a;a.then(b,c);return Promise.resolve()};a.addIceCandidate=g},shimGetUserMedia:function(a){var b=a&&a.navigator;b.getUserMedia||(b.webkitGetUserMedia?b.getUserMedia=b.webkitGetUserMedia.bind(b):b.mediaDevices&&b.mediaDevices.getUserMedia&&(b.getUserMedia=function(a,c,d){b.mediaDevices.getUserMedia(a).then(c,d)}.bind(b)))},shimRTCIceServerUrls:function(b){var c=b.RTCPeerConnection;b.RTCPeerConnection=function(b,d){if(b&&b.iceServers){var e=[];for(var f=0;f<b.iceServers.length;f++){var g=b.iceServers[f];!g.hasOwnProperty("urls")&&g.hasOwnProperty("url")?(a.deprecated("RTCIceServer.url","RTCIceServer.urls"),g=JSON.parse(JSON.stringify(g)),g.urls=g.url,delete g.url,e.push(g)):e.push(b.iceServers[f])}b.iceServers=e}return new c(b,d)};b.RTCPeerConnection.prototype=c.prototype;"generateCertificate"in b.RTCPeerConnection&&Object.defineProperty(b.RTCPeerConnection,"generateCertificate",{get:function(){return c.generateCertificate}})},shimTrackEventTransceiver:function(a){typeof a==="object"&&a.RTCPeerConnection&&"receiver"in a.RTCTrackEvent.prototype&&!a.RTCTransceiver&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(a){var b=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(a){var c=this;if(a){typeof a.offerToReceiveAudio!=="undefined"&&(a.offerToReceiveAudio=!!a.offerToReceiveAudio);var d=c.getTransceivers().find(function(a){return a.sender.track&&a.sender.track.kind==="audio"});a.offerToReceiveAudio===!1&&d?d.direction==="sendrecv"?d.setDirection?d.setDirection("sendonly"):d.direction="sendonly":d.direction==="recvonly"&&(d.setDirection?d.setDirection("inactive"):d.direction="inactive"):a.offerToReceiveAudio===!0&&!d&&c.addTransceiver("audio");typeof a.offerToReceiveVideo!=="undefined"&&(a.offerToReceiveVideo=!!a.offerToReceiveVideo);var e=c.getTransceivers().find(function(a){return a.sender.track&&a.sender.track.kind==="video"});a.offerToReceiveVideo===!1&&e?e.direction==="sendrecv"?e.setDirection("sendonly"):e.direction==="recvonly"&&e.setDirection("inactive"):a.offerToReceiveVideo===!0&&!e&&c.addTransceiver("video")}return b.apply(c,arguments)}}}}var Q=!1,R=function(){Q||(Q=!0,P());return O.exports};f={};var S={exports:f};function T(){var a=h(),b=l();S.exports={shimRTCIceCandidate:function(c){if(!c.RTCIceCandidate||c.RTCIceCandidate&&"foundation"in c.RTCIceCandidate.prototype)return;var d=c.RTCIceCandidate;c.RTCIceCandidate=function(b){typeof b==="object"&&b.candidate&&b.candidate.indexOf("a=")===0&&(b=JSON.parse(JSON.stringify(b)),b.candidate=b.candidate.substr(2));if(b.candidate&&b.candidate.length){var c=new d(b),e=a.parseCandidate(b.candidate),f=Object.assign(c,e);f.toJSON=function(){return{candidate:f.candidate,sdpMid:f.sdpMid,sdpMLineIndex:f.sdpMLineIndex,usernameFragment:f.usernameFragment}};return f}return new d(b)};c.RTCIceCandidate.prototype=d.prototype;b.wrapPeerConnectionEvent(c,"icecandidate",function(a){a.candidate&&Object.defineProperty(a,"candidate",{value:new c.RTCIceCandidate(a.candidate),writable:"false"});return a})},shimCreateObjectURL:function(a){var c=a&&a.URL;if(!(typeof a==="object"&&a.HTMLMediaElement&&"srcObject"in a.HTMLMediaElement.prototype&&c.createObjectURL&&c.revokeObjectURL))return void 0;var d=c.createObjectURL.bind(c),e=c.revokeObjectURL.bind(c),f=new Map(),g=0;c.createObjectURL=function(a){if("getTracks"in a){var c="polyblob:"+ ++g;f.set(c,a);b.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream");return c}return d(a)};c.revokeObjectURL=function(a){e(a),f["delete"](a)};var h=Object.getOwnPropertyDescriptor(a.HTMLMediaElement.prototype,"src");Object.defineProperty(a.HTMLMediaElement.prototype,"src",{get:function(){return h.get.apply(this)},set:function(a){this.srcObject=f.get(a)||null;return h.set.apply(this,[a])}});var i=a.HTMLMediaElement.prototype.setAttribute;a.HTMLMediaElement.prototype.setAttribute=function(){arguments.length===2&&(""+arguments[0]).toLowerCase()==="src"&&(this.srcObject=f.get(arguments[1])||null);return i.apply(this,arguments)}},shimMaxMessageSize:function(c){if(c.RTCSctpTransport||!c.RTCPeerConnection)return;var d=b.detectBrowser(c);"sctp"in c.RTCPeerConnection.prototype||Object.defineProperty(c.RTCPeerConnection.prototype,"sctp",{get:function(){return typeof this._sctp==="undefined"?null:this._sctp}});var e=function(b){b=a.splitSections(b.sdp);b.shift();return b.some(function(b){b=a.parseMLine(b);return b&&b.kind==="application"&&b.protocol.indexOf("SCTP")!==-1})},f=function(a){a=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(a===null||a.length<2)return-1;a=parseInt(a[1],10);return a!==a?-1:a},g=function(a){var b=65536;d.browser==="firefox"&&(d.version<57?a===-1?b=16384:b=2147483637:d.version<60?b=d.version===57?65535:65536:b=2147483637);return b},h=function(b,c){var e=65536;d.browser==="firefox"&&d.version===57&&(e=65535);b=a.matchPrefix(b.sdp,"a=max-message-size:");b.length>0?e=parseInt(b[0].substr(19),10):d.browser==="firefox"&&c!==-1&&(e=2147483637);return e},i=c.RTCPeerConnection.prototype.setRemoteDescription;c.RTCPeerConnection.prototype.setRemoteDescription=function(){var a=this;a._sctp=null;if(e(arguments[0])){var b=f(arguments[0]),c=g(b),d=h(arguments[0],b),j;c===0&&d===0?j=Number.POSITIVE_INFINITY:c===0||d===0?j=Math.max(c,d):j=Math.min(c,d);var k={};Object.defineProperty(k,"maxMessageSize",{get:function(){return j}});a._sctp=k}return i.apply(a,arguments)}},shimSendThrowTypeError:function(a){if(!(a.RTCPeerConnection&&"createDataChannel"in a.RTCPeerConnection.prototype))return;function c(a,b){var c=a.send;a.send=function(){var d=arguments[0],e=d.length||d.size||d.byteLength;if(a.readyState==="open"&&b.sctp&&e>b.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+b.sctp.maxMessageSize+" bytes)");return c.apply(a,arguments)}}var d=a.RTCPeerConnection.prototype.createDataChannel;a.RTCPeerConnection.prototype.createDataChannel=function(){var a=this,b=d.apply(a,arguments);c(b,a);return b};b.wrapPeerConnectionEvent(a,"datachannel",function(a){c(a.channel,a.target);return a})}}}var U=!1,V=function(){U||(U=!0,T());return S.exports};c={};var W={exports:c};function X(){var a=l();W.exports=function(b,c){b=b&&b.window;var d={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var e in c)hasOwnProperty.call(c,e)&&(d[e]=c[e]);c=a.log;var f=a.detectBrowser(b),g=t()||null,h=F()||null,i=N()||null,j=R()||null,k=V()||null,l={browserDetails:f,commonShim:k,extractVersion:a.extractVersion,disableLog:a.disableLog,disableWarnings:a.disableWarnings};switch(f.browser){case"chrome":if(!g||!g.shimPeerConnection||!d.shimChrome){c("Chrome shim is not included in this adapter release.");return l}c("adapter.js shimming chrome.");l.browserShim=g;k.shimCreateObjectURL(b);g.shimGetUserMedia(b);g.shimMediaStream(b);g.shimSourceObject(b);g.shimPeerConnection(b);g.shimOnTrack(b);g.shimAddTrackRemoveTrack(b);g.shimGetSendersWithDtmf(b);g.shimSenderReceiverGetStats(b);g.fixNegotiationNeeded(b);k.shimRTCIceCandidate(b);k.shimMaxMessageSize(b);k.shimSendThrowTypeError(b);break;case"firefox":if(!i||!i.shimPeerConnection||!d.shimFirefox){c("Firefox shim is not included in this adapter release.");return l}c("adapter.js shimming firefox.");l.browserShim=i;k.shimCreateObjectURL(b);i.shimGetUserMedia(b);i.shimSourceObject(b);i.shimPeerConnection(b);i.shimOnTrack(b);i.shimRemoveStream(b);i.shimSenderGetStats(b);i.shimReceiverGetStats(b);i.shimRTCDataChannel(b);k.shimRTCIceCandidate(b);k.shimMaxMessageSize(b);k.shimSendThrowTypeError(b);break;case"edge":if(!h||!h.shimPeerConnection||!d.shimEdge){c("MS edge shim is not included in this adapter release.");return l}c("adapter.js shimming edge.");l.browserShim=h;k.shimCreateObjectURL(b);h.shimGetUserMedia(b);h.shimPeerConnection(b);h.shimReplaceTrack(b);h.shimGetDisplayMedia(b);k.shimMaxMessageSize(b);k.shimSendThrowTypeError(b);break;case"safari":if(!j||!d.shimSafari){c("Safari shim is not included in this adapter release.");return l}c("adapter.js shimming safari.");l.browserShim=j;k.shimCreateObjectURL(b);j.shimRTCIceServerUrls(b);j.shimCreateOfferLegacy(b);j.shimCallbacksAPI(b);j.shimLocalStreamsAPI(b);j.shimRemoteStreamsAPI(b);j.shimTrackEventTransceiver(b);j.shimGetUserMedia(b);k.shimRTCIceCandidate(b);k.shimMaxMessageSize(b);k.shimSendThrowTypeError(b);break;default:c("Unsupported browser!");break}return l}}var Y=!1,aa=function(){Y||(Y=!0,X());return W.exports};b={};var Z={exports:b};function ba(){var b=aa();Z.exports=b({window:a.window})}var $=!1,ca=function(){$||($=!0,ba());return Z.exports};d=function(a){switch(a){case void 0:return ca()}};e.exports=d}),null);
__d("webrtc-adapter",["webrtc-adapter-6.4.8"],(function(a,b,c,d,e,f){e.exports=b("webrtc-adapter-6.4.8")()}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("xstate-4.7.7",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){Object.defineProperty(g,"__esModule",{value:!0}),g.STATE_DELIMITER=".",g.EMPTY_ACTIVITY_MAP={},g.DEFAULT_GUARD_TYPE="xstate.guard",g.TARGETLESS_KEY=""}var j=!1,k=function(){j||(j=!0,i());return h.exports},l={},m={exports:l};function n(){Object.defineProperty(l,"__esModule",{value:!0}),l.IS_PRODUCTION=!0}var o=!1,p=function(){o||(o=!0,n());return m.exports},q={},r={exports:q};function s(){var a=this&&this.__assign||function(){a=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return a.apply(this,arguments)},b=this&&this.__values||function(a){var b=typeof Symbol==="function"&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&typeof a.length==="number")return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(a,b){var c=typeof Symbol==="function"&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[],f;try{while((b===void 0||b-->0)&&!(d=a.next()).done)e.push(d.value)}catch(a){f={error:a}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error}}return e},d=this&&this.__spread||function(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(c(arguments[b]));return a};Object.defineProperty(q,"__esModule",{value:!0});var e=k(),f=p();function g(a){return Object.keys(a)}q.keys=g;function h(a,b,c){c===void 0&&(c=e.STATE_DELIMITER);var d=n(a,c),f=n(b,c);if(J(f))return J(d)?f===d:!1;return J(d)?d in f:g(d).every(function(a){return!(a in f)?!1:h(d[a],f[a])})}q.matchesState=h;function i(a){try{return J(a)||typeof a==="number"?""+a:a.type}catch(a){throw new Error("Events must be strings or objects with a string event.type property.")}}q.getEventType=i;function j(a){try{return J(a)||typeof a==="number"?""+a:I(a)?a.name:a.type}catch(a){throw new Error("Actions must be strings or objects with a string action.type property.")}}q.getActionType=j;function l(a,b){try{return H(a)?a:a.toString().split(b)}catch(b){throw new Error("'"+a+"' is not a valid state path.")}}q.toStatePath=l;function m(a){return typeof a==="object"&&"value"in a&&"context"in a&&"event"in a&&"_event"in a}q.isStateLike=m;function n(a,b){if(m(a))return a.value;if(H(a))return o(a);if(typeof a!=="string")return a;a=l(a,b);return o(a)}q.toStateValue=n;function o(a){if(a.length===1)return a[0];var b={},c=b;for(var d=0;d<a.length-1;d++)d===a.length-2?c[a[d]]=a[d+1]:(c[a[d]]={},c=c[a[d]]);return b}q.pathToStateValue=o;function r(a,b){var c={},d=g(a);for(var e=0;e<d.length;e++){var f=d[e];c[f]=b(a[f],f,a,e)}return c}q.mapValues=r;function s(a,c,d){var e,f,h={};try{for(var i=b(g(a)),j=i.next();!j.done;j=i.next()){var k=j.value,l=a[k];if(!d(l))continue;h[k]=c(l,k,a)}}catch(a){e={error:a}}finally{try{j&&!j.done&&(f=i["return"])&&f.call(i)}finally{if(e)throw e.error}}return h}q.mapFilterValues=s;q.path=function(a){return function(c){var d,e;c=c;try{for(var f=b(a),g=f.next();!g.done;g=f.next()){var h=g.value;c=c[h]}}catch(a){d={error:a}}finally{try{g&&!g.done&&(e=f["return"])&&e.call(f)}finally{if(d)throw d.error}}return c}};function t(a,c){return function(d){var e,f;d=d;try{for(var g=b(a),h=g.next();!h.done;h=g.next()){var i=h.value;d=d[c][i]}}catch(a){e={error:a}}finally{try{h&&!h.done&&(f=g["return"])&&f.call(g)}finally{if(e)throw e.error}}return d}}q.nestedPath=t;function u(a){if(!a)return[[]];if(J(a))return[[a]];var b=w(g(a).map(function(b){var c=a[b];return typeof c!=="string"&&(!c||!Object.keys(c).length)?[[b]]:u(a[b]).map(function(a){return[b].concat(a)})}));return b}q.toStatePaths=u;function v(a){var c,d,e={};if(a&&a.length===1&&a[0].length===1)return a[0][0];try{for(var a=b(a),f=a.next();!f.done;f=a.next()){var g=f.value,h=e;for(var i=0;i<g.length;i++){var j=g[i];if(i===g.length-2){h[j]=g[i+1];break}h[j]=h[j]||{};h=h[j]}}}catch(a){c={error:a}}finally{try{f&&!f.done&&(d=a["return"])&&d.call(a)}finally{if(c)throw c.error}}return e}q.pathsToStateValue=v;function w(a){var b;return(b=[]).concat.apply(b,d(a))}q.flatten=w;function x(a){return H(a)?a:[a]}q.toArrayStrict=x;function y(a){return a===void 0?[]:x(a)}q.toArray=y;function z(a,c,d){var e,f;if(I(a))return a(c,d.data);var h={};try{for(var i=b(g(a)),j=i.next();!j.done;j=i.next()){var k=j.value,l=a[k];I(l)?h[k]=l(c,d.data):h[k]=l}}catch(a){e={error:a}}finally{try{j&&!j.done&&(f=i["return"])&&f.call(i)}finally{if(e)throw e.error}}return h}q.mapContext=z;function A(a){return/^(done|error)\./.test(a)}q.isBuiltInEvent=A;function B(a){if(a instanceof Promise)return!0;return a!==null&&(I(a)||typeof a==="object")&&I(a.then)?!0:!1}q.isPromiseLike=B;function C(a,d){var e,f,g=c([[],[]],2),h=g[0];g=g[1];try{for(var a=b(a),i=a.next();!i.done;i=a.next()){var j=i.value;d(j)?h.push(j):g.push(j)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(f=a["return"])&&f.call(a)}finally{if(e)throw e.error}}return[h,g]}q.partition=C;function D(a,b){return r(a.states,function(a,c){if(!a)return void 0;c=(J(b)?void 0:b[c])||(a?a.current:void 0);return!c?void 0:{current:c,states:D(a,c)}})}q.updateHistoryStates=D;function E(a,b){return{current:b,states:D(a,b)}}q.updateHistoryValue=E;function F(a,c,d,e){f.IS_PRODUCTION||G(!!a,"Attempting to update undefined context");d=a?d.reduce(function(a,d){var f,h,i=d.assignment;d={state:e,action:d,_event:c};var j={};if(I(i))j=i(a,c.data,d);else try{for(var k=b(g(i)),l=k.next();!l.done;l=k.next()){var m=l.value,n=i[m];j[m]=I(n)?n(a,c.data,d):n}}catch(a){f={error:a}}finally{try{l&&!l.done&&(h=k["return"])&&h.call(k)}finally{if(f)throw f.error}}return Object.assign({},a,j)},a):a;return d}q.updateContext=F;var G=function(){};q.warn=G;f.IS_PRODUCTION||(q.warn=G=function(a,b){var c=a instanceof Error?a:void 0;if(!c&&a)return;if(console!==void 0){a=["Warning: "+b];c&&a.push(c);console.warn.apply(console,a)}});function H(a){return Array.isArray(a)}q.isArray=H;function I(a){return typeof a==="function"}q.isFunction=I;function J(a){return typeof a==="string"}q.isString=J;function K(a,b){if(!a)return void 0;if(J(a))return{type:e.DEFAULT_GUARD_TYPE,name:a,predicate:b?b[a]:void 0};return I(a)?{type:e.DEFAULT_GUARD_TYPE,name:a.name,predicate:a}:a}q.toGuard=K;function L(a){try{return"subscribe"in a&&I(a.subscribe)}catch(a){return!1}}q.isObservable=L;q.symbolObservable=function(){return typeof Symbol==="function"&&Symbol.observable||"@@observable"}();function M(a){try{return"__xstatenode"in a}catch(a){return!1}}q.isMachine=M;function N(a){return!!a&&typeof a.send==="function"}q.isActor=N;q.uniqueId=function(){var a=0;return function(){a++;return a.toString(16)}}();function O(b,c){return J(b)||typeof b==="number"?a({type:b},c):b}q.toEventObject=O;function P(b,c){if(!J(b)&&"$$type"in b&&b.$$type==="scxml")return b;b=O(b);return a({name:b.type,data:b,$$type:"scxml",type:"external"},c)}q.toSCXMLEvent=P;function Q(b,c){c=x(c).map(function(c){return typeof c==="undefined"||typeof c==="string"||M(c)?{target:c,event:b}:a(a({},c),{event:b})});return c}q.toTransitionConfigArray=Q;function R(a){return a===void 0||a===e.TARGETLESS_KEY?void 0:y(a)}q.normalizeTarget=R;function S(a,b,c){if(!f.IS_PRODUCTION){var d=a.stack?" Stacktrace was '"+a.stack+"'":"";if(a===b)console.error("Missing onError handler for invocation '"+c+"', error was '"+a+"'."+d);else{var e=b.stack?" Stacktrace was '"+b.stack+"'":"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '"+c+"'. "+("Original error: '"+a+"'. "+d+" Current error is '"+b+"'."+e))}}}q.reportUnhandledExceptionOnInvocation=S}var t=!1,u=function(){t||(t=!0,s());return r.exports},v={},w={exports:v};function x(){var a=this&&this.__values||function(a){var b=typeof Symbol==="function"&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&typeof a.length==="number")return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(v,"__esModule",{value:!0});var b=u();function c(c,d){var e,f,g;try{for(var h=a(b.keys(c)),i=h.next();!i.done;i=h.next()){var j=i.value;b.matchesState(j,d)&&(!g||d.length>g.length)&&(g=j)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(f=h["return"])&&f.call(h)}finally{if(e)throw e.error}}return c[g]}v.mapState=c}var y=!1,z=function(){y||(y=!0,x());return w.exports},A={},B={exports:A};function C(){Object.defineProperty(A,"__esModule",{value:!0}),(function(a){a.Start="xstate.start",a.Stop="xstate.stop",a.Raise="xstate.raise",a.Send="xstate.send",a.Cancel="xstate.cancel",a.NullEvent="",a.Assign="xstate.assign",a.After="xstate.after",a.DoneState="done.state",a.DoneInvoke="done.invoke",a.Log="xstate.log",a.Init="xstate.init",a.Invoke="xstate.invoke",a.ErrorExecution="error.execution",a.ErrorCommunication="error.communication",a.ErrorPlatform="error.platform",a.ErrorCustom="xstate.error",a.Update="xstate.update",a.Pure="xstate.pure"})(A.ActionTypes||(A.ActionTypes={})),(function(a){a.Parent="#_parent",a.Internal="#_internal"})(A.SpecialTargets||(A.SpecialTargets={}))}var D=!1,E=function(){D||(D=!0,C());return B.exports},F={},G={exports:F};function H(){var a=this&&this.__values||function(a){var b=typeof Symbol==="function"&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&typeof a.length==="number")return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},b=this&&this.__read||function(a,b){var c=typeof Symbol==="function"&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[],f;try{while((b===void 0||b-->0)&&!(d=a.next()).done)e.push(d.value)}catch(a){f={error:a}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error}}return e},c=this&&this.__spread||function(){for(var a=[],c=0;c<arguments.length;c++)a=a.concat(b(arguments[c]));return a};Object.defineProperty(F,"__esModule",{value:!0});var d=u();F.isLeafNode=function(a){return a.type==="atomic"||a.type==="final"};function e(a){return d.keys(a.states).map(function(b){return a.states[b]})}F.getChildren=e;function f(a){var b=[a];return F.isLeafNode(a)?b:b.concat(d.flatten(e(a).map(f)))}F.getAllStateNodes=f;function g(b,c){var d,f,g,h,j,k,l,m;b=new Set(b);b=i(b);var n=new Set(c);try{for(var c=a(n),o=c.next();!o.done;o=c.next()){var p=o.value,q=p.parent;while(q&&!n.has(q))n.add(q),q=q.parent}}catch(a){d={error:a}}finally{try{o&&!o.done&&(f=c["return"])&&f.call(c)}finally{if(d)throw d.error}}o=i(n);try{for(var c=a(n),r=c.next();!r.done;r=c.next()){var p=r.value;if(p.type==="compound"&&(!o.get(p)||!o.get(p).length))b.get(p)?b.get(p).forEach(function(a){return n.add(a)}):p.initialStateNodes.forEach(function(a){return n.add(a)});else if(p.type==="parallel")try{for(var s=(j=void 0,a(e(p))),t=s.next();!t.done;t=s.next()){var u=t.value;if(u.type==="history")continue;n.has(u)||(n.add(u),b.get(u)?b.get(u).forEach(function(a){return n.add(a)}):u.initialStateNodes.forEach(function(a){return n.add(a)}))}}catch(a){j={error:a}}finally{try{t&&!t.done&&(k=s["return"])&&k.call(s)}finally{if(j)throw j.error}}}}catch(a){g={error:a}}finally{try{r&&!r.done&&(h=c["return"])&&h.call(c)}finally{if(g)throw g.error}}try{for(var u=a(n),t=u.next();!t.done;t=u.next()){var p=t.value,q=p.parent;while(q&&!n.has(q))n.add(q),q=q.parent}}catch(a){l={error:a}}finally{try{t&&!t.done&&(m=u["return"])&&m.call(u)}finally{if(l)throw l.error}}return n}F.getConfiguration=g;function h(a,b){var c=b.get(a);if(!c)return{};if(a.type==="compound"){a=c[0];if(a){if(F.isLeafNode(a))return a.key}else return{}}var d={};c.forEach(function(a){d[a.key]=h(a,b)});return d}function i(b){var c,d,e=new Map();try{for(var b=a(b),f=b.next();!f.done;f=b.next()){var g=f.value;e.has(g)||e.set(g,[]);g.parent&&(e.has(g.parent)||e.set(g.parent,[]),e.get(g.parent).push(g))}}catch(a){c={error:a}}finally{try{f&&!f.done&&(d=b["return"])&&d.call(b)}finally{if(c)throw c.error}}return e}F.getAdjList=i;function j(a,b){b=g([a],b);return h(a,i(b))}F.getValue=j;function k(a,b){if(Array.isArray(a))return a.some(function(a){return a===b});return a instanceof Set?a.has(b):!1}F.has=k;function l(a){return d.flatten(c(new Set(a.map(function(a){return a.ownEvents}))))}F.nextEvents=l;function m(a,b){if(b.type==="compound")return e(b).some(function(b){return b.type==="final"&&k(a,b)});return b.type==="parallel"?e(b).every(function(b){return m(a,b)}):!1}F.isInFinalState=m}var I=!1,J=function(){I||(I=!0,H());return G.exports},K={},L={exports:K};function M(){Object.defineProperty(K,"__esModule",{value:!0});var a=E();K.start=a.ActionTypes.Start;K.stop=a.ActionTypes.Stop;K.raise=a.ActionTypes.Raise;K.send=a.ActionTypes.Send;K.cancel=a.ActionTypes.Cancel;K.nullEvent=a.ActionTypes.NullEvent;K.assign=a.ActionTypes.Assign;K.after=a.ActionTypes.After;K.doneState=a.ActionTypes.DoneState;K.log=a.ActionTypes.Log;K.init=a.ActionTypes.Init;K.invoke=a.ActionTypes.Invoke;K.errorExecution=a.ActionTypes.ErrorExecution;K.errorPlatform=a.ActionTypes.ErrorPlatform;K.error=a.ActionTypes.ErrorCustom;K.update=a.ActionTypes.Update;K.pure=a.ActionTypes.Pure}var N=!1,O=function(){N||(N=!0,M());return L.exports},P={},Q={exports:P};function R(){var a=this&&this.__assign||function(){a=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return a.apply(this,arguments)},b=this&&this.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.indexOf(d)<0&&(c[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols==="function")for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)b.indexOf(d[e])<0&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};Object.defineProperty(P,"__esModule",{value:!0});var c=E(),d=O();P.actionTypes=d;var e=u(),f=u();P.initEvent=e.toSCXMLEvent({type:d.init});function g(a,b){return b?b[a]||void 0:void 0}P.getActionFunction=g;function h(c,d){var f;if(e.isString(c)||typeof c==="number"){var h=g(c,d);e.isFunction(h)?f={type:c,exec:h}:h?f=h:f={type:c,exec:void 0}}else if(e.isFunction(c))f={type:c.name||c.toString(),exec:c};else{var h=g(c.type,d);if(e.isFunction(h))f=a(a({},c),{exec:h});else if(h){d=c.type;var i=b(c,["type"]);f=a(a({type:d},h),i)}else f=c}Object.defineProperty(f,"toString",{value:function(){return f.type},enumerable:!1,configurable:!0});return f}P.toActionObject=h;P.toActionObjects=function(a,b){if(!a)return[];a=f.isArray(a)?a:[a];return a.map(function(a){return h(a,b)})};function i(b){var c=h(b);return a(a({id:e.isString(b)?b:c.id},c),{type:c.type})}P.toActivityDefinition=i;function j(a){return!e.isString(a)?l(a,{to:c.SpecialTargets.Internal}):{type:d.raise,event:a}}P.raise=j;function k(a){return{type:d.raise,_event:e.toSCXMLEvent(a.event)}}P.resolveRaise=k;function l(a,b){return{to:b?b.to:void 0,type:d.send,event:e.isFunction(a)?a:e.toEventObject(a),delay:b?b.delay:void 0,id:b&&b.id!==void 0?b.id:e.isFunction(a)?a.name:e.getEventType(a)}}P.send=l;function m(b,c,d,f){var g={_event:d},h=e.toSCXMLEvent(e.isFunction(b.event)?b.event(c,d.data,g):b.event);if(e.isString(b.delay)){f=f&&f[b.delay];f=e.isFunction(f)?f(c,d.data,g):f}else f=e.isFunction(b.delay)?b.delay(c,d.data,g):b.delay;c=e.isFunction(b.to)?b.to(c,d.data,g):b.to;return a(a({},b),{to:c,_event:h,event:h.data,delay:f})}P.resolveSend=m;function n(b,d){return l(b,a(a({},d),{to:c.SpecialTargets.Parent}))}P.sendParent=n;function o(){return n(d.update)}P.sendUpdate=o;function p(b,c){return l(b,a(a({},c),{to:function(a,b,c){a=c._event;return a.origin}}))}P.respond=p;var q=function(a,b){return{context:a,event:b}};function r(a,b){a===void 0&&(a=q);return{type:d.log,label:b,expr:a}}P.log=r;P.resolveLog=function(b,c,d){return a(a({},b),{value:e.isString(b.expr)?b.expr:b.expr(c,d.data,{_event:d})})};P.cancel=function(a){return{type:d.cancel,sendId:a}};function s(a){a=i(a);return{type:c.ActionTypes.Start,activity:a,exec:void 0}}P.start=s;function t(a){a=i(a);return{type:c.ActionTypes.Stop,activity:a,exec:void 0}}P.stop=t;P.assign=function(a){return{type:d.assign,assignment:a}};function v(a){return typeof a==="object"&&"type"in a}P.isActionObject=v;function w(a,b){b=b?"#"+b:"";return c.ActionTypes.After+"("+a+")"+b}P.after=w;function x(a,b){var d=c.ActionTypes.DoneState+"."+a;a={type:d,data:b};a.toString=function(){return d};return a}P.done=x;function y(a,b){var d=c.ActionTypes.DoneInvoke+"."+a;a={type:d,data:b};a.toString=function(){return d};return a}P.doneInvoke=y;function z(a,b){var d=c.ActionTypes.ErrorPlatform+"."+a;a={type:d,data:b};a.toString=function(){return d};return a}P.error=z;function A(a){return{type:c.ActionTypes.Pure,get:a}}P.pure=A;function B(b,c){return l(function(a,b){return b},a(a({},c),{to:b}))}P.forwardTo=B;function C(b,f){return n(function(a,c,f){return{type:d.error,data:e.isFunction(b)?b(a,c,f):b}},a(a({},f),{to:c.SpecialTargets.Parent}))}P.escalate=C}var S=!1,T=function(){S||(S=!0,R());return Q.exports},U={},aa={exports:U};function ba(){var a=this&&this.__assign||function(){a=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return a.apply(this,arguments)},b=this&&this.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.indexOf(d)<0&&(c[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols==="function")for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)b.indexOf(d[e])<0&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},c=this&&this.__read||function(a,b){var c=typeof Symbol==="function"&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[],f;try{while((b===void 0||b-->0)&&!(d=a.next()).done)e.push(d.value)}catch(a){f={error:a}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error}}return e},d=this&&this.__spread||function(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(c(arguments[b]));return a};Object.defineProperty(U,"__esModule",{value:!0});var e=k(),f=u(),g=J(),h=T();function i(a,b){if(a===b)return!0;if(a===void 0||b===void 0)return!1;if(f.isString(a)||f.isString(b))return a===b;var c=f.keys(a),d=f.keys(b);return c.length===d.length&&c.every(function(c){return i(a[c],b[c])})}U.stateValuesEqual=i;function j(a){return f.isString(a)?!1:"value"in a&&"history"in a}U.isState=j;function l(b,c){var d=b.exec,e=a(a({},b),{exec:d!==void 0?function(){return d(c.context,c.event,{action:b,state:c,_event:c._event})}:void 0});return e}U.bindActionToState=l;j=function(){function a(a){this.actions=[],this.activities=e.EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=a.value,this.context=a.context,this._event=a._event,this._sessionid=a._sessionid,this.event=this._event.data,this.historyValue=a.historyValue,this.history=a.history,this.actions=a.actions||[],this.activities=a.activities||e.EMPTY_ACTIVITY_MAP,this.meta=a.meta||{},this.events=a.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=a.configuration,this.transitions=a.transitions,this.children=a.children,this.done=!!a.done,Object.defineProperty(this,"nextEvents",{get:function(){return g.nextEvents(a.configuration)}})}a.from=function(b,c){if(b instanceof a)return b.context!==c?new a({value:b.value,context:c,_event:b._event,_sessionid:null,historyValue:b.historyValue,history:b.history,actions:[],activities:b.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):b;var d=h.initEvent;return new a({value:b,context:c,_event:d,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})};a.create=function(b){return new a(b)};a.inert=function(b,c){if(b instanceof a){if(!b.actions.length)return b;var d=h.initEvent;return new a({value:b.value,context:c,_event:d,_sessionid:null,historyValue:b.historyValue,history:b.history,activities:b.activities,configuration:b.configuration,transitions:[],children:{}})}return a.from(b,c)};a.prototype.toStrings=function(a,b){var c=this;a===void 0&&(a=this.value);b===void 0&&(b=".");if(f.isString(a))return[a];var e=f.keys(a);return e.concat.apply(e,d(e.map(function(d){return c.toStrings(a[d],b).map(function(a){return d+b+a})})))};a.prototype.toJSON=function(){var a=this;a.configuration;a.transitions;a=b(a,["configuration","transitions"]);return a};a.prototype.matches=function(a){return f.matchesState(a,this.value)};return a}();U.State=j}var ca=!1,V=function(){ca||(ca=!0,ba());return aa.exports},W={},da={exports:W};function ea(){Object.defineProperty(W,"__esModule",{value:!0});function a(a){return{id:a,send:function(){return void 0},subscribe:function(){return{unsubscribe:function(){return void 0}}},toJSON:function(){return{id:a}}}}W.createNullActor=a;function b(b){var c=a(b.id);c.meta=b;return c}W.createInvocableActor=b;function c(a){try{return typeof a.send==="function"}catch(a){return!1}}W.isActor=c}var fa=!1,ga=function(){fa||(fa=!0,ea());return da.exports},X={},ha={exports:X};function ia(){var a=this&&this.__assign||function(){a=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return a.apply(this,arguments)},b=this&&this.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.indexOf(d)<0&&(c[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols==="function")for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)b.indexOf(d[e])<0&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},c=this&&this.__read||function(a,b){var c=typeof Symbol==="function"&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[],f;try{while((b===void 0||b-->0)&&!(d=a.next()).done)e.push(d.value)}catch(a){f={error:a}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error}}return e},d=this&&this.__spread||function(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(c(arguments[b]));return a},e=this&&this.__values||function(a){var b=typeof Symbol==="function"&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&typeof a.length==="number")return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(X,"__esModule",{value:!0});var f=u(),g=E(),h=u(),i=V(),j=O(),l=T(),m=p(),n=k(),o=J(),q=ga(),r="",s="#",t="*",v={},w=function(a){return a[0]===s},x=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},y=function(a,b,c){c=c.slice(0,-1).some(function(a){return!("cond"in a)&&!("in"in a)&&(f.isString(a.target)||f.isMachine(a.target))});b=b===r?"the transient event":"event '"+b+"'";f.warn(!c,"One or more transitions for "+b+" on state '"+a.id+"' are unreachable. Make sure that the default transition is the last one defined.")},z=function(){function k(b,c,g){var h=this;this.config=b;this.context=g;this.order=-1;this.__xstatenode=!0;this.__cache={events:void 0,relativeValue:new Map(),initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0};this.idMap={};this.options=Object.assign(x(),c);this.parent=this.options._parent;this.key=this.config.key||this.options._key||this.config.id||"(machine)";this.machine=this.parent?this.parent.machine:this;this.path=this.parent?this.parent.path.concat(this.key):[];this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:n.STATE_DELIMITER);this.id=this.config.id||d([this.machine.key],this.path).join(this.delimiter);this.version=this.parent?this.parent.version:this.config.version;this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&f.keys(this.config.states).length?"compound":this.config.history?"history":"atomic");m.IS_PRODUCTION||f.warn(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '+(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '"+this.type+"'`")+" in the config for state node '"+this.id+"' instead.");this.initial=this.config.initial;this.states=this.config.states?f.mapValues(this.config.states,function(b,c){b=new k(b,{_parent:h,_key:c});Object.assign(h.idMap,a((c={},c[b.id]=b,c),b.idMap));return b}):v;var i=0;function p(a){var b,c;a.order=i++;try{for(var a=e(o.getChildren(a)),d=a.next();!d.done;d=a.next()){var f=d.value;p(f)}}catch(a){b={error:a}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(b)throw b.error}}}p(this);this.history=this.config.history===!0?"shallow":this.config.history||!1;this._transient=this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(a){a=a.event;return a===r}):r in this.config.on:!1;this.strict=!!this.config.strict;this.onEntry=f.toArray(this.config.entry||this.config.onEntry).map(function(a){return l.toActionObject(a)});this.onExit=f.toArray(this.config.exit||this.config.onExit).map(function(a){return l.toActionObject(a)});this.meta=this.config.meta;this.data=this.type==="final"?this.config.data:void 0;this.invoke=f.toArray(this.config.invoke).map(function(b,c){var d;if(f.isMachine(b)){h.machine.options.services=a((d={},d[b.id]=b,d),h.machine.options.services);return{type:j.invoke,src:b.id,id:b.id}}else if(typeof b.src!=="string"){d=h.id+":invocation["+c+"]";h.machine.options.services=a((c={},c[d]=b.src,c),h.machine.options.services);return a(a({type:j.invoke,id:d},b),{src:d})}else return a(a({},b),{type:j.invoke,id:b.id||b.src,src:b.src})});this.activities=f.toArray(this.config.activities).concat(this.invoke).map(function(a){return l.toActivityDefinition(a)});this.transition=this.transition.bind(this)}k.prototype._init=function(){if(this.__cache.transitions)return;o.getAllStateNodes(this).forEach(function(a){return a.on})};k.prototype.withConfig=function(b,c){c===void 0&&(c=this.context);var d=this.options,e=d.actions,f=d.activities,g=d.guards,h=d.services;d=d.delays;return new k(this.config,{actions:a(a({},e),b.actions),activities:a(a({},f),b.activities),guards:a(a({},g),b.guards),services:a(a({},h),b.services),delays:a(a({},d),b.delays)},c)};k.prototype.withContext=function(a){return new k(this.config,this.options,a)};Object.defineProperty(k.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,type:this.type,initial:this.initial,history:this.history,states:f.mapValues(this.states,function(a){return a.definition}),on:this.on,transitions:this.transitions,onEntry:this.onEntry,onExit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.data,invoke:this.invoke}},enumerable:!0,configurable:!0});k.prototype.toJSON=function(){return this.definition};Object.defineProperty(k.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var a=this.transitions;return this.__cache.on=a.reduce(function(a,b){a[b.eventType]=a[b.eventType]||[];a[b.eventType].push(b);return a},{})},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!0,configurable:!0});k.prototype.getCandidates=function(a){if(this.__cache.candidates[a])return this.__cache.candidates[a];var b=a===r,c=this.transitions.filter(function(c){var d=c.eventType===a;return b?d:d||c.eventType===t});this.__cache.candidates[a]=c;return c};k.prototype.getDelayedTransitions=function(){var b=this,c=this.config.after;if(!c)return[];var d=function(a,c){c=f.isFunction(a)?b.id+":delay["+c+"]":a;c=l.after(c,b.id);b.onEntry.push(l.send(c,{delay:a}));b.onExit.push(l.cancel(c));return c},e=f.isArray(c)?c.map(function(b,c){c=d(b.delay,c);return a(a({},b),{event:c})}):f.flatten(f.keys(c).map(function(b,e){var g=c[b];g=f.isString(g)?{target:g}:g;var h=isNaN(+b)?b:+b,i=d(h,e);return f.toArray(g).map(function(b){return a(a({},b),{event:i,delay:h})})}));return e.map(function(c){var d=c.delay;return a(a({},b.formatTransition(c)),{delay:d})})};k.prototype.getStateNodes=function(a){var b,c=this;if(!a)return[];var d=a instanceof i.State?a.value:f.toStateValue(a,this.delimiter);if(f.isString(d)){a=this.getStateNode(d).initial;return a!==void 0?this.getStateNodes((b={},b[d]=a,b)):[this.states[d]]}a=f.keys(d);b=a.map(function(a){return c.getStateNode(a)});return b.concat(a.reduce(function(a,b){b=c.getStateNode(b).getStateNodes(d[b]);return a.concat(b)},[]))};k.prototype.handles=function(a){a=f.getEventType(a);return this.events.includes(a)};k.prototype.resolveState=function(b){var c=Array.from(o.getConfiguration([],this.getStateNodes(b.value)));return new i.State(a(a({},b),{value:this.resolve(b.value),configuration:c}))};k.prototype.transitionLeafNode=function(a,b,c){a=this.getStateNode(a);a=a.next(b,c);return!a||!a.transitions.length?this.next(b,c):a};k.prototype.transitionCompoundNode=function(a,b,c){var d=f.keys(a),e=this.getStateNode(d[0]);e=e._transition(a[d[0]],b,c);return!e||!e.transitions.length?this.next(b,c):e};k.prototype.transitionParallelNode=function(a,b,c){var d,g,h={};try{for(var i=e(f.keys(a)),j=i.next();!j.done;j=i.next()){var k=j.value,l=a[k];if(!l)continue;var m=this.getStateNode(k);m=m._transition(l,b,c);m&&(h[k]=m)}}catch(a){d={error:a}}finally{try{j&&!j.done&&(g=i["return"])&&g.call(i)}finally{if(d)throw d.error}}l=f.keys(h).map(function(a){return h[a]});k=f.flatten(l.map(function(a){return a.transitions}));m=l.some(function(a){return a.transitions.length>0});if(!m)return this.next(b,c);a=f.flatten(l.map(function(a){return a.entrySet}));j=f.flatten(f.keys(h).map(function(a){return h[a].configuration}));return{transitions:k,entrySet:a,exitSet:f.flatten(l.map(function(a){return a.exitSet})),configuration:j,source:b,actions:f.flatten(f.keys(h).map(function(a){return h[a].actions}))}};k.prototype._transition=function(a,b,c){if(f.isString(a))return this.transitionLeafNode(a,b,c);return f.keys(a).length===1?this.transitionCompoundNode(a,b,c):this.transitionParallelNode(a,b,c)};k.prototype.next=function(a,b){var c,g,i=this,j=b.name,k=[],l=[],m;try{for(var n=e(this.getCandidates(j)),o=n.next();!o.done;o=n.next()){var p=o.value,q=p.cond,r=p["in"],s=a.context;r=r?f.isString(r)&&w(r)?a.matches(f.toStateValue(this.getStateNodeById(r).path,this.delimiter)):h.matchesState(f.toStateValue(r,this.delimiter),f.path(this.path.slice(0,-2))(a.value)):!0;var t=!1;try{t=!q||this.evaluateGuard(q,s,b,a)}catch(a){throw new Error("Unable to evaluate guard '"+(q.name||q.type)+"' in transition for event '"+j+"' in state node '"+this.id+"':\n"+a.message)}if(t&&r){p.target!==void 0&&(l=p.target);k.push.apply(k,d(p.actions));m=p;break}}}catch(a){c={error:a}}finally{try{o&&!o.done&&(g=n["return"])&&g.call(n)}finally{if(c)throw c.error}}if(!m)return void 0;if(!l.length)return{transitions:[m],entrySet:[],exitSet:[],configuration:a.value?[this]:[],source:a,actions:k};s=f.flatten(l.map(function(b){return i.getRelativeStateNodes(b,a.historyValue)}));q=!!m.internal;t=q?[]:f.flatten(s.map(function(a){return i.nodesFromChild(a)}));return{transitions:[m],entrySet:t,exitSet:q?[]:[this],configuration:s,source:a,actions:k}};k.prototype.nodesFromChild=function(a){if(a.escapes(this))return[];var b=[];a=a;while(a&&a!==this)b.push(a),a=a.parent;b.push(this);return b};k.prototype.escapes=function(a){if(this===a)return!1;var b=this.parent;while(b){if(b===a)return!1;b=b.parent}return!0};k.prototype.evaluateGuard=function(a,b,c,d){var e=this.machine.options.guards;d={state:d,cond:a,_event:c};if(a.type===n.DEFAULT_GUARD_TYPE)return a.predicate(b,c.data,d);e=e[a.type];if(!e)throw new Error("Guard '"+a.type+"' is not implemented on machine '"+this.machine.id+"'.");return e(b,c.data,d)};k.prototype.getActions=function(a,b,g,h){var i,j,k,m;h=o.getConfiguration([],h?this.getStateNodes(h.value):[this]);var n=a.configuration.length?o.getConfiguration(h,a.configuration):h;try{for(var p=e(n),q=p.next();!q.done;q=p.next()){var r=q.value;o.has(h,r)||a.entrySet.push(r)}}catch(a){i={error:a}}finally{try{q&&!q.done&&(j=p["return"])&&j.call(p)}finally{if(i)throw i.error}}try{for(var q=e(h),p=q.next();!p.done;p=q.next()){var r=p.value;(!o.has(n,r)||o.has(a.exitSet,r.parent))&&a.exitSet.push(r)}}catch(a){k={error:a}}finally{try{p&&!p.done&&(m=q["return"])&&m.call(q)}finally{if(k)throw k.error}}a.source||(a.exitSet=[],a.entrySet.push(this));h=f.flatten(a.entrySet.map(function(c){var d=[];if(c.type!=="final")return d;var e=c.parent;d.push(l.done(c.id,c.data),l.done(e.id,c.data?f.mapContext(c.data,b,g):void 0));if(e.parent){c=e.parent;c.type==="parallel"&&(o.getChildren(c).every(function(b){return o.isInFinalState(a.configuration,b)})&&d.push(l.done(c.id,c.data)))}return d}));a.exitSet.sort(function(a,b){return b.order-a.order});a.entrySet.sort(function(a,b){return a.order-b.order});n=new Set(a.entrySet);r=new Set(a.exitSet);p=c([f.flatten(Array.from(n).map(function(a){return d(a.activities.map(function(a){return l.start(a)}),a.onEntry)})).concat(h.map(l.raise)),f.flatten(Array.from(r).map(function(a){return d(a.onExit,a.activities.map(function(a){return l.stop(a)}))}))],2);q=p[0];n=p[1];h=l.toActionObjects(n.concat(a.actions).concat(q),this.machine.options.actions);return h};k.prototype.transition=function(a,b,c){a===void 0&&(a=this.initialState);b=f.toSCXMLEvent(b);var e;if(a instanceof i.State)e=c===void 0?a:this.resolveState(i.State.from(a,c));else{a=f.isString(a)?this.resolve(f.pathToStateValue(this.getResolvedPath(a))):this.resolve(a);c=c?c:this.machine.context;e=this.resolveState(i.State.from(a,c))}if(!m.IS_PRODUCTION&&b.name===t)throw new Error("An event cannot have the wildcard type ('"+t+"')");if(this.strict&&(!this.events.includes(b.name)&&!f.isBuiltInEvent(b.name)))throw new Error("Machine '"+this.id+"' does not accept event '"+b.name+"'");a=this._transition(e.value,e,b)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:e,actions:[]};c=o.getConfiguration([],this.getStateNodes(e.value));c=a.configuration.length?o.getConfiguration(c,a.configuration):c;a.configuration=d(c);return this.resolveTransition(a,e,b)};k.prototype.resolveRaisedTransition=function(a,b,c){var e=a.actions;a=this.transition(a,b);a._event=c;a.event=c.data;(b=a.actions).unshift.apply(b,d(e));return a};k.prototype.resolveTransition=function(b,d,h,k){var n,p,r=this;h===void 0&&(h=l.initEvent);k===void 0&&(k=this.machine.context);var s=b.configuration,t=!d||b.transitions.length>0;t=t?o.getValue(this.machine,s):void 0;var u=d?d.historyValue?d.historyValue:b.source?this.machine.historyValue(d.value):void 0:void 0;k=d?d.context:k;var v=this.getActions(b,k,h,d),w=d?a({},d.activities):{};try{for(var x=e(v),y=x.next();!y.done;y=x.next()){var z=y.value;z.type===j.start?w[z.activity.type]=z:z.type===j.stop&&(w[z.activity.type]=!1)}}catch(a){n={error:a}}finally{try{y&&!y.done&&(p=x["return"])&&p.call(x)}finally{if(n)throw n.error}}z=c(f.partition(v,function(a){return a.type===j.assign}),2);y=z[0];x=z[1];var A=y.length?f.updateContext(k,h,y,d):k;v=f.flatten(x.map(function(a){switch(a.type){case j.raise:return l.resolveRaise(a);case j.send:var b=l.resolveSend(a,A,h,r.machine.options.delays);m.IS_PRODUCTION||f.warn(!f.isString(a.delay)||typeof b.delay==="number","No delay reference for delay expression '"+a.delay+"' was found on machine '"+r.machine.id+"'");return b;case j.log:return l.resolveLog(a,A,h);case j.pure:return a.get(A,h.data)||[];default:return l.toActionObject(a,r.options.actions)}}));z=c(f.partition(v,function(a){return a.type===j.raise||a.type===j.send&&a.to===g.SpecialTargets.Internal}),2);k=z[0];x=z[1];z=v.filter(function(a){return a.type===j.start&&a.activity.type===j.invoke});v=z.reduce(function(b,a){b[a.activity.id]=q.createInvocableActor(a.activity);return b},d?a({},d.children):{});z=t?b.configuration:d?d.configuration:[];var B=z.reduce(function(a,b){b.meta!==void 0&&(a[b.id]=b.meta);return a},{}),C=o.isInFinalState(z,this);u=new i.State({value:t||d.value,context:A,_event:h,_sessionid:d?d._sessionid:null,historyValue:t?u?f.updateHistoryValue(u,t):void 0:d?d.historyValue:void 0,history:!t||b.source?d:void 0,actions:t?x:[],activities:t?w:d?d.activities:{},meta:t?B:d?d.meta:void 0,events:[],configuration:z,transitions:b.transitions,children:v,done:C});u.changed=h.name===j.update||!!y.length;x=u.history;x&&delete x.history;if(!t)return u;w=u;if(!C){B=this._transient||s.some(function(a){return a._transient});B&&(w=this.resolveRaisedTransition(w,{type:j.nullEvent},h));while(k.length){d=k.shift();w=this.resolveRaisedTransition(w,d._event,h)}}z=w.changed||(x?!!w.actions.length||!!y.length||typeof x.value!==typeof w.value||!i.stateValuesEqual(w.value,x.value):void 0);w.changed=z;w.historyValue=u.historyValue;w.history=x;return w};k.prototype.getStateNode=function(a){if(w(a))return this.machine.getStateNodeById(a);if(!this.states)throw new Error("Unable to retrieve child state '"+a+"' from '"+this.id+"'; no child states exist.");var b=this.states[a];if(!b)throw new Error("Child state '"+a+"' does not exist on '"+this.id+"'");return b};k.prototype.getStateNodeById=function(a){a=w(a)?a.slice(s.length):a;if(a===this.id)return this;var b=this.machine.idMap[a];if(!b)throw new Error("Child state node '#"+a+"' does not exist on machine '"+this.id+"'");return b};k.prototype.getStateNodeByPath=function(a){if(typeof a==="string"&&w(a))try{return this.getStateNodeById(a.slice(1))}catch(a){}a=f.toStatePath(a,this.delimiter).slice();var b=this;while(a.length){var c=a.shift();if(!c.length)break;b=b.getStateNode(c)}return b};k.prototype.resolve=function(a){var b,c=this;if(!a)return this.initialStateValue||v;switch(this.type){case"parallel":return f.mapValues(this.initialStateValue,function(b,d){return b?c.getStateNode(d).resolve(a[d]||b):v});case"compound":if(f.isString(a)){var d=this.getStateNode(a);return d.type==="parallel"||d.type==="compound"?(b={},b[a]=d.initialStateValue,b):a}return!f.keys(a).length?this.initialStateValue||{}:f.mapValues(a,function(a,b){return a?c.getStateNode(b).resolve(a):v});default:return a||v}};k.prototype.getResolvedPath=function(a){if(w(a)){var b=this.machine.idMap[a.slice(s.length)];if(!b)throw new Error("Unable to find state node '"+a+"'");return b.path}return f.toStatePath(a,this.delimiter)};Object.defineProperty(k.prototype,"initialStateValue",{get:function(){var a;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var b;if(this.type==="parallel")b=f.mapFilterValues(this.states,function(a){return a.initialStateValue||v},function(a){return!(a.type==="history")});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '"+this.initial+"' not found on '"+this.key+"'");b=o.isLeafNode(this.states[this.initial])?this.initial:(a={},a[this.initial]=this.states[this.initial].initialStateValue,a)}this.__cache.initialStateValue=b;return this.__cache.initialStateValue},enumerable:!0,configurable:!0});k.prototype.getInitialState=function(a,b){a=this.getStateNodes(a);return this.resolveTransition({configuration:a,entrySet:a,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,void 0,b)};Object.defineProperty(k.prototype,"initialState",{get:function(){this._init();var a=this.initialStateValue;if(!a)throw new Error("Cannot retrieve initial state from simple state '"+this.id+"'.");return this.getInitialState(a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"target",{get:function(){var a;if(this.type==="history"){var b=this.config;f.isString(b.target)?a=w(b.target)?f.pathToStateValue(this.machine.getStateNodeById(b.target).path.slice(this.path.length-1)):b.target:a=b.target}return a},enumerable:!0,configurable:!0});k.prototype.getRelativeStateNodes=function(a,b,c){c===void 0&&(c=!0);return c?a.type==="history"?a.resolveHistory(b):a.initialStateNodes:[a]};Object.defineProperty(k.prototype,"initialStateNodes",{get:function(){var a=this;if(o.isLeafNode(this))return[this];if(this.type==="compound"&&!this.initial){m.IS_PRODUCTION||f.warn(!1,"Compound state node '"+this.id+"' has no initial state.");return[this]}var b=f.toStatePaths(this.initialStateValue);return f.flatten(b.map(function(b){return a.getFromRelativePath(b)}))},enumerable:!0,configurable:!0});k.prototype.getFromRelativePath=function(a){if(!a.length)return[this];a=c(a);var b=a[0];a=a.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '"+b+"' from node with no states");var d=this.getStateNode(b);if(d.type==="history")return d.resolveHistory();if(!this.states[b])throw new Error("Child state '"+b+"' does not exist on '"+this.id+"'");return this.states[b].getFromRelativePath(a)};k.prototype.historyValue=function(a){return!f.keys(this.states).length?void 0:{current:a||this.initialStateValue,states:f.mapFilterValues(this.states,function(b,c){if(!a)return b.historyValue();c=f.isString(a)?void 0:a[c];return b.historyValue(c||b.initialStateValue)},function(a){return!a.history})}};k.prototype.resolveHistory=function(a){var b=this;if(this.type!=="history")return[this];var c=this.parent;if(!a){var d=this.target;return d?f.flatten(f.toStatePaths(d).map(function(a){return c.getFromRelativePath(a)})):c.initialStateNodes}d=f.nestedPath(c.path,"states")(a).current;return f.isString(d)?[c.getStateNode(d)]:f.flatten(f.toStatePaths(d).map(function(a){return b.history==="deep"?c.getFromRelativePath(a):[c.states[a[0]]]}))};Object.defineProperty(k.prototype,"stateIds",{get:function(){var a=this,b=f.flatten(f.keys(this.states).map(function(b){return a.states[b].stateIds}));return[this.id].concat(b)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"events",{get:function(){var a,b,c,d;if(this.__cache.events)return this.__cache.events;var g=this.states,h=new Set(this.ownEvents);if(g)try{for(var i=e(f.keys(g)),j=i.next();!j.done;j=i.next()){var k=j.value;k=g[k];if(k.states)try{for(var k=(c=void 0,e(k.events)),l=k.next();!l.done;l=k.next()){var m=l.value;h.add(""+m)}}catch(a){c={error:a}}finally{try{l&&!l.done&&(d=k["return"])&&d.call(k)}finally{if(c)throw c.error}}}}catch(b){a={error:b}}finally{try{j&&!j.done&&(b=i["return"])&&b.call(i)}finally{if(a)throw a.error}}return this.__cache.events=Array.from(h)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"ownEvents",{get:function(){var a=new Set(this.transitions.filter(function(a){return!(!a.target&&!a.actions.length&&a.internal)}).map(function(a){return a.eventType}));return Array.from(a)},enumerable:!0,configurable:!0});k.prototype.resolveTarget=function(a){var b=this;return a===void 0?void 0:a.map(function(a){if(!f.isString(a))return a;var c=a[0]===b.delimiter;if(c&&!b.parent)return b.getStateNodeByPath(a.slice(1));c=c?b.key+a:a;if(b.parent)try{a=b.parent.getStateNodeByPath(c);return a}catch(a){throw new Error("Invalid transition definition for state node '"+b.id+"':\n"+a.message)}else return b.getStateNodeByPath(c)})};k.prototype.formatTransition=function(b){var c=this,d=f.normalizeTarget(b.target),e="internal"in b?b.internal:d?d.some(function(a){return f.isString(a)&&a[0]===c.delimiter}):!0,g=this.machine.options.guards;d=this.resolveTarget(d);return a(a({},b),{actions:l.toActionObjects(f.toArray(b.actions)),cond:f.toGuard(b.cond,g),target:d,source:this,internal:e,eventType:b.event})};k.prototype.formatTransitions=function(){var a,c,g=this,h;if(!this.config.on)h=[];else if(Array.isArray(this.config.on))h=this.config.on;else{var i=this.config.on,j=t,k=i[j];k=k===void 0?[]:k;var n=b(i,[typeof j==="symbol"?j:j+""]);h=f.flatten(f.keys(n).map(function(a){var b=f.toTransitionConfigArray(a,n[a]);m.IS_PRODUCTION||y(g,a,b);return b}).concat(f.toTransitionConfigArray(t,k)))}i=this.config.onDone?f.toTransitionConfigArray(String(l.done(this.id)),this.config.onDone):[];j=f.flatten(this.invoke.map(function(a){var b=[];a.onDone&&b.push.apply(b,d(f.toTransitionConfigArray(String(l.doneInvoke(a.id)),a.onDone)));a.onError&&b.push.apply(b,d(f.toTransitionConfigArray(String(l.error(a.id)),a.onError)));return b}));k=this.after;i=f.flatten(d(i,j,h).map(function(a){return f.toArray(a).map(function(a){return g.formatTransition(a)})}));try{for(var j=e(k),h=j.next();!h.done;h=j.next()){k=h.value;i.push(k)}}catch(b){a={error:b}}finally{try{h&&!h.done&&(c=j["return"])&&c.call(j)}finally{if(a)throw a.error}}return i};return k}();X.StateNode=z}var ja=!1,ka=function(){ja||(ja=!0,ia());return ha.exports},Y={},la={exports:Y};function ma(){Object.defineProperty(Y,"__esModule",{value:!0});var a=ka();function b(b,c,d){d===void 0&&(d=b.context);d=typeof d==="function"?d():d;return new a.StateNode(b,c,d)}Y.Machine=b;function c(b,c){var d=typeof b.context==="function"?b.context():b.context;return new a.StateNode(b,c,d)}Y.createMachine=c}var na=!1,oa=function(){na||(na=!0,ma());return la.exports},pa={},qa={exports:pa};function ra(){var a=this&&this.__assign||function(){a=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return a.apply(this,arguments)};Object.defineProperty(pa,"__esModule",{value:!0});var b={deferEvents:!1},c=function(){function c(c){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=a(a({},b),c)}c.prototype.initialize=function(a){this.initialized=!0;if(a){if(!this.options.deferEvents){this.schedule(a);return}this.process(a)}this.flushEvents()};c.prototype.schedule=function(a){if(!this.initialized||this.processingEvent){this.queue.push(a);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(a);this.flushEvents()};c.prototype.clear=function(){this.queue=[]};c.prototype.flushEvents=function(){var a=this.queue.shift();while(a)this.process(a),a=this.queue.shift()};c.prototype.process=function(a){this.processingEvent=!0;try{a()}catch(a){this.clear();throw a}finally{this.processingEvent=!1}};return c}();pa.Scheduler=c}var sa=!1,ta=function(){sa||(sa=!0,ra());return qa.exports},ua={},va={exports:ua};function wa(){Object.defineProperty(ua,"__esModule",{value:!0});var a=new Map(),b=0;ua.registry={bookId:function(){return"x:"+b++},register:function(b,c){a.set(b,c);return b},get:function(b){return a.get(b)},free:function(b){a["delete"](b)}}}var xa=!1,ya=function(){xa||(xa=!0,wa());return va.exports},za={},Aa={exports:za};function Ba(){Object.defineProperty(za,"__esModule",{value:!0});var a=p();function b(){var a=window;return a.__xstate__?a.__xstate__:void 0}function c(c){if(a.IS_PRODUCTION||typeof window==="undefined")return;var d=b();d&&d.register(c)}za.registerService=c}var Ca=!1,Da=function(){Ca||(Ca=!0,Ba());return Aa.exports},Z={},Ea={exports:Z};function Fa(){var b=this&&this.__assign||function(){b=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return b.apply(this,arguments)},c=this&&this.__values||function(a){var b=typeof Symbol==="function"&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&typeof a.length==="number")return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},d=this&&this.__read||function(a,b){var c=typeof Symbol==="function"&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[],f;try{while((b===void 0||b-->0)&&!(d=a.next()).done)e.push(d.value)}catch(a){f={error:a}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error}}return e},e=this&&this.__spread||function(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(d(arguments[b]));return a};Object.defineProperty(Z,"__esModule",{value:!0});var f=E(),g=V(),h=O(),i=T(),j=p(),k=u(),l=ta(),m=ga(),n=J(),o=ya(),q=Da(),r={sync:!1,autoForward:!1},s=function(){var a=[];return function(b,c){b&&a.push(b);c=c(b||a[a.length-1]);b&&a.pop();return c}}(),t;(function(a){a[a.NotStarted=0]="NotStarted",a[a.Running=1]="Running",a[a.Stopped=2]="Stopped"})(t||(t={}));var v=function(){function d(a,c){var e=this;c===void 0&&(c=d.defaultOptions);this.machine=a;this.scheduler=new l.Scheduler();this.delayedEventsMap={};this.listeners=new Set();this.contextListeners=new Set();this.stopListeners=new Set();this.doneListeners=new Set();this.eventListeners=new Set();this.sendListeners=new Set();this.initialized=!1;this._status=t.NotStarted;this.children=new Map();this.forwardTo=new Set();this.init=this.start;this.send=function(a,b){if(k.isArray(a)){e.batch(a);return e.state}var c=k.toSCXMLEvent(k.toEventObject(a,b));if(e._status===t.Stopped){j.IS_PRODUCTION||k.warn(!1,'Event "'+c.name+'" was sent to stopped service "'+e.machine.id+'". This service has already reached its final state, and will not transition.\nEvent: '+JSON.stringify(c.data));return e.state}if(e._status===t.NotStarted&&e.options.deferEvents)j.IS_PRODUCTION||k.warn(!1,'Event "'+c.name+'" was sent to uninitialized service "'+e.machine.id+'" and is deferred. Make sure .start() is called for this service.\nEvent: '+JSON.stringify(c.data));else if(e._status!==t.Running)throw new Error('Event "'+c.name+'" was sent to uninitialized service "'+e.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: '+JSON.stringify(c.data));e.scheduler.schedule(function(){e.forward(c);var a=e.nextState(c);e.update(a,c)});return e._state};this.sendTo=function(a,c){var d=e.parent&&(c===f.SpecialTargets.Parent||e.parent.id===c),g=d?e.parent:m.isActor(c)?c:e.children.get(c)||o.registry.get(c);if(!g){if(!d)throw new Error("Unable to send event to child '"+c+"' from service '"+e.id+"'.");j.IS_PRODUCTION||k.warn(!1,"Service '"+e.id+"' has no parent: unable to send event "+a.type);return}"machine"in g?g.send(b(b({},a),{name:a.name===h.error?""+i.error(e.id):a.name,origin:e.sessionId})):g.send(a.data)};c=b(b({},d.defaultOptions),c);var g=c.clock,n=c.logger,p=c.parent,q=c.id;q=q!==void 0?q:a.id;this.id=q;this.logger=n;this.clock=g;this.parent=p;this.options=c;this.scheduler=new l.Scheduler({deferEvents:this.options.deferEvents});this.sessionId=o.registry.bookId()}Object.defineProperty(d.prototype,"initialState",{get:function(){var a=this;return this._initialState?this._initialState:s(this,function(){a._initialState=a.machine.initialState;return a._initialState})},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"state",{get:function(){j.IS_PRODUCTION||k.warn(this._status!==t.NotStarted,"Attempted to read state from uninitialized service '"+this.id+"'. Make sure the service is started first.");return this._state},enumerable:!0,configurable:!0});d.prototype.execute=function(a,b){var d,e;try{for(var f=c(a.actions),g=f.next();!g.done;g=f.next()){var h=g.value;this.exec(h,a,b)}}catch(a){d={error:a}}finally{try{g&&!g.done&&(e=f["return"])&&e.call(f)}finally{if(d)throw d.error}}};d.prototype.update=function(a,b){var d,e,f,g,h,j,l,m,o=this;a._sessionid=this.sessionId;this._state=a;this.options.execute&&this.execute(this.state);this.devTools&&this.devTools.send(b.data,a);if(a.event)try{for(var p=c(this.eventListeners),q=p.next();!q.done;q=p.next()){var r=q.value;r(a.event)}}catch(a){d={error:a}}finally{try{q&&!q.done&&(e=p["return"])&&e.call(p)}finally{if(d)throw d.error}}try{for(var q=c(this.listeners),p=q.next();!p.done;p=q.next()){var r=p.value;r(a,a.event)}}catch(a){f={error:a}}finally{try{p&&!p.done&&(g=q["return"])&&g.call(q)}finally{if(f)throw f.error}}try{for(var p=c(this.contextListeners),q=p.next();!q.done;q=p.next()){var s=q.value;s(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(a){h={error:a}}finally{try{q&&!q.done&&(j=p["return"])&&j.call(p)}finally{if(h)throw h.error}}s=n.isInFinalState(a.configuration||[],this.machine);if(this.state.configuration&&s){q=a.configuration.find(function(a){return a.type==="final"&&a.parent===o.machine});p=q&&q.data?k.mapContext(q.data,a.context,b):void 0;try{for(var s=c(this.doneListeners),q=s.next();!q.done;q=s.next()){var r=q.value;r(i.doneInvoke(this.id,p))}}catch(a){l={error:a}}finally{try{q&&!q.done&&(m=s["return"])&&m.call(s)}finally{if(l)throw l.error}}this.stop()}};d.prototype.onTransition=function(a){this.listeners.add(a);this._status===t.Running&&a(this.state,this.state.event);return this};d.prototype.subscribe=function(a,b,c){var d=this;if(!a)return{unsubscribe:function(){return void 0}};var e,f=c;typeof a==="function"?e=a:(e=a.next.bind(a),f=a.complete.bind(a));this.listeners.add(e);this._status===t.Running&&e(this.state);f&&this.onDone(f);return{unsubscribe:function(){e&&d.listeners["delete"](e),f&&d.doneListeners["delete"](f)}}};d.prototype.onEvent=function(a){this.eventListeners.add(a);return this};d.prototype.onSend=function(a){this.sendListeners.add(a);return this};d.prototype.onChange=function(a){this.contextListeners.add(a);return this};d.prototype.onStop=function(a){this.stopListeners.add(a);return this};d.prototype.onDone=function(a){this.doneListeners.add(a);return this};d.prototype.off=function(a){this.listeners["delete"](a);this.eventListeners["delete"](a);this.sendListeners["delete"](a);this.stopListeners["delete"](a);this.doneListeners["delete"](a);this.contextListeners["delete"](a);return this};d.prototype.start=function(a){var b=this;if(this._status===t.Running)return this;o.registry.register(this.sessionId,this);this.initialized=!0;this._status=t.Running;var c=a===void 0?this.initialState:s(this,function(){return g.isState(a)?b.machine.resolveState(a):b.machine.resolveState(g.State.from(a,b.machine.context))});this.options.devTools&&this.attachDev();this.scheduler.initialize(function(){b.update(c,i.initEvent)});return this};d.prototype.stop=function(){var a,b,d,e,f,g,h,i,j,l;try{for(var m=c(this.listeners),n=m.next();!n.done;n=m.next()){var p=n.value;this.listeners["delete"](p)}}catch(b){a={error:b}}finally{try{n&&!n.done&&(b=m["return"])&&b.call(m)}finally{if(a)throw a.error}}try{for(var n=c(this.stopListeners),m=n.next();!m.done;m=n.next()){var p=m.value;p();this.stopListeners["delete"](p)}}catch(a){d={error:a}}finally{try{m&&!m.done&&(e=n["return"])&&e.call(n)}finally{if(d)throw d.error}}try{for(var m=c(this.contextListeners),n=m.next();!n.done;n=m.next()){var p=n.value;this.contextListeners["delete"](p)}}catch(a){f={error:a}}finally{try{n&&!n.done&&(g=m["return"])&&g.call(m)}finally{if(f)throw f.error}}try{for(var n=c(this.doneListeners),m=n.next();!m.done;m=n.next()){var p=m.value;this.doneListeners["delete"](p)}}catch(a){h={error:a}}finally{try{m&&!m.done&&(i=n["return"])&&i.call(n)}finally{if(h)throw h.error}}this.children.forEach(function(a){k.isFunction(a.stop)&&a.stop()});try{for(var p=c(k.keys(this.delayedEventsMap)),m=p.next();!m.done;m=p.next()){n=m.value;this.clock.clearTimeout(this.delayedEventsMap[n])}}catch(a){j={error:a}}finally{try{m&&!m.done&&(l=p["return"])&&l.call(p)}finally{if(j)throw j.error}}this.scheduler.clear();this.initialized=!1;this._status=t.Stopped;o.registry.free(this.sessionId);return this};d.prototype.batch=function(a){var b=this;if(this._status===t.NotStarted&&this.options.deferEvents)j.IS_PRODUCTION||k.warn(!1,a.length+' event(s) were sent to uninitialized service "'+this.machine.id+'" and are deferred. Make sure .start() is called for this service.\nEvent: '+JSON.stringify(event));else if(this._status!==t.Running)throw new Error(a.length+' event(s) were sent to uninitialized service "'+this.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.');this.scheduler.schedule(function(){var d,f,h=b.state,i=!1,j=[],l=function(a){var c=k.toSCXMLEvent(a);b.forward(c);h=s(b,function(){return b.machine.transition(h,c)});j.push.apply(j,e(h.actions.map(function(a){return g.bindActionToState(a,h)})));i=i||!!h.changed};try{for(var m=c(a),n=m.next();!n.done;n=m.next()){var o=n.value;l(o)}}catch(a){d={error:a}}finally{try{n&&!n.done&&(f=m["return"])&&f.call(m)}finally{if(d)throw d.error}}h.changed=i;h.actions=j;b.update(h,k.toSCXMLEvent(a[a.length-1]))})};d.prototype.sender=function(a){return this.send.bind(this,a)};d.prototype.nextState=function(a){var b=this,c=k.toSCXMLEvent(a);if(c.name.indexOf(h.errorPlatform)===0&&!this.state.nextEvents.some(function(a){return a.indexOf(h.errorPlatform)===0}))throw c.data.data;a=s(this,function(){return b.machine.transition(b.state,c)});return a};d.prototype.forward=function(a){var b,d;try{for(var e=c(this.forwardTo),f=e.next();!f.done;f=e.next()){var g=f.value,h=this.children.get(g);if(!h)throw new Error("Unable to forward event '"+a+"' from interpreter '"+this.id+"' to nonexistant child '"+g+"'.");h.send(a)}}catch(a){b={error:a}}finally{try{f&&!f.done&&(d=e["return"])&&d.call(e)}finally{if(b)throw b.error}}};d.prototype.defer=function(a){var b=this;this.delayedEventsMap[a.id]=this.clock.setTimeout(function(){a.to?b.sendTo(a._event,a.to):b.send(a._event)},a.delay)};d.prototype.cancel=function(a){this.clock.clearTimeout(this.delayedEventsMap[a]),delete this.delayedEventsMap[a]};d.prototype.exec=function(a,b,c){var d=b.context;b=b._event;c=i.getActionFunction(a.type,c)||a.exec;c=k.isFunction(c)?c:c?c.exec:a.exec;if(c)try{return c(d,b.data,{action:a,state:this.state,_event:b})}catch(a){this.parent&&this.parent.send({type:"xstate.error",data:a});throw a}switch(a.type){case h.send:c=a;if(typeof c.delay==="number"){this.defer(c);return}else c.to?this.sendTo(c._event,c.to):this.send(c._event);break;case h.cancel:this.cancel(a.sendId);break;case h.start:c=a.activity;if(!this.state.activities[c.type])break;if(c.type===f.ActionTypes.Invoke){var e=this.machine.options.services?this.machine.options.services[c.src]:void 0,g=c.id,l=c.data;j.IS_PRODUCTION||k.warn(!("forward"in c),"`forward` property is deprecated (found in invocation of '"+c.src+"' in in machine '"+this.machine.id+"'). Please use `autoForward` instead.");var m="autoForward"in c?c.autoForward:!!c.forward;if(!e){j.IS_PRODUCTION||k.warn(!1,"No service found for invocation '"+c.src+"' in machine '"+this.machine.id+"'.");return}e=k.isFunction(e)?e(d,b.data):e;k.isPromiseLike(e)?this.state.children[g]=this.spawnPromise(Promise.resolve(e),g):k.isFunction(e)?this.state.children[g]=this.spawnCallback(e,g):k.isObservable(e)?this.state.children[g]=this.spawnObservable(e,g):k.isMachine(e)&&(this.state.children[g]=this.spawnMachine(l?e.withContext(k.mapContext(l,d,b)):e,{id:g,autoForward:m}))}else this.spawnActivity(c);break;case h.stop:this.stopChild(a.activity.id);break;case h.log:l=a.label;d=a.value;l?this.logger(l,d):this.logger(d);break;default:j.IS_PRODUCTION||k.warn(!1,"No implementation found for action type '"+a.type+"'");break}return void 0};d.prototype.stopChild=function(a){var b=this.children.get(a);if(!b)return;this.children["delete"](a);this.forwardTo["delete"](a);delete this.state.children[a];k.isFunction(b.stop)&&b.stop()};d.prototype.spawn=function(a,c,d){if(k.isPromiseLike(a))return this.spawnPromise(Promise.resolve(a),c);else if(k.isFunction(a))return this.spawnCallback(a,c);else if(m.isActor(a))return this.spawnActor(a);else if(k.isObservable(a))return this.spawnObservable(a,c);else if(k.isMachine(a))return this.spawnMachine(a,b(b({},d),{id:c}));else throw new Error('Unable to spawn entity "'+c+'" of type "'+typeof a+'".')};d.prototype.spawnMachine=function(a,c){var e=this;c===void 0&&(c={});var f=new d(a,b(b({},this.options),{parent:this,id:c.id||a.id}));a=b(b({},r),c);a.sync&&f.onTransition(function(a){e.send(h.update,{state:a,id:f.id})});f.onDone(function(a){e.send(k.toSCXMLEvent(a,{origin:f.id}))}).start();c=f;this.children.set(f.id,c);a.autoForward&&this.forwardTo.add(f.id);return c};d.prototype.spawnPromise=function(a,b){var c=this,d=!1;a.then(function(a){d||c.send(k.toSCXMLEvent(i.doneInvoke(b,a),{origin:b}))},function(a){if(!d){var e=i.error(b,a);try{c.send(k.toSCXMLEvent(e,{origin:b}))}catch(d){k.reportUnhandledExceptionOnInvocation(a,d,b),c.devTools&&c.devTools.send(e,c.state),c.machine.strict&&c.stop()}}});var e={id:b,send:function(){return void 0},subscribe:function(b,c,d){var e=!1;a.then(function(a){if(e)return;b&&b(a);if(e)return;d&&d()},function(a){if(e)return;c(a)});return{unsubscribe:function(){return e=!0}}},stop:function(){d=!0},toJSON:function(){return{id:b}}};this.children.set(b,e);return e};d.prototype.spawnCallback=function(a,b){var c=this,d=!1,e=new Set(),f=new Set(),g=function(a){f.forEach(function(b){return b(a)});if(d)return;c.send(a)},h;try{h=a(g,function(a){e.add(a)})}catch(a){this.send(i.error(b,a))}if(k.isPromiseLike(h))return this.spawnPromise(h,b);a={id:b,send:function(a){return e.forEach(function(b){return b(a)})},subscribe:function(a){f.add(a);return{unsubscribe:function(){f["delete"](a)}}},stop:function(){d=!0,k.isFunction(h)&&h()},toJSON:function(){return{id:b}}};this.children.set(b,a);return a};d.prototype.spawnObservable=function(a,b){var c=this,d=a.subscribe(function(a){c.send(k.toSCXMLEvent(a,{origin:b}))},function(a){c.send(k.toSCXMLEvent(i.error(b,a),{origin:b}))},function(){c.send(k.toSCXMLEvent(i.doneInvoke(b),{origin:b}))}),e={id:b,send:function(){return void 0},subscribe:function(b,c,d){return a.subscribe(b,c,d)},stop:function(){return d.unsubscribe()},toJSON:function(){return{id:b}}};this.children.set(b,e);return e};d.prototype.spawnActor=function(a){this.children.set(a.id,a);return a};d.prototype.spawnActivity=function(a){var b=this.machine.options&&this.machine.options.activities?this.machine.options.activities[a.type]:void 0;if(!b){j.IS_PRODUCTION||k.warn(!1,"No implementation found for activity '"+a.type+"'");return}b=b(this.state.context,a);this.spawnEffect(a.id,b)};d.prototype.spawnEffect=function(a,b){this.children.set(a,{id:a,send:function(){return void 0},subscribe:function(){return{unsubscribe:function(){return void 0}}},stop:b||void 0,toJSON:function(){return{id:a}}})};d.prototype.attachDev=function(){if(this.options.devTools&&typeof window!=="undefined"){if(window.__REDUX_DEVTOOLS_EXTENSION__){var a=typeof this.options.devTools==="object"?this.options.devTools:void 0;this.devTools=window.__REDUX_DEVTOOLS_EXTENSION__.connect(b(b({name:this.id,autoPause:!0,stateSanitizer:function(a){return{value:a.value,context:a.context,actions:a.actions}}},a),{features:b({jump:!1,skip:!1},a?a.features:void 0)}),this.machine);this.devTools.init(this.state)}q.registerService(this)}};d.prototype.toJSON=function(){return{id:this.id}};d.prototype[k.symbolObservable]=function(){return this};d.defaultOptions=function(b){return{execute:!0,deferEvents:!0,clock:{setTimeout:function(a,c){return b.setTimeout.call(null,a,c)},clearTimeout:function(a){return b.clearTimeout.call(null,a)}},logger:b.console.log.bind(console),devTools:!1}}(typeof window==="undefined"?a:window);d.interpret=z;return d}();Z.Interpreter=v;var w=function(a){a===void 0&&(a="null");return{id:a,send:function(){return void 0},subscribe:function(){return{unsubscribe:function(){}}},toJSON:function(){return{id:a}}}},x=function(a){return k.isString(a)?b(b({},r),{name:a}):b(b(b({},r),{name:k.uniqueId()}),a)};function y(a,b){var c=x(b);return s(void 0,function(b){j.IS_PRODUCTION||k.warn(!!b,'Attempted to spawn an Actor (ID: "'+(k.isMachine(a)?a.id:"undefined")+'") outside of a service. This will have no effect.');if(b)return b.spawn(a,c.name,c);else return w(c.name)})}Z.spawn=y;function z(a,b){a=new v(a,b);return a}Z.interpret=z}var Ga=!1,Ha=function(){Ga||(Ga=!0,Fa());return Ea.exports},Ia={},Ja={exports:Ia};function Ka(){var a=this&&this.__values||function(a){var b=typeof Symbol==="function"&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&typeof a.length==="number")return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},b=this&&this.__read||function(a,b){var c=typeof Symbol==="function"&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[],f;try{while((b===void 0||b-->0)&&!(d=a.next()).done)e.push(d.value)}catch(a){f={error:a}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error}}return e};Object.defineProperty(Ia,"__esModule",{value:!0});var c=V();function d(d,e,f){var g,h;d=c.State.from(d,d instanceof c.State?d.context:void 0);try{for(var e=a(e),i=e.next();!i.done;i=e.next()){var j=b(i.value,2),k=j[0];j=j[1];if(d.matches(k))return j(d)}}catch(a){g={error:a}}finally{try{i&&!i.done&&(h=e["return"])&&h.call(e)}finally{if(g)throw g.error}}return f(d)}Ia.matchState=d}var La=!1,Ma=function(){La||(La=!0,Ka());return Ja.exports},$={},Na={exports:$};function Oa(){function a(a){for(var b in a)$.hasOwnProperty(b)||($[b]=a[b])}Object.defineProperty($,"__esModule",{value:!0});var b=u();$.matchesState=b.matchesState;b=z();$.mapState=b.mapState;b=ka();$.StateNode=b.StateNode;b=V();$.State=b.State;b=oa();$.Machine=b.Machine;$.createMachine=b.createMachine;b=T();$.send=b.send;$.sendParent=b.sendParent;$.sendUpdate=b.sendUpdate;$.assign=b.assign;$.doneInvoke=b.doneInvoke;$.forwardTo=b.forwardTo;var c=Ha();$.interpret=c.interpret;$.Interpreter=c.Interpreter;$.spawn=c.spawn;c=Ma();$.matchState=c.matchState;c={raise:b.raise,send:b.send,sendParent:b.sendParent,sendUpdate:b.sendUpdate,log:b.log,cancel:b.cancel,start:b.start,stop:b.stop,assign:b.assign,after:b.after,done:b.done,respond:b.respond,forwardTo:b.forwardTo,escalate:b.escalate};$.actions=c;a(E())}var Pa=!1,Qa=function(){Pa||(Pa=!0,Oa());return Na.exports};b=function(a){switch(a){case void 0:return Qa()}};e.exports=b}),null);
__d("xstate",["xstate-4.7.7"],(function(a,b,c,d,e,f){e.exports=b("xstate-4.7.7")()}),null);
__d("XCollabCallSendMessageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/collab/sendmessage/",{recipient_id:{type:"Int",required:!0},msg_id:{type:"Int",required:!0},message_info:{type:"String",required:!0},webrtc_fbtrace:{type:"Int"}})}),null);
__d("XGroupCallController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groupcall/{?call_context}/",{call_context:{type:"String",required:!0},call_id:{type:"Int"},users_to_ring:{type:"FBIDSet",defaultValue:[]},has_video:{type:"Bool",defaultValue:!0},initialize_video:{type:"Bool",defaultValue:!0},server_info_data:{type:"String"},nonce:{type:"String"},multiway_www_tier:{type:"String"},multiway_core_tier:{type:"String"},locale:{type:"String"},funnel_session_id:{type:"String"}})}),null);
__d("XGroupCallSendMessageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groupcall/sendmessage/",{webrtc_fbtrace:{type:"Int"}})}),null);
__d("XGroupCallSendRequestController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groupcall/sendrequest/",{webrtc_fbtrace:{type:"Int"}})}),null);
__d("XGroupCallSigningController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groupcall/init/",{call_context:{type:"String",required:!0},call_id:{type:"Int"},users_to_ring:{type:"FBIDSet",defaultValue:[]},has_video:{type:"Bool",defaultValue:!1},initialize_video:{type:"Bool",defaultValue:!1},server_info_data:{type:"String"},nonce:{type:"String"},multiway_www_tier:{type:"String"},multiway_core_tier:{type:"String"}})}),null);
__d("XRTCCallNUXController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/rtc/call/nuxstatus/",{})}),null);
__d("XRtcFetchProvisionalRingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/provisionalring/",{user_id:{type:"Int",required:!0}})}),null);
__d("XScreenSharingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/screen_sharing/",{peer_id:{type:"FBID",required:!0},version:{type:"Int"}})}),null);
__d("XVideoCallAdminMessageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/admin_msg/",{})}),null);
__d("XVideoCallController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/incall/",{peer_id:{type:"FBID",required:!0},call_id:{type:"Int"},is_caller:{type:"Bool",defaultValue:!1},audio_only:{type:"Bool",defaultValue:!1},nonce:{type:"String"},meeting_id:{type:"Int"},meeting_pass:{type:"String"},initialize_video:{type:"Bool",defaultValue:!0},locale:{type:"String"}})}),null);
__d("XVideoCallSendMessageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/sendmessage/",{recipient_id:{type:"Int",required:!0},msg_id:{type:"Int",required:!0},message_info:{type:"String",required:!0},webrtc_fbtrace:{type:"Int"}})}),null);
__d("XVideoCallTurnDiscoveryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/turndiscovery/",{version:{type:"Int",required:!0},call_id:{type:"String"}})}),null);