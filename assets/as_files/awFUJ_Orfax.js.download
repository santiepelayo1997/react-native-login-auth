if (self.CavalryLogger) { CavalryLogger.start_js(["UhCAv"]); }

__d("StoriesCardOverlayPositioner_bounds.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesCardOverlayPositioner_bounds",selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rotation",storageKey:null}],type:"StoryOverlayRectangle",abstractKey:null};e.exports=a}),null);
__d("StoriesPollStickerMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input",type:"VoteStoryCardPollData!"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VoteStoryCardPollResponsePayload",kind:"LinkedField",name:"vote_story_card_poll",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null},{alias:null,args:null,concreteType:"StoryCardPoll",kind:"LinkedField",name:"story_card_poll",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_vote",storageKey:null},{alias:null,args:null,concreteType:"StoryCardPollOption",kind:"LinkedField",name:"poll_options",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vote_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_vote_index",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"StoriesPollStickerMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"StoriesPollStickerMutation",selections:b},params:{id:"2241322555930366",metadata:{},name:"StoriesPollStickerMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("StoriesPollSticker_overlay$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{derivedFrom:"StoriesPollSticker_overlay"},name:"StoriesPollSticker_overlay$normalization",selections:[{alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null},{alias:null,args:null,concreteType:"StoryOverlayRectangle",kind:"LinkedField",name:"voting_control_bounds",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rotation",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardPoll",kind:"LinkedField",name:"poll",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_vote",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_vote_index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"StoryCardPollOption",kind:"LinkedField",name:"poll_options",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vote_count",storageKey:null}],storageKey:null}],storageKey:null}]};e.exports=a}),null);
__d("StoriesPollSticker_overlay.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesPollSticker_overlay",selections:[{alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null},{alias:null,args:null,concreteType:"StoryOverlayRectangle",kind:"LinkedField",name:"voting_control_bounds",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{args:null,kind:"FragmentSpread",name:"StoriesCardOverlayPositioner_bounds"}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardPoll",kind:"LinkedField",name:"poll",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_vote",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_vote_index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"StoryCardPollOption",kind:"LinkedField",name:"poll_options",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vote_count",storageKey:null}],storageKey:null}],storageKey:null}],type:"StoryOverlayPollSticker",abstractKey:null};e.exports=a}),null);
__d("StoriesPollSticker_owner.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesPollSticker_owner",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Node",abstractKey:"__isNode"}],type:"CameraPostBucketOwnerUnion",abstractKey:"__isCameraPostBucketOwnerUnion"};e.exports=a}),null);
__d("StoriesPollSticker_story.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesPollSticker_story",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"via",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"Story",abstractKey:null};e.exports=a}),null);
__d("StoriesActorContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c={actorID:null};e.exports=a.createContext(c)}),null);
__d("StoriesCardOverlayPositioner.react",["CometRelay","React","StoriesCardOverlayPositioner_bounds.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;var h=b("CometRelay").useFragment,i=b("React");function a(a){var c=a.bounds,d=a.children,e=a.containerHeight;a=a.containerWidth;c=h(g!==void 0?g:g=b("StoriesCardOverlayPositioner_bounds.graphql"),c);if(c!=null){var f=c.height,j=c.rotation,k=c.width,l=c.x;c=c.y;if(typeof f==="number"&&typeof k==="number"&&typeof j==="number"&&typeof l==="number"&&typeof c==="number"){if(c>1||l>1)return null;f=f*e;e=k*a;k=c*100;a=l*100;c={height:f+"px",left:a+"%",position:"absolute",top:k+"%",width:e+"px"};l={height:"100%",transform:"rotate("+j+"deg)",width:"100%"};return i.jsx("div",{className:"storiesCardOverlay/root",style:c,children:i.jsx("div",{className:"storiesCardOverlay/rotation",style:l,children:d})})}}return null}e.exports=a}),null);
__d("StoriesPauseReasons",[],(function(a,b,c,d,e,f){"use strict";a={BUCKET_TRANSITION:"BUCKET_TRANSITION",BUG_DIALOG:"BUG_DIALOG",CARD_CHANGE:"CARD_CHANGE",CLICK_ADD_STORY:"CLICK_ADD_STORY",CLICK_ARCHIVE_RESHARE_BUTTON:"CLICK_ARCHIVE_RESHARE_BUTTON",CLICK_GIF_SELECTOR:"CLICK_GIF_SELECTOR",CLICK_ON_OVERLAY_STICKER:"CLICK_ON_OVERLAY_STICKER",CLICK_PAUSE_ICON:"CLICK_PAUSE_ICON",CLICK_SEE_MORE_LONG_TEXT:"CLICK_SEE_MORE_LONG_TEXT",CONFIRMATION_DIALOG:"CONFIRMATION_DIALOG",FOCUSE_ON_INPUT:"FOCUSE_ON_INPUT",HOVER_ON_ARCHIVE_RESHARE_BUTTON:"HOVER_ON_ARCHIVE_RESHARE_BUTTON",HOVER_ON_OVERLAY_STICKER:"HOVER_ON_OVERLAY_STICKER",HOVER_ON_PAUSE_OVERLAY:"HOVER_ON_PAUSE_OVERLAY",HOVER_ON_RATING_STICKER:"HOVER_ON_RATING_STICKER",HOVER_ON_REACTION_ICON:"HOVER_ON_REACTION_ICON",HOVER_ON_SHARE_BUTTON:"HOVER_ON_SHARE_BUTTON",HOVER_ON_SONG_STICKER:"HOVER_ON_SONG_STICKER",JEWEL:"JEWEL",KEYBOARD:"KEYBOARD",LWR_PLAYBACK:"LWR_PLAYBACK",MENU:"MENU",MESSAGE_VIEWER:"MESSAGE_VIEWER",MOUSE_CLICK_AND_HOLD:"MOUSE_CLICK_AND_HOLD",MOUSE_ENTER_POLL_STICKER:"MOUSE_ENTER_POLL_STICKER",REPORT_DIALOG:"REPORT_DIALOG",SETTINGS_DIALOG:"SETTINGS_DIALOG",TILE_GRID_BUTTON:"TILE_GRID_BUTTON",VIDEO_PLAYBACK:"VIDEO_PLAYBACK",VISIBILITY_CHANGE:"VISIBILITY_CHANGE"};e.exports=a}),null);
__d("Autosize",["cx","CSS","DOM","Style"],(function(a,b,c,d,e,f,g){["fontFamily","fontStyle","fontVariant","fontWeight","letterSpacing","textDecoration","textIndent","textTransform","whiteSpace","wordSpacing","wordWrap"];var h=/^[0-9]+$/;function i(a){var c,d=a.cloneNode(!0);b("CSS").addClass(d,"_4g");var e=a.clientWidth-(c=b("Style")).getFloat(a,"paddingLeft")-c.getFloat(a,"paddingRight");c.set(d,"width",e+"px");e=a.clientHeight-c.getFloat(a,"paddingTop")-c.getFloat(a,"paddingBottom");c.set(d,"height",e+"px");b("DOM").insertAfter(a,d);return d}function j(a,c,d,e,f){var g=a.style.fontSize,h=a.style.height;b("Style").set(a,"height","auto");var i;c!==null&&(i=a.style.width,b("Style").set(a,"width","auto"));var j=0,k=f.length-1;while(j<k){var l=Math.ceil((j+k)/2);b("Style").set(a,"font-size",f[l]+e);d!==null&&a.scrollHeight>d||c!==null&&a.scrollWidth>c?k=l-1:j=l}a.style.fontSize=g;a.style.height=h;c!==null&&(a.style.width=i);return f[j]+e}function k(a,c,d,e,f,g){var h=a.style.fontSize,i=a.style.height;b("Style").set(a,"height","auto");var j;c!==null&&(j=a.style.width,b("Style").set(a,"width","auto"));b("Style").set(a,"font-size",g+e);if((d===null||a.scrollHeight<=d)&&(c===null||a.scrollWidth<=c)){a.style.fontSize=h;a.style.height=i;c!==null&&(a.style.width=j);return g+e}b("Style").set(a,"font-size",f+e);if(d!==null&&a.scrollHeight>d||c!==null&&a.scrollWidth>c){a.style.fontSize=h;a.style.height=i;c!==null&&(a.style.width=j);return f+e}while(f+1<g){var k=Math.ceil((f+g)/2);b("Style").set(a,"font-size",k+e);d!==null&&a.scrollHeight>d||c!==null&&a.scrollWidth>c?g=k:f=k}a.style.fontSize=h;a.style.height=i;c!==null&&(a.style.width=j);return f+e}function a(a,b){this._wrap=a;this._attr=b;if(this._attr.sizes){a=this._attr.sizes;for(var c=1,d=a.length;c<d;c++){if(a[c-1]<=a[c])continue;a.sort(function(a,b){return a-b});break}}else if(b.min>b.max){c=b.min;b.min=b.max;b.max=c}this.fit()}a.prototype.fit=function(a,c){var d=this._wrap;if(!d.clientWidth){l.push(this);return}var e=i(d);typeof a==="undefined"&&(a=this._attr.width);h.test(a)?e.style.width=a+"px":a!==null&&a!=="auto"&&(e.style.width=a);typeof c==="undefined"&&(c=this._attr.height);h.test(c)?e.style.height=c+"px":c!==null&&c!=="auto"&&(e.style.height=c);a=null;this._attr.wrap||(a=e.clientWidth);var f=null;(this._attr.wrap||c!==null)&&(f=e.clientHeight);this._attr.sizes?c=j(e,a,f,"px",this._attr.sizes):c=k(e,a,f,"px",this._attr.min,this._attr.max);b("DOM").remove(e);b("Style").set(d,"font-size",c);b("CSS").removeClass(d,"invisible_elem")};var l=[];a.onNodeInserted=function(){var a=l;l=[];a.forEach(function(a){a.fit()})};e.exports=a}),null);
__d("Autosize.react",["cx","Autosize","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this;return h.jsx("div",{style:{height:"auto",width:this.props.width?this.props.width+"px":"auto"},className:"_1obl invisible_elem",ref:function(b){return a.$1=b},children:this.props.children})};d.componentDidMount=function(){new(b("Autosize"))(this.$1,babelHelpers["extends"]({},this.props)),requestAnimationFrame(function(){return b("Autosize").onNodeInserted()})};d.componentDidUpdate=function(a){new(b("Autosize"))(this.$1,babelHelpers["extends"]({},this.props)).fit()};return c}(h.PureComponent);e.exports=a}),null);
__d("StoriesPollStickerOptionLabel.react",["cx","Autosize.react","React","StoriesEnums","range","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("StoriesEnums").POLL_STICKER;function a(a){var c=a.overlayHeight,d=a.overlayWidth,e=a.voteCountPercent,f=e!==void 0&&e!==null,g=.5;typeof e==="number"&&(g=e/100);e=function(){var b=a.overlayWidth*i.AVAILABLE_WIDTH_RATIO;b=Math.floor(b*g*i.VOTE_OPTION_MAX_WIDTH_RATIO);var d=Math.floor(f?i.TEXT_SMALL_HEIGHT_RATIO*c:i.TEXT_BIG_HEIGHT_RATIO*c);return{height:d,width:b}};var j=function(){var b={color:a.isSelected&&a.isOverflowedOption?i.TEXT_COLOR_GREY:i.BACKGROUND_COLOR_BLUE,height:"auto",width:m},c=f?{lineHeight:1}:{};return babelHelpers["extends"]({},b,c)};e=e();var k=i.VOTE_OPTION_MAX_WIDTH_RATIO*100,l="oqcyycmt po0baly6 jm1wdb64 aenfhxwr taijpn5t g5gj957u buofh1pr cbu4d94t rj1gh0hx j83agx80 rq0escxv"+(a.isSelected?" igj13h7g":""),m=a.isOverflowLayout?i.DEFAULT_OPTION_WIDTH_RATIO*d*i.VOTE_OPTION_MAX_WIDTH_RATIO:e.width,n={};j=j();a.isOverflowLayout?(n.maxWidth=m,j.width="auto"):n.maxWidth=k+"%";k=f&&g<=.5?1:0;k={color:i.TEXT_COLOR_GREY,fontSize:d*i.VOTE_COUNT_FONT_SIZE_RATIO,width:j.width,zIndex:k};var o=f?i.TEXT_SMALL_MIN_FONT_SIZE_RATIO*d:i.TEXT_BIG_MIN_FONT_SIZE_RATIO*d;d=f?i.TEXT_SMALL_MAX_FONT_SIZE_RATIO*d:i.TEXT_BIG_MAX_FONT_SIZE_RATIO*d;a.isSelected&&a.isOverflowedOption?j=babelHelpers["extends"]({},j,{color:i.TEXT_COLOR_GREY}):a.isSelected&&a.isResultView&&(k.color="white",j=babelHelpers["extends"]({},j,{color:"white"}));a.isInstagramStyle&&(k.color=i.TEXT_COLOR_GREY,j.color=a.isLeftOption?i.IG_LEFT_TEXT_COLOR:i.IG_RIGHT_TEXT_COLOR);return h.jsxs("div",{className:l,style:n,children:[h.jsx("div",{className:"_66l8",style:babelHelpers["extends"]({},j,{textAlign:a.align}),children:h.jsx(b("Autosize.react"),{height:e.height,sizes:b("range")(o,d+1,2),width:m,children:a.text.toUpperCase()})}),f&&h.jsx("div",{className:"_66l8",style:babelHelpers["extends"]({},k,{textAlign:a.align}),children:(a.voteCountPercent||0)+"%"})]})}e.exports=a}),null);
__d("StoriesPollStickerOption.react",["CometPressable.react","React","ReactMotion","StoriesEnums","StoriesPollStickerOptionLabel.react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=b("ReactMotion").Motion,j=b("ReactMotion").presets,k=b("ReactMotion").spring,l=b("StoriesEnums").POLL_STICKER,m=b("StoriesEnums").VOTING_PHASES;function a(a){var c=a.isLeftOption,d=a.overlayHeight,e=a.overlayWidth,f=a.width,o=n(a);if(a.votingPhase===m.VOTING)return h.jsx("div",{className:"k4urcfbm abiwlrkh oqq733wu a8nywdso qt6c0cv9 rz4wbd8a jb3vyjys n5yhfkqm taijpn5t datstx6m j83agx80 nhd2j8a9 mkbloq8g bp9cbjyn"+(c?" h3mn19vb":"")+" hdj6kjfu mo3u6lec",style:babelHelpers["extends"]({},o,{width:l.DEFAULT_OPTION_WIDTH_RATIO*f}),children:h.jsx(b("CometPressable.react"),{display:"inline",onPress:a.onSelect,overlayDisabled:!0,children:h.jsx(b("StoriesPollStickerOptionLabel.react"),{align:o.textAlign,isInstagramStyle:a.isInstagramStyle,isLeftOption:a.isLeftOption,isOverflowLayout:a.isOverflowLayout,isOverflowedOption:a.isOverflowedOption,isResultView:!a.isConsumer,isSelected:a.isSelected,overlayHeight:d,overlayWidth:e,text:a.text||"",voteCountPercent:a.voteCountPercent})})});if(a.votingPhase===m.RESULTS)return h.jsx("div",{className:(g||(g=b("stylex"))).dedupe({"align-items-1":"bp9cbjyn","background-color-1":"mkbloq8g","cursor-1":"nhd2j8a9","display-1":"j83agx80","height-1":"datstx6m","justify-content-1":"taijpn5t","min-width-1":"n5yhfkqm","padding-top-1":"jb3vyjys","padding-end-1":"rz4wbd8a","padding-bottom-1":"qt6c0cv9","padding-start-1":"a8nywdso","pointer-events-1":"oqq733wu","user-select-1":"abiwlrkh","width-1":"k4urcfbm"},c?{"border-end-0.3":"h3mn19vb"}:null,{"align-items-1":"bp9cbjyn","border-end-0.3":"bn081pho","cursor-1":"bnpdmtie","display-1":"j83agx80","flex-direction-1":"cbu4d94t","justify-content-1":"taijpn5t","pointer-events-1":"hzruof5a"},a.isSelected&&a.isConsumer?{"background-color-1":"j0apdczp"}:null,a.isSelected&&!a.isConsumer?{"background-image-1":"ceizbtlg"}:null),style:babelHelpers["extends"]({},o,{width:f}),children:h.jsx(b("StoriesPollStickerOptionLabel.react"),{align:o.textAlign,isInstagramStyle:a.isInstagramStyle,isLeftOption:a.isLeftOption,isOverflowLayout:a.isOverflowLayout,isOverflowedOption:a.isOverflowedOption,isResultView:!a.isConsumer,isSelected:a.isSelected,overlayHeight:d,overlayWidth:e,text:a.text||"",voteCountPercent:a.voteCountPercent})});var p=c&&a.isSelected||!c&&!a.isSelected;p=p?0:e;f=c?f:Math.abs(f-e);p=Math.floor(c?p:Math.abs(e-p));f=Math.floor(c?f:Math.abs(e-f));return h.jsx(i,{defaultStyle:{width:p},style:{width:k(f,babelHelpers["extends"]({},j.noWobble))},children:function(f){return h.jsx("div",{className:(g||(g=b("stylex"))).dedupe({"align-items-1":"bp9cbjyn","background-color-1":"mkbloq8g","cursor-1":"nhd2j8a9","display-1":"j83agx80","height-1":"datstx6m","justify-content-1":"taijpn5t","min-width-1":"n5yhfkqm","padding-top-1":"jb3vyjys","padding-end-1":"rz4wbd8a","padding-bottom-1":"qt6c0cv9","padding-start-1":"a8nywdso","pointer-events-1":"oqq733wu","user-select-1":"abiwlrkh","width-1":"k4urcfbm"},c?{"border-end-0.3":"h3mn19vb"}:null,{"align-items-1":"bp9cbjyn","border-end-0.3":"bn081pho","cursor-1":"bnpdmtie","display-1":"j83agx80","flex-direction-1":"cbu4d94t","justify-content-1":"taijpn5t","pointer-events-1":"hzruof5a"},a.isSelected?{"background-color-1":"j0apdczp"}:null),style:babelHelpers["extends"]({},f,o),children:h.jsx(b("StoriesPollStickerOptionLabel.react"),{align:o.textAlign,isInstagramStyle:a.isInstagramStyle,isLeftOption:a.isLeftOption,isOverflowLayout:a.isOverflowLayout,isOverflowedOption:a.isOverflowedOption,isResultView:!1,isSelected:a.isSelected,overlayHeight:d,overlayWidth:e,text:a.text||"",voteCountPercent:a.voteCountPercent})})}})}var n=function(a){var b={textAlign:"center"};a.isSelected&&a.votingPhase===m.RESULTS&&a.isInstagramStyle&&(b=babelHelpers["extends"]({},b,{background:l.BACOGROUND_COLOR_SLATE}));if(a.optionsCount===1)return babelHelpers["extends"]({},b,{borderEnd:"0px"});var c=a.isLeftOption?"Left":"Right",d=a.isLeftOption?"left":"right",e=a.isLeftOption?"flex-start":"flex-end";c="padding"+c;if(a.isOverflowLayout){b=babelHelpers["extends"]({},b,(e={alignItems:e},e[c]=l.OVERFLOW_CHILD_PADDING_RATIO*a.overlayWidth+"px",e))}else if(!a.isInstagramStyle){b=babelHelpers["extends"]({},b,(e={},e[c]=l.CHILD_PADDING_RATIO*a.overlayWidth+"px",e))}a.isOverflowedOption&&(b.textAlign=d);return b};e.exports=a}),null);
__d("StoriesPollSticker.react",["CometRelay","React","StoriesActorContext","StoriesCardOverlayPositioner.react","StoriesEnums","StoriesPauseReasons","StoriesPollStickerOption.react","stylex","uuid","StoriesPollSticker_overlay.graphql","StoriesPollSticker_owner.graphql","StoriesPollSticker_story.graphql","StoriesPollStickerMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h,i,j,k,l=(c=b("CometRelay")).commitMutation;c.graphql;var m=c.useFragment,n=c.useRelayEnvironment,o=b("React");d=b("React");var p=d.useContext,q=d.useState,r=b("StoriesEnums").POLL_STICKER,s=b("StoriesEnums").VOTING_PHASES;function a(a){var c,d=m(g!==void 0?g:g=b("StoriesPollSticker_overlay.graphql"),a.overlay),e=m(h!==void 0?h:h=b("StoriesPollSticker_owner.graphql"),a.owner),f=m(i!==void 0?i:i=b("StoriesPollSticker_story.graphql"),a.story),j=n(),l=q(!1),w=l[0],y=l[1];l=p(b("StoriesActorContext"));var z=l.actorID;l=a.containerHeight;var A=a.containerWidth,B=d==null?void 0:d.poll,C=d==null?void 0:d.style,D=C===r.IG_TWO_OPTION_COMBINED;C=d==null?void 0:(C=d.voting_control_bounds)==null?void 0:C.width;c=d==null?void 0:(c=d.voting_control_bounds)==null?void 0:c.height;if(typeof C!=="number"||typeof c!=="number")return null;var E=C*A,F=c*l,G=function(b){var c=B==null?void 0:B.can_viewer_vote;if(c===!1)return;y(!0);c={optionIndex:b,storyID:a.cardID};x(c,j,d)},H=function(){var a=(B==null?void 0:B.poll_options)||[],b=B==null?void 0:B.viewer_vote_index,c=B==null?void 0:B.can_viewer_vote,g=a.reduce(function(a,b){return a+(b.vote_count||0)},0),h=u(a),i=b!=null&&b>=0,j=!t(e,f,z);c=j?!i&&c:g===0;var k=!w&&!c,l=w&&!c,m=0,n=[],o=v(d);a.forEach(function(c,d){var e=c.text;c=c.vote_count;var f=d===b||o;if(typeof c!=="number")return;if((k||l)&&c===0)return;var p=void 0;C=E;var q=s.VOTING,r=!1;if(k||l){k?q=s.RESULTS:l&&(q=s.JUST_VOTED);var t=!j&&!i&&h===d;r=f||t;if(d===a.length-1)p=100-m;else{f=c/g;p=f*100;t=Math.round(p)!==p;c=p<.1;f=t?p.toFixed(c?1:0):p;p=parseFloat(f);m+=p}C=E*(p/100)}n.push({animateIn:w,isConsumer:j,isSelected:r,key:d,onSelect:function(){return G(d)},text:e,voteCountPercent:p,votingPhase:q,width:C})});return n};c=function(){a.setPause(!0,b("StoriesPauseReasons").MOUSE_ENTER_POLL_STICKER)};var I=function(){a.setPause(!1,b("StoriesPauseReasons").MOUSE_ENTER_POLL_STICKER)},J=function(){var a=H(),c=a.findIndex(function(a){return a.width<=r.MINIMUM_LABEL_WIDTH_RATIO*E});return a.map(function(d,e){return o.jsx(b("StoriesPollStickerOption.react"),babelHelpers["extends"]({},d,{isInstagramStyle:D,isLeftOption:e===0,isOverflowLayout:c>=0,isOverflowedOption:c===e,optionsCount:a.length,overlayHeight:F,overlayWidth:E}))})};J=J();return o.jsx(b("StoriesCardOverlayPositioner.react"),{bounds:d==null?void 0:d.voting_control_bounds,containerHeight:l,containerWidth:A,children:o.jsx("div",{className:(k||(k=b("stylex"))).dedupe({"align-items-1":"gs1a9yip","background-color-1":"mkbloq8g","border-top-0.3":"qu0x051f","border-end-0.3":"esr5mh6w","border-bottom-0.3":"e9989ue4","border-start-0.3":"r7d6kgcz","bottom-1":"i09qtzwb","box-shadow-1":"nwm2mul6","color-1":"h4pr0btg","display-1":"j83agx80","flex-direction-1":"btwxx1t3","height-1":"datstx6m","justify-content-1":"jifvfom9","overflow-x-1":"ni8dbmo4","overflow-y-1":"stjgntxs","pointer-events-1":"oqq733wu","position-1":"pmk7jnqg","top-1":"kr520xx4","transform-origin-1":"dd2scrzq","width-1":"k4urcfbm"},D?null:{"border-top-start-radius-1":"a4snqeeb","border-top-end-radius-1":"m5mjud78","border-bottom-end-radius-1":"o5016i8p","border-bottom-start-radius-1":"te4y77sl"},D?{"border-top-start-radius-1":"fni8adji","border-top-end-radius-1":"hgaippwi","border-bottom-end-radius-1":"fykbt5ly","border-bottom-start-radius-1":"ns4ygwem"}:null),onMouseEnter:c,onMouseLeave:I,children:J})})}var t=function(a,b,c){a=a;if(a==null)return!1;c=c;b=b==null?void 0:(b=b.via)==null?void 0:b.id;return a.id===c||b===c},u=function(a){return a.reduce(function(b,c,d){c=c==null?void 0:c.vote_count;var e=a[b].vote_count;return typeof c==="number"&&typeof e==="number"&&e<c?d:b},0)},v=function(a){a=(a==null?void 0:(a=a.poll)==null?void 0:a.poll_options)||[];return a.filter(function(a){a=a==null?void 0:a.vote_count;return typeof a==="number"&&a>0}).length===1},w=function(a,c){var d=a.get(c.storyID);d=d&&d.getLinkedRecords("story_overlays")||[];var e=null;d.map(function(a){if(a==null)return;a.getValue("__typename")==="StoryOverlayPollSticker"&&(e=a.getLinkedRecord("poll"))});if(e==null)return;d=c.optionIndex;e.setValue(d,"viewer_vote_index");c=e.getLinkedRecords("poll_options");var f=c.length,g=new Array(f);g[f-d-1]=c[f-d-1];g[d]=a.create("client:newNode:"+b("uuid")(),"StoryCardPollOption");g[d].setValue(c[d].getValue("vote_count")+1,"vote_count");g[d].setValue(c[d].getValue("text"),"text");e.setLinkedRecords(g,"poll_options")},x=function(a,b,c){c=c==null?void 0:(c=c.poll)==null?void 0:c.id;if(c==null)return;l(b,{mutation:y,optimisticUpdater:function(b){return w(b,a)},variables:{input:{option:a.optionIndex,story_card_poll_id:c}}})},y=j!==void 0?j:j=b("StoriesPollStickerMutation.graphql");e.exports=a}),null);